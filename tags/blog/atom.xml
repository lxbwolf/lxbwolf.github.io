<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>blog on Xiaobin&#39;s Notes</title>
        <link>https://lxb.wiki/tags/blog/</link>
        <description>Recent content in blog on Xiaobin&#39;s Notes</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Wed, 11 May 2022 22:15:38 +0000</lastBuildDate><atom:link href="https://lxb.wiki/tags/blog/atom.xml" rel="self" type="application/rss+xml" /><item>
        <title>Hexo pure主题配置utteranc评论</title>
        <link>https://lxb.wiki/852e4155/</link>
        <pubDate>Wed, 11 May 2022 22:15:38 +0000</pubDate>
        
        <guid>https://lxb.wiki/852e4155/</guid>
        <description>&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;utteranc 官网
&lt;a class=&#34;link&#34; href=&#34;https://utteranc.es/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://utteranc.es/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;1-安装应用&#34;&gt;1 安装应用&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/apps/utterances&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/apps/utterances&lt;/a&gt;
设置指定仓库&lt;/p&gt;
&lt;h2 id=&#34;2-基本参数&#34;&gt;2 基本参数&lt;/h2&gt;
&lt;p&gt;官方的脚本如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;script&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://utteranc.es/client.js&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;repo&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yansheng836/yansheng836.github.io&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;issue&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;term&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github-light&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;crossorigin&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;anonymous&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/script&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;主要参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;repo：存放评论的issues的仓库名（即步骤1指定访问的仓库），可以和博客相同，也可以不同。&lt;/li&gt;
&lt;li&gt;issue-term：指定issues的标题，title表示使用文章的标题作为issues的标题。可选参数（只介绍部分）：&lt;/li&gt;
&lt;li&gt;URL：博客网址：网址全路径&lt;/li&gt;
&lt;li&gt;pathname：URL 去掉域名&lt;/li&gt;
&lt;li&gt;title：博客标题（推荐使用这个，因为上面两个涉及到网址，如果网址包含中文，会被转义，不方便看。）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/lxbwolf/blog_source_image/main/20221216220503.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;theme：评论系统的主题，在Theme里面，选择主题，页面会变色：https://utteranc.es/#heading-theme&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-pure-主题配置&#34;&gt;3 pure 主题配置&lt;/h2&gt;
&lt;p&gt;修改 &lt;code&gt;themes/pure/_config.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;comment type 改为 utterance&lt;/strong&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/lxbwolf/blog_source_image/main/20221216220923.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;添加 utterance 相关配置&lt;/strong&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/lxbwolf/blog_source_image/main/20221216221120.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;修改 ejs&lt;/strong&gt;
在 &lt;code&gt;themes/pure/layout/_partial/post/comment.ejs&lt;/code&gt; 文件中插入以下代码&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;%&lt;/span&gt; } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;theme&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;comment&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;utterance&amp;#39;&lt;/span&gt;) { &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;%&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;theme&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;comment&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;utterance&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;enable&lt;/span&gt;){ &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;section&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;comments&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;comments&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            .&lt;span style=&#34;color:#a6e22e&#34;&gt;utterances&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;max&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;width&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt;;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/style&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;script&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://utteranc.es/client.js&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;repo&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;%= theme.comment.utterance.repo %&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;issue&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;term&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;%= theme.comment.utterance.issue_term %&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;theme&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;%= theme.comment.utterance.theme %&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;crossorigin&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;anonymous&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/script&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/section&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;%&lt;/span&gt; } &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>【译】如何把WordPress网站迁移到新主机</title>
        <link>https://lxb.wiki/ea5f4ef1/</link>
        <pubDate>Sun, 24 Apr 2022 21:36:34 +0000</pubDate>
        
        <guid>https://lxb.wiki/ea5f4ef1/</guid>
        <description>&lt;!-- raw HTML omitted --&gt;
&lt;blockquote&gt;
&lt;p&gt;使用这个简单的方法来迁移一个网站以及管理防火墙配置。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;你有过把一个 WordPress 网站迁移到一台新主机上的需求吗？我曾经迁移过好多次，迁移过程相当简单。当然，的的市场时候我都不会用通用的推荐方法，这次也不例外 —— 我用更简单的方法，这才是我推荐的方法。&lt;/p&gt;
&lt;p&gt;这个迁移方法没有破坏性，因此如果出于某些原因你需要还原到原来的服务器上，很容易可以实现。&lt;/p&gt;
&lt;h3 id=&#34;一个-wordpress-网站的组成部分&#34;&gt;一个 WordPress 网站的组成部分&lt;/h3&gt;
&lt;p&gt;运行一个基于 &lt;a class=&#34;link&#34; href=&#34;#&#34; &gt;WordPress&lt;/a&gt; 的网站有三个重要组成部分：WordPress 本身，一个 web 服务器，如 &lt;a class=&#34;link&#34; href=&#34;#&#34; &gt;Apache&lt;/a&gt;（我正在用），以及 &lt;a class=&#34;link&#34; href=&#34;#&#34; &gt;MariaDB&lt;/a&gt;。MariaDB 是 MySQL 的一个分支，功能相似。&lt;/p&gt;
&lt;p&gt;业界有大量的 Web 服务器，由于我使用了 Apache 很长时间，因此我推荐用 Apache。你可能需要把 Apache 的配置方法改成你用的 Web 服务器的方法。&lt;/p&gt;
&lt;h3 id=&#34;初始配置&#34;&gt;初始配置&lt;/h3&gt;
&lt;p&gt;我使用一台 Linux 主机作为防火墙和网络路由。在我的网络中 Web 服务器是另一台主机。我的内部网络使用的是 C 类私有网络地址范围，按 [无类别域间路由][5]Classless Internet Domain Routing（CIDR）方式简单地记作 192.168.0.0/24。&lt;/p&gt;
&lt;p&gt;对于防火墙，相比于更复杂的 &lt;code&gt;firewalld&lt;/code&gt;，我更喜欢用非常简单的 &lt;a class=&#34;link&#34; href=&#34;#&#34; &gt;IPTables&lt;/a&gt;。这份防火墙配置中的一行会把 80 端口（HTTP）接收到的包发送给 Web 服务器。在 &lt;code&gt;/etc/sysconfig/iptables&lt;/code&gt; 文件中，你可以在注释中看到，我添加了规则，把其他入站服务器连接转发到同一台服务器上合适的端口。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;我使用命名虚拟主机named virtual host来配置原来的 Apache Web 服务器，因为我在这个 HTTPD 实例上运行着多个网站。使用命名虚拟主机配置是个不错的方法，因为（像我一样）未来你可能会在运行其他的网站，这个方法可以使其变得容易。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/etc/httpd/conf/httpd.conf&lt;/code&gt; 中需要迁移的虚拟主机的网站相关部分请参考下面代码。这个片段中不涉及到 IP 地址的修改，因此在新服务器上使用时不需要修改。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;在迁移之前，你需要在 &lt;code&gt;httpd.conf&lt;/code&gt; 的最顶端附近找到 &lt;code&gt;Listen&lt;/code&gt; 声明并修改成类似下面这样。这个地址是服务器的真实私有 IP 地址，不是公开 IP 地址。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;你需要修改新主机上 &lt;code&gt;Listen&lt;/code&gt; 的 IP 地址。&lt;/p&gt;
&lt;h3 id=&#34;前期工作&#34;&gt;前期工作&lt;/h3&gt;
&lt;p&gt;准备工作分为以下三步：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装服务&lt;/li&gt;
&lt;li&gt;配置防火墙&lt;/li&gt;
&lt;li&gt;配置 web 服务器&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;安装-apache-和-mariadb&#34;&gt;安装 Apache 和 MariaDB&lt;/h4&gt;
&lt;p&gt;如果你的新服务器上还没有 Apache 和 MariaDB，那么就安装它们。WordPress 的安装不是必要的。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h4 id=&#34;新服务器防火墙配置&#34;&gt;新服务器防火墙配置&lt;/h4&gt;
&lt;p&gt;确认下新服务器上的防火墙允许访问 80 端口。你&lt;em&gt;每台&lt;/em&gt;电脑上都有一个防火墙，对吗？大部分现代发行版使用的初始化配置包含的防火墙会阻止所有进来的网络流量，以此来提高安全等级。&lt;/p&gt;
&lt;p&gt;下面片段的第一行内容可能已经在你的 IPTables 或其他基于防火墙的网络过滤器中存在了。它标识已经被识别为来自可接受来源的入站包，并绕过后面的其它 INPUT 过滤规则，这样可以节省时间和 CPU 周期。片段中最后一行标识并放行 80 端口新进来的请求到 HTTPD 的连接。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;下面的示例 &lt;code&gt;/etc/sysconfig/iptables&lt;/code&gt; 文件是 IPTables 最少规则的例子，可以允许 SSH（端口 22）和 HTTPD（端口 80）连接。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;在新服务器主机上我需要做的就是在 &lt;code&gt;/etc/sysconfig/iptables&lt;/code&gt; 文件的防火墙规则里添加上面片段的最后一行，然后重新加载修改后的规则集。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;大部分基于红帽的发行版本，如 Fedora，使用的是 &lt;code&gt;firewalld&lt;/code&gt;。我发现对于它的适用场景（如家用、小到中型企业）而言，它过于复杂，因此我不用它。我建议你参照 &lt;a class=&#34;link&#34; href=&#34;#&#34; &gt;firewalld 网页&lt;/a&gt; 来向 &lt;code&gt;firewalld&lt;/code&gt; 添加入站端口 80。&lt;/p&gt;
&lt;p&gt;你的防火墙及其配置可能跟这个有些差异，但最终的目的是允许新 Web 服务器 80 端口接收 HTTPD 连接。&lt;/p&gt;
&lt;h4 id=&#34;httpd-配置&#34;&gt;HTTPD 配置&lt;/h4&gt;
&lt;p&gt;在 &lt;code&gt;/etc/httpd/conf/httpd.conf&lt;/code&gt; 文件中配置 HTTPD。像下面一样在 &lt;code&gt;Listen&lt;/code&gt; 片段中设置 IP 地址。我的新 Web 服务器 IP 地址是 &lt;code&gt;192.168.0.125&lt;/code&gt;。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;复制（对应要迁移的网站的） &lt;code&gt;VirtualHost&lt;/code&gt; 片段，粘贴到新服务器上 &lt;code&gt;httpd.conf&lt;/code&gt; 文件的末尾。&lt;/p&gt;
&lt;h3 id=&#34;迁移过程&#34;&gt;迁移过程&lt;/h3&gt;
&lt;p&gt;只有两组数据需要迁移到新服务器 —— 数据库本身和网站目录结构。把两个目录打包成 &lt;code&gt;tar&lt;/code&gt; 文档。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;把两个 tar 文件复制到新服务器。我通常会把这类文件放到 &lt;code&gt;/tmp&lt;/code&gt; 下，这个目录就是用来做这种事的。在新服务器上运行下面的命令，把 tar 文档解压到正确的目录。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;WordPress 的所有文件都在 &lt;code&gt;/var/website1&lt;/code&gt; 下，因此不需要在新服务器上安装它。新服务器上不需要执行 WordPress 安装过程。&lt;/p&gt;
&lt;p&gt;这个目录就是需要迁移到新服务器上的全部内容。&lt;/p&gt;
&lt;p&gt;最后一步是启动（或重启）&lt;code&gt;mysqld&lt;/code&gt; 和 &lt;code&gt;httpd&lt;/code&gt; 服务守护进程。WrodPress 不是一个服务，因此不使用守护进程的方式来启动。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;启动之后，你应该检查下这些服务的状态。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h3 id=&#34;最终的修改&#34;&gt;最终的修改&lt;/h3&gt;
&lt;p&gt;现在所需的服务都已经运行了，你可以把 &lt;code&gt;/etc/sysconfig/iptables&lt;/code&gt; 文件中 HTTDP 的防火墙规则改成下面的样子：&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;然后重新加载设置的 IPTables 规则。&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;由于防火墙规则是在防火墙主机上，因此不需要把外部 DNS 入口改成指向新服务器。如果你使用的是内部 DNS 服务器，那么你需要把 IP 地址改成内部 DNS 数据库里的 A 记录。如果你没有用内部 DNS 服务器，那么请确保主机 &lt;code&gt;/etc/hosts&lt;/code&gt; 文件里新服务器地址设置得没有问题。&lt;/p&gt;
&lt;h3 id=&#34;测试和清理&#34;&gt;测试和清理&lt;/h3&gt;
&lt;p&gt;请确保对新配置进行测试。首先，停止旧服务器上的 &lt;code&gt;mysqld&lt;/code&gt; 和 &lt;code&gt;httpd&lt;/code&gt; 服务。然后通过浏览器访问网站。如果一切符合预期，那么你可以关掉旧服务器上的 &lt;code&gt;mysqld&lt;/code&gt; 和 &lt;code&gt;httpd&lt;/code&gt;。如果有失败，你可以把 IPTables 的路由规则改回去到旧服务器上，直到问题解决。&lt;/p&gt;
&lt;p&gt;之后我把 MySQL 和 HTTPD 从旧服务器上删除了，这样来确保它们不会意外地被启动。&lt;/p&gt;
&lt;h3 id=&#34;总结&#34;&gt;总结&lt;/h3&gt;
&lt;p&gt;就是这么简单。不需要执行数据库导出和导入的过程，因为 &lt;code&gt;mysql&lt;/code&gt; 目录下所有需要的东西都已经复制过去了。需要执行导出/导入过程的场景是：有网站自己的数据库之外的数据库；MariaDB 实例上还有其他网站，而你不想把这些网站复制到新服务器上。&lt;/p&gt;
&lt;p&gt;迁移旧服务器上的其他网站也很容易。其他网站依赖的所有数据库都已经随着 MariaDB 的迁移被转移到了新服务器上。你只需要把 &lt;code&gt;/var/website&lt;/code&gt; 目录迁移到新服务器，添加合适的虚拟主机片段，然后重启 HTTPD。&lt;/p&gt;
&lt;p&gt;我遵循这个过程把很多个网站从一个服务器迁移到另一个服务器，每次都没有问题。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;via: &lt;a class=&#34;link&#34; href=&#34;https://opensource.com/article/21/9/migrate-wordpress&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://opensource.com/article/21/9/migrate-wordpress&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a class=&#34;link&#34; href=&#34;#&#34; &gt;David Both&lt;/a&gt;
选题：&lt;a class=&#34;link&#34; href=&#34;#&#34; &gt;lujun9972&lt;/a&gt;
译者：&lt;a class=&#34;link&#34; href=&#34;https://github.com/lxbwolf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Xiaobin.Liu&lt;/a&gt;
校对：&lt;a class=&#34;link&#34; href=&#34;https://github.com/wxy&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;wxy&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;本文由 &lt;a class=&#34;link&#34; href=&#34;https://github.com/LCTT/TranslateProject&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;LCTT&lt;/a&gt; 原创编译，&lt;a class=&#34;link&#34; href=&#34;https://linux.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Linux中国&lt;/a&gt; 荣誉推出&lt;/p&gt;
&lt;p&gt;[a]    &lt;a class=&#34;link&#34; href=&#34;https://opensource.com/users/dboth&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://opensource.com/users/dboth&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[b]    &lt;a class=&#34;link&#34; href=&#34;https://github.com/lujun9972&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/lujun9972&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[1]    &lt;a class=&#34;link&#34; href=&#34;https://opensource.com/sites/default/files/styles/image-full-size/public/lead-images/browser_blue_text_editor_web.png?itok=lcf-m6N7&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://opensource.com/sites/default/files/styles/image-full-size/public/lead-images/browser_blue_text_editor_web.png?itok=lcf-m6N7&lt;/a&gt; Text editor on a browser, in blue&lt;/p&gt;
&lt;p&gt;[2]    &lt;a class=&#34;link&#34; href=&#34;https://wordpress.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://wordpress.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[3]    &lt;a class=&#34;link&#34; href=&#34;https://opensource.com/article/18/2/how-configure-apache-web-server&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://opensource.com/article/18/2/how-configure-apache-web-server&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[4]    &lt;a class=&#34;link&#34; href=&#34;https://mariadb.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mariadb.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[5]    &lt;a class=&#34;link&#34; href=&#34;https://opensource.com/article/16/12/cidr-network-notation-configuration-linux&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://opensource.com/article/16/12/cidr-network-notation-configuration-linux&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[6]    &lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Iptables&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://en.wikipedia.org/wiki/Iptables&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[7]    &lt;a class=&#34;link&#34; href=&#34;http://www.website1.org&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://www.website1.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[8]    mailto:me@website1.org&lt;/p&gt;
&lt;p&gt;[9]    &lt;a class=&#34;link&#34; href=&#34;https://firewalld.org/documentation/howto/open-a-port-or-service.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://firewalld.org/documentation/howto/open-a-port-or-service.html&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>github 博客绑定域名</title>
        <link>https://lxb.wiki/e9fbcad9/</link>
        <pubDate>Fri, 27 Sep 2019 00:54:15 +0000</pubDate>
        
        <guid>https://lxb.wiki/e9fbcad9/</guid>
        <description>&lt;p&gt;某篇文章说, CNAME 解析只支持 www 不支持@
所以@ 只能 解析到一个一个的 IP&lt;/p&gt;
&lt;h4 id=&#34;1-source-添加-cname-文件&#34;&gt;1. source 添加 CNAME 文件&lt;/h4&gt;
&lt;p&gt;在源码的&lt;code&gt;source&lt;/code&gt; 目录下, 添加一个&lt;code&gt;CNAME&lt;/code&gt;文件
文件内容为&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;lxb.wiki
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;2-dns-设置&#34;&gt;2. DNS 设置&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;记录类型&lt;/th&gt;
&lt;th&gt;主机记录&lt;/th&gt;
&lt;th&gt;解析路线(isp)&lt;/th&gt;
&lt;th&gt;记录值&lt;/th&gt;
&lt;th&gt;MX优先级&lt;/th&gt;
&lt;th&gt;TTL&lt;/th&gt;
&lt;th&gt;状态&lt;/th&gt;
&lt;th&gt;操作&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CNAME&lt;/td&gt;
&lt;td&gt;www&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;td&gt;lxbwolf.github.io&lt;/td&gt;
&lt;td&gt;&amp;ndash;&lt;/td&gt;
&lt;td&gt;10 分钟&lt;/td&gt;
&lt;td&gt;正常&lt;/td&gt;
&lt;td&gt;修改暂停删除备注&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;@&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;td&gt;185.199.108.153&lt;/td&gt;
&lt;td&gt;&amp;ndash;&lt;/td&gt;
&lt;td&gt;10 分钟&lt;/td&gt;
&lt;td&gt;正常&lt;/td&gt;
&lt;td&gt;修改暂停删除备注&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;@&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;td&gt;185.199.111.153&lt;/td&gt;
&lt;td&gt;&amp;ndash;&lt;/td&gt;
&lt;td&gt;10 分钟&lt;/td&gt;
&lt;td&gt;正常&lt;/td&gt;
&lt;td&gt;修改暂停删除备注&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;@&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;td&gt;185.199.110.153&lt;/td&gt;
&lt;td&gt;&amp;ndash;&lt;/td&gt;
&lt;td&gt;10 分钟&lt;/td&gt;
&lt;td&gt;正常&lt;/td&gt;
&lt;td&gt;修改暂停删除备注&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;@&lt;/td&gt;
&lt;td&gt;默认&lt;/td&gt;
&lt;td&gt;185.199.109.153&lt;/td&gt;
&lt;td&gt;&amp;ndash;&lt;/td&gt;
&lt;td&gt;10 分钟&lt;/td&gt;
&lt;td&gt;正常&lt;/td&gt;
&lt;td&gt;修改暂停删除备注&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;3-hexo-部署&#34;&gt;3. hexo 部署&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;hexo clean &amp;amp;&amp;amp; hexo g &amp;amp;&amp;amp; hexo d
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>升级到php7.1之后wordpress 网站出现Error establishing a database connection的解决方法</title>
        <link>https://lxb.wiki/b6b408b2/</link>
        <pubDate>Wed, 12 Jun 2019 23:37:00 +0000</pubDate>
        
        <guid>https://lxb.wiki/b6b408b2/</guid>
        <description>&lt;p&gt;现在很多WordPress的插件都推荐将php版本升级到7.0或者7.1以上，于是就折腾了一下把几个blog升级到了7.1.5，升级的过程不难，无非就是额外安装一个php，然后启动自带的配套php-fpm7，然后nginx里location转发到新的php socket文件，这里就不表了。 升级完了，phpinfo()发现一切都正常，但是访问WordPress，却意外提示Error establishing a database connection，但是db的连接信息明明没有问题，经过反复搜索尝试，发现只要将 &lt;code&gt;/usr/share/nginx/html/wp-config.php&lt;/code&gt; 文件里的 &lt;code&gt;define(&#39;DB_HOST&#39;, &#39;localhost&#39;);&lt;/code&gt; 修改为 &lt;code&gt;define(&#39;DB_HOST&#39;, &#39;127.0.0.1&#39;);&lt;/code&gt; 即可解决，猜测原因可能是php7.1中对域的resolve问题 另外, 为了 Debug, 可以把 &lt;code&gt;/usr/share/nginx/html/wp-config.php&lt;/code&gt; 的 debug 改为 true &lt;code&gt;define(&#39;WP_DEBUG&#39;, true);&lt;/code&gt; 改好了, 再改成 false.&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
