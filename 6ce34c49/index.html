<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Go ‰∏≠ÁöÑÂÜÖËÅî‰ºòÂåñ Êú¨ÊñáËÆ®ËÆ∫ Go ÁºñËØëÂô®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂÜÖËÅîÁöÑÔºå‰ª•ÂèäËøôÁßç‰ºòÂåñÊñπÊ≥ïÂ¶Ç‰ΩïÂΩ±Âìç‰Ω†ÁöÑ Go ‰ª£Á†Å„ÄÇ *ËØ∑Ê≥®ÊÑèÔºö*Êú¨ÊñáÈáçÁÇπËÆ®ËÆ∫ gcÔºåËøôÊòØÊù•Ëá™ golang.org ÁöÑ‰∫ãÂÆûÊ†áÂáÜÁöÑ Go Áºñ'>
<title>„ÄêËØë„ÄëInlining Optimisations in Go</title>

<link rel='canonical' href='https://lxb.wiki/6ce34c49/'>

<link rel="stylesheet" href="/scss/style.min.bc5bb6e306c354a2f5d5bfd1e65a5f3996962fb9b4a3546b748aee7daee4f258.css"><meta property='og:title' content='„ÄêËØë„ÄëInlining Optimisations in Go'>
<meta property='og:description' content='Go ‰∏≠ÁöÑÂÜÖËÅî‰ºòÂåñ Êú¨ÊñáËÆ®ËÆ∫ Go ÁºñËØëÂô®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂÜÖËÅîÁöÑÔºå‰ª•ÂèäËøôÁßç‰ºòÂåñÊñπÊ≥ïÂ¶Ç‰ΩïÂΩ±Âìç‰Ω†ÁöÑ Go ‰ª£Á†Å„ÄÇ *ËØ∑Ê≥®ÊÑèÔºö*Êú¨ÊñáÈáçÁÇπËÆ®ËÆ∫ gcÔºåËøôÊòØÊù•Ëá™ golang.org ÁöÑ‰∫ãÂÆûÊ†áÂáÜÁöÑ Go Áºñ'>
<meta property='og:url' content='https://lxb.wiki/6ce34c49/'>
<meta property='og:site_name' content='Xiaobin&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='go' /><meta property='article:tag' content='ÁøªËØë' /><meta property='article:published_time' content='2020-04-29T21:05:10&#43;00:00'/><meta property='article:modified_time' content='2020-04-29T21:05:10&#43;00:00'/>
<meta name="twitter:title" content="„ÄêËØë„ÄëInlining Optimisations in Go">
<meta name="twitter:description" content="Go ‰∏≠ÁöÑÂÜÖËÅî‰ºòÂåñ Êú¨ÊñáËÆ®ËÆ∫ Go ÁºñËØëÂô®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂÜÖËÅîÁöÑÔºå‰ª•ÂèäËøôÁßç‰ºòÂåñÊñπÊ≥ïÂ¶Ç‰ΩïÂΩ±Âìç‰Ω†ÁöÑ Go ‰ª£Á†Å„ÄÇ *ËØ∑Ê≥®ÊÑèÔºö*Êú¨ÊñáÈáçÁÇπËÆ®ËÆ∫ gcÔºåËøôÊòØÊù•Ëá™ golang.org ÁöÑ‰∫ãÂÆûÊ†áÂáÜÁöÑ Go Áºñ">
<link rel="shortcut icon" href="/favicon.png" />

<script data-ad-client="ca-pub-5708899526501350" async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-JZ2PWLT6JY"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-JZ2PWLT6JY');
</script>
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?e710560ffa44cae2b3a6259e0171fb5f";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu692828361b78eaa42fdbdbbf5a7177a9_44446_300x0_resize_q75_box.jpeg" width="300"
                            height="298" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Xiaobin&#39;s Blog</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header>


    <ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                <span>È¶ñÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/categories/' >
                
                
                
                <span>ÂàÜÁ±ª</span>
            </a>
        </li>
        
        
        <li >
            <a href='/tags/' >
                
                
                
                <span>Ê†áÁ≠æ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                <span>ÂèãÈìæ</span>
            </a>
        </li>
        

        <div class="menu-bottom-section"><ol class="social-menu">
                    
                        <li>
                            <a 
                                href='mailto://me@liuxb.email'
                                target="_blank"
                                title="Email"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                                
                            </a>
                        </li>
                    
                        <li>
                            <a 
                                href='https://github.com/lxbwolf'
                                target="_blank"
                                title="GitHub"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                                
                            </a>
                        </li>
                    
                        <li>
                            <a 
                                href='https://lxb.wiki/atom.xml'
                                target="_blank"
                                title="Rss"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                                
                            </a>
                        </li>
                    
                </ol>
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
<section class="widget archives">
    
    <h2 class="widget-title section-title">ÁõÆÂΩï</h2>

    <div class="widget--toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ÂÜÖËÅîÊòØ‰ªÄ‰πà">ÂÜÖËÅîÊòØ‰ªÄ‰πàÔºü</a></li>
        <li><a href="#‰∏∫‰ªÄ‰πàÂÜÖËÅîÂæàÈáçË¶Å">‰∏∫‰ªÄ‰πàÂÜÖËÅîÂæàÈáçË¶ÅÔºü</a></li>
        <li><a href="#ÂÆûË∑µ‰∏≠ÁöÑÂÜÖËÅî">ÂÆûË∑µ‰∏≠ÁöÑÂÜÖËÅî</a></li>
        <li><a href="#ÂÜÖËÅîÁöÑÈôêÂà∂">ÂÜÖËÅîÁöÑÈôêÂà∂</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
        <a href="/categories/Lang/" >
            Lang
        </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/6ce34c49/">„ÄêËØë„ÄëInlining Optimisations in Go</a>
        </h2>

        
    </div>

    
    
    
    
    <footer class="article-time">
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
            <time class="article-time--published">Apr 29, 2020</time>
        </div>
        

        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



            <time class="article-time--reading">
                ÈòÖËØªÊó∂Èïø: 7 ÂàÜÈíü
            </time>
        </div>
        
        <small>
    <section class="article-tags">
        
            <a href="/tags/go/">go</a>
        
            <a href="/tags/%E7%BF%BB%E8%AF%91/">ÁøªËØë</a>
        
    </section>
</small>
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <h1 id="go-‰∏≠ÁöÑÂÜÖËÅî‰ºòÂåñ">Go ‰∏≠ÁöÑÂÜÖËÅî‰ºòÂåñ</h1>
<blockquote>
<p>Êú¨ÊñáËÆ®ËÆ∫ Go ÁºñËØëÂô®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂÜÖËÅîÁöÑÔºå‰ª•ÂèäËøôÁßç‰ºòÂåñÊñπÊ≥ïÂ¶Ç‰ΩïÂΩ±Âìç‰Ω†ÁöÑ Go ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<p>*ËØ∑Ê≥®ÊÑèÔºö*Êú¨ÊñáÈáçÁÇπËÆ®ËÆ∫ <em>gc</em>ÔºåËøôÊòØÊù•Ëá™ <a class="link" href="https://github.com/golang/go"  target="_blank" rel="noopener"
    >golang.org</a> ÁöÑ‰∫ãÂÆûÊ†áÂáÜÁöÑ Go ÁºñËØëÂô®„ÄÇËÆ®ËÆ∫Âà∞ÁöÑÊ¶ÇÂøµÂèØ‰ª•ÂπøÊ≥õÈÄÇÁî®‰∫éÂÖ∂ÂÆÉ Go ÁºñËØëÂô®ÔºåÂ¶Ç gccgo Âíå llgoÔºå‰ΩÜÂÆÉ‰ª¨Âú®ÂÆûÁé∞ÊñπÂºèÂíåÂäüÊïà‰∏äÂèØËÉΩÊúâÊâÄÂ∑ÆÂºÇ„ÄÇ</p>
<h3 id="ÂÜÖËÅîÊòØ‰ªÄ‰πà">ÂÜÖËÅîÊòØ‰ªÄ‰πàÔºü</h3>
<p><!-- raw HTML omitted -->ÂÜÖËÅî<!-- raw HTML omitted -->inlining<!-- raw HTML omitted --><!-- raw HTML omitted -->Â∞±ÊòØÊääÁÆÄÁü≠ÁöÑÂáΩÊï∞Âú®Ë∞ÉÁî®ÂÆÉÁöÑÂú∞ÊñπÂ±ïÂºÄ„ÄÇÂú®ËÆ°ÁÆóÊú∫ÂèëÂ±ïÂéÜÁ®ãÁöÑÊó©ÊúüÔºåËøô‰∏™‰ºòÂåñÊòØÁî±Á®ãÂ∫èÂëòÊâãÂä®ÂÆûÁé∞ÁöÑ„ÄÇÁé∞Âú®ÔºåÂÜÖËÅîÂ∑≤ÁªèÊàê‰∏∫ÁºñËØëËøáÁ®ã‰∏≠Ëá™Âä®ÂÆûÁé∞ÁöÑÂü∫Êú¨‰ºòÂåñËøáÁ®ãÁöÑÂÖ∂‰∏≠‰∏ÄÊ≠•„ÄÇ</p>
<h3 id="‰∏∫‰ªÄ‰πàÂÜÖËÅîÂæàÈáçË¶Å">‰∏∫‰ªÄ‰πàÂÜÖËÅîÂæàÈáçË¶ÅÔºü</h3>
<p>Êúâ‰∏§‰∏™ÂéüÂõ†„ÄÇÁ¨¨‰∏Ä‰∏™ÊòØÂÆÉÊ∂àÈô§‰∫ÜÂáΩÊï∞Ë∞ÉÁî®Êú¨Ë∫´ÁöÑÂºÄÈîÄ„ÄÇÁ¨¨‰∫å‰∏™ÊòØÂÆÉ‰ΩøÂæóÁºñËØëÂô®ËÉΩÊõ¥È´òÊïàÂú∞ÊâßË°åÂÖ∂‰ªñÁöÑ‰ºòÂåñÁ≠ñÁï•„ÄÇ</p>
<h4 id="ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÂºÄÈîÄ">ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÂºÄÈîÄ</h4>
<p>Âú®‰ªª‰ΩïËØ≠Ë®Ä‰∏≠ÔºåË∞ÉÁî®‰∏Ä‰∏™ÂáΩÊï∞ <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> ÈÉΩ‰ºöÊúâÊ∂àËÄó„ÄÇÊääÂèÇÊï∞ÁºñÁªÑËøõÂØÑÂ≠òÂô®ÊàñÊîæÂÖ•Ê†à‰∏≠ÔºàÂèñÂÜ≥‰∫é ABIÔºâÔºåÂú®ËøîÂõûÁªìÊûúÊó∂ÁöÑÈÄÜÂèçËøáÁ®ãÈÉΩ‰ºöÊúâÂºÄÈîÄ„ÄÇÂºïÂÖ•‰∏ÄÊ¨°ÂáΩÊï∞Ë∞ÉÁî®‰ºöÂØºËá¥Á®ãÂ∫èËÆ°Êï∞Âô®‰ªéÊåá‰ª§ÊµÅÁöÑ‰∏ÄÁÇπË∑≥Âà∞Âè¶‰∏ÄÁÇπÔºåËøôÂèØËÉΩÂØºËá¥ÁÆ°ÈÅìÊªûÂêé„ÄÇÂáΩÊï∞ÂÜÖÈÉ®ÈÄöÂ∏∏Êúâ<!-- raw HTML omitted -->ÂâçÁΩÆÂ§ÑÁêÜ<!-- raw HTML omitted -->preamble<!-- raw HTML omitted --><!-- raw HTML omitted -->ÔºåÈúÄË¶Å‰∏∫ÂáΩÊï∞ÊâßË°åÂáÜÂ§áÊñ∞ÁöÑÊ†àÂ∏ßÔºåËøòÊúâ‰∏éÂâçÁΩÆÁõ∏‰ººÁöÑ<!-- raw HTML omitted -->ÂêéÁª≠Â§ÑÁêÜ<!-- raw HTML omitted -->epilogue<!-- raw HTML omitted --><!-- raw HTML omitted -->ÔºåÈúÄË¶ÅÂú®ËøîÂõûÁªôË∞ÉÁî®Êñπ‰πãÂâçÈáäÊîæÊ†àÂ∏ßÁ©∫Èó¥„ÄÇ</p>
<p>Âú® Go ‰∏≠ÂáΩÊï∞Ë∞ÉÁî®‰ºöÊ∂àËÄóÈ¢ùÂ§ñÁöÑËµÑÊ∫êÊù•ÊîØÊåÅÊ†àÁöÑÂä®ÊÄÅÂ¢ûÈïø„ÄÇÂú®ËøõÂÖ•ÂáΩÊï∞Êó∂Ôºågoroutine ÂèØÁî®ÁöÑÊ†àÁ©∫Èó¥‰∏éÂáΩÊï∞ÈúÄË¶ÅÁöÑÁ©∫Èó¥Â§ßÂ∞èËøõË°åÊØîËæÉ„ÄÇÂ¶ÇÊûúÂèØÁî®Á©∫Èó¥‰∏çÂêåÔºåÂâçÁΩÆÂ§ÑÁêÜÂ∞±‰ºöË∑≥Âà∞<!-- raw HTML omitted -->ËøêË°åÊó∂<!-- raw HTML omitted -->runtime<!-- raw HTML omitted --><!-- raw HTML omitted -->ÁöÑÈÄªËæë‰∏≠ÔºåÈÄöËøáÊääÊï∞ÊçÆÂ§çÂà∂Âà∞‰∏ÄÂùóÊñ∞ÁöÑ„ÄÅÊõ¥Â§ßÁöÑÁ©∫Èó¥ÁöÑÊù•Â¢ûÈïøÊ†àÁ©∫Èó¥„ÄÇÂΩìËøô‰∏™Â§çÂà∂ÂÆåÊàêÂêéÔºåËøêË°åÊó∂Â∞±‰ºöË∑≥ÂõûÂà∞ÂéüÊù•ÁöÑÂáΩÊï∞ÂÖ•Âè£ÔºåÂÜçÊâßË°åÊ†àÁ©∫Èó¥Ê£ÄÊü•ÔºåÁé∞Âú®ÈÄöËøá‰∫ÜÊ£ÄÊü•ÔºåÂáΩÊï∞Ë∞ÉÁî®ÁªßÁª≠ÊâßË°å„ÄÇËøôÁßçÊñπÂºè‰∏ãÔºågoroutine ÂºÄÂßãÊó∂ÂèØ‰ª•Áî≥ËØ∑ÂæàÂ∞èÁöÑÊ†àÁ©∫Èó¥ÔºåÂú®ÊúâÈúÄË¶ÅÊó∂ÂÜçÁî≥ËØ∑Êõ¥Â§ßÁöÑÁ©∫Èó¥„ÄÇ<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<p>Ëøô‰∏™Ê£ÄÊü•Ê∂àËÄóÂæàÂ∞èÔºåÂè™ÊúâÂá†‰∏™Êåá‰ª§ÔºåËÄå‰∏îÁî±‰∫é goroutine ÁöÑÊ†àÊòØÊàêÂá†‰ΩïÁ∫ßÊï∞Â¢ûÈïøÁöÑÔºåÂõ†Ê≠§Ëøô‰∏™Ê£ÄÊü•ÂæàÂ∞ëÂ§±Ë¥•„ÄÇËøôÊ†∑ÔºåÁé∞‰ª£Â§ÑÁêÜÂô®ÁöÑÂàÜÊîØÈ¢ÑÊµãÂçïÂÖÉÂèØ‰ª•ÈÄöËøáÂÅáÂÆöÊ£ÄÊü•ËÇØÂÆö‰ºöÊàêÂäüÊù•ÈöêËóèÊ†àÁ©∫Èó¥Ê£ÄÊü•ÁöÑÊ∂àËÄó„ÄÇÂΩìÂ§ÑÁêÜÂô®È¢ÑÊµãÈîô‰∫ÜÊ†àÁ©∫Èó¥Ê£ÄÊü•Ôºå‰∏çÂæó‰∏çÊîæÂºÉÂÆÉÂú®Êé®ÊµãÊÄßÊâßË°åÊâÄÂÅöÁöÑÊìç‰ΩúÊó∂Ôºå‰∏é‰∏∫‰∫ÜÂ¢ûÂä† goroutine ÁöÑÊ†àÁ©∫Èó¥ËøêË°åÊó∂ÊâÄÈúÄÁöÑÊìç‰ΩúÊ∂àËÄóÁöÑËµÑÊ∫êÁõ∏ÊØîÔºåÁÆ°ÈÅìÊªûÂêéÁöÑ‰ª£‰ª∑Êõ¥Â∞è„ÄÇ</p>
<p>ËôΩÁÑ∂Áé∞‰ª£Â§ÑÁêÜÂô®ÂèØ‰ª•Áî®È¢ÑÊµãÊÄßÊâßË°åÊäÄÊúØ‰ºòÂåñÊØèÊ¨°ÂáΩÊï∞Ë∞ÉÁî®‰∏≠ÁöÑÊ≥õÂûãÂíå Go ÁâπÂÆöÁöÑÂÖÉÁ¥†ÁöÑÂºÄÈîÄÔºå‰ΩÜÈÇ£‰∫õÂºÄÈîÄ‰∏çËÉΩË¢´ÂÆåÂÖ®Ê∂àÈô§ÔºåÂõ†Ê≠§Âú®ÊØèÊ¨°ÂáΩÊï∞Ë∞ÉÁî®ÊâßË°åÂøÖË¶ÅÁöÑÂ∑•‰ΩúËøáÁ®ã‰∏≠ÈÉΩ‰ºöÊúâÊÄßËÉΩÊ∂àËÄó„ÄÇ‰∏ÄÊ¨°ÂáΩÊï∞Ë∞ÉÁî®Êú¨Ë∫´ÁöÑÂºÄÈîÄÊòØÂõ∫ÂÆöÁöÑÔºå‰∏éÊõ¥Â§ßÁöÑÂáΩÊï∞Áõ∏ÊØîÔºåË∞ÉÁî®Â∞èÂáΩÊï∞ÁöÑ‰ª£‰ª∑Êõ¥Â§ßÔºåÂõ†‰∏∫Âú®ÊØèÊ¨°Ë∞ÉÁî®ËøáÁ®ã‰∏≠ÂÆÉ‰ª¨ÂÅöÁöÑÊúâÁî®ÁöÑÂ∑•‰ΩúÊõ¥Â∞ë„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÊ∂àÈô§Ëøô‰∫õÂºÄÈîÄÁöÑÊñπÊ≥ïÂøÖÈ°ªÊòØË¶ÅÊ∂àÈô§ÂáΩÊï∞Ë∞ÉÁî®Êú¨Ë∫´ÔºåGo ÁöÑÁºñËØëÂô®Â∞±ÊòØËøô‰πàÂÅöÁöÑÔºåÂú®Êüê‰∫õÊù°‰ª∂‰∏ãÈÄöËøáÁî®ÂáΩÊï∞ÁöÑÂÜÖÂÆπÊù•ÊõøÊç¢ÂáΩÊï∞Ë∞ÉÁî®Êù•ÂÆûÁé∞„ÄÇËøô‰∏™ËøáÁ®ãË¢´Áß∞‰∏∫<em>ÂÜÖËÅî</em>ÔºåÂõ†‰∏∫ÂÆÉÂú®ÂáΩÊï∞Ë∞ÉÁî®Â§ÑÊääÂáΩÊï∞‰ΩìÂ±ïÂºÄ‰∫Ü„ÄÇ</p>
<h4 id="ÊîπËøõÁöÑ‰ºòÂåñÊú∫‰ºö">ÊîπËøõÁöÑ‰ºòÂåñÊú∫‰ºö</h4>
<p>Cliff Click ÂçöÂ£´ÊääÂÜÖËÅîÊèèËø∞‰∏∫Áé∞‰ª£ÁºñËØëÂô®ÂÅöÁöÑ‰ºòÂåñÊé™ÊñΩÔºåÂÉèÂ∏∏Èáè‰º†Êí≠ÔºàLCTT ËØëÊ≥®ÔºöÊ≠§Â§Ñ‰ΩúËÄÖÁ¨îËØØÔºåÂéüÊñá‰∏∫ constant proportionÔºå‰øÆÊ≠£‰∏∫ constant propagationÔºâÂíåÊ≠ª‰ª£Á†ÅÊ∂àÈô§‰∏ÄÊ†∑ÔºåÈÉΩÊòØÁºñËØëÂô®ÁöÑÂü∫Êú¨‰ºòÂåñÊñπÊ≥ï„ÄÇÂÆûÈôÖ‰∏äÔºåÂÜÖËÅîÂèØ‰ª•ËÆ©ÁºñËØëÂô®ÁúãÂæóÊõ¥Ê∑±Ôºå‰ΩøÁºñËØëÂô®ÂèØ‰ª•ËßÇÂØüË∞ÉÁî®ÁöÑÁâπÂÆöÂáΩÊï∞ÁöÑ‰∏ä‰∏ãÊñáÂÜÖÂÆπÔºåÂèØ‰ª•ÁúãÂà∞ËÉΩÁªßÁª≠ÁÆÄÂåñÊàñÂΩªÂ∫ïÊ∂àÈô§ÁöÑÈÄªËæë„ÄÇÁî±‰∫éÂèØ‰ª•ÈÄíÂΩíÂú∞ÊâßË°åÂÜÖËÅîÔºåÂõ†Ê≠§‰∏ç‰ªÖÂèØ‰ª•Âú®ÊØè‰∏™Áã¨Á´ãÁöÑÂáΩÊï∞‰∏ä‰∏ãÊñáÂ§ÑËøõË°åËøôÁßç‰ºòÂåñÂÜ≥Á≠ñÔºå‰πüÂèØ‰ª•Âú®Êï¥‰∏™ÂáΩÊï∞Ë∞ÉÁî®Èìæ‰∏≠ËøõË°å„ÄÇ</p>
<h3 id="ÂÆûË∑µ‰∏≠ÁöÑÂÜÖËÅî">ÂÆûË∑µ‰∏≠ÁöÑÂÜÖËÅî</h3>
<p>‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÂèØ‰ª•ÊºîÁ§∫ÂÜÖËÅîÁöÑÂΩ±ÂìçÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;testing&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//go:noinline
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">a</span> &gt; <span style="color:#a6e22e">b</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">b</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Result</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">BenchmarkMax</span>(<span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">N</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">r</span> = <span style="color:#a6e22e">max</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">i</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Result</span> = <span style="color:#a6e22e">r</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ËøêË°åËøô‰∏™Âü∫ÂáÜÔºå‰ºöÂæóÂà∞Â¶Ç‰∏ãÁªìÊûúÔºö<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>% go test -bench<span style="color:#f92672">=</span>. 
</span></span><span style="display:flex;"><span>BenchmarkMax-4   <span style="color:#ae81ff">530687617</span>         2.24 ns/op
</span></span></code></pre></div><p>Âú®ÊàëÁöÑ 2015 MacBook Air ‰∏ä <code>max(-1, i)</code> ÁöÑËÄóÊó∂Á∫¶‰∏∫ 2.24 Á∫≥Áßí„ÄÇÁé∞Âú®ÂéªÊéâ <code>//go:noinline</code> ÁºñËØëÊåá‰ª§ÔºåÂÜçÁúã‰∏ãÁªìÊûúÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>% go test -bench<span style="color:#f92672">=</span>. 
</span></span><span style="display:flex;"><span>BenchmarkMax-4   <span style="color:#ae81ff">1000000000</span>         0.514 ns/op
</span></span></code></pre></div><p>‰ªé 2.24 Á∫≥ÁßíÈôçÂà∞‰∫Ü 0.51 Á∫≥ÁßíÔºåÊàñËÄÖ‰ªé <code>benchstat</code> ÁöÑÁªìÊûúÂèØ‰ª•ÁúãÂá∫ÔºåÊúâ 78% ÁöÑÊèêÂçá„ÄÇ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>% benchstat <span style="color:#f92672">{</span>old,new<span style="color:#f92672">}</span>.txt
</span></span><span style="display:flex;"><span>name   old time/op  new time/op  delta
</span></span><span style="display:flex;"><span>Max-4  2.21ns ¬± 1%  0.49ns ¬± 6%  -77.96%  <span style="color:#f92672">(</span>p<span style="color:#f92672">=</span>0.000 n<span style="color:#f92672">=</span>18+19<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Ëøô‰∏™ÊèêÂçáÊòØ‰ªéÂì™ÂÑøÊù•ÁöÑÂë¢Ôºü</p>
<p>È¶ñÂÖàÔºåÁßªÈô§ÊéâÂáΩÊï∞Ë∞ÉÁî®‰ª•Âèä‰∏é‰πãÂÖ≥ËÅîÁöÑÂâçÁΩÆÂ§ÑÁêÜ <sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup> ÊòØ‰∏ªË¶ÅÂõ†Á¥†„ÄÇÊää <code>max</code> ÂáΩÊï∞ÁöÑÂáΩÊï∞‰ΩìÂú®Ë∞ÉÁî®Â§ÑÂ±ïÂºÄÔºåÂáèÂ∞ë‰∫ÜÂ§ÑÁêÜÂô®ÊâßË°åÁöÑÊåá‰ª§Êï∞ÈáèÂπ∂‰∏îÊ∂àÈô§‰∫Ü‰∏Ä‰∫õÂàÜÊîØ„ÄÇ</p>
<p>Áé∞Âú®Áî±‰∫éÁºñËØëÂô®‰ºòÂåñ‰∫Ü <code>BenchmarkMax</code>ÔºåÂõ†Ê≠§ÂÆÉÂèØ‰ª•ÁúãÂà∞ <code>max</code> ÂáΩÊï∞ÁöÑÂÜÖÂÆπÔºåËøõËÄåÂèØ‰ª•ÂÅöÊõ¥Â§öÁöÑÊèêÂçá„ÄÇÂΩì <code>max</code> Ë¢´ÂÜÖËÅîÂêéÔºå<code>BenchmarkMax</code> ÂëàÁé∞ÁªôÁºñËØëÂô®ÁöÑÊ†∑Â≠êÔºåÁúãËµ∑Êù•ÊòØËøôÊ†∑ÁöÑÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">BenchmarkMax</span>(<span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">N</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> &gt; <span style="color:#a6e22e">i</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">r</span> = <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">r</span> = <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Result</span> = <span style="color:#a6e22e">r</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ÂÜçËøêË°å‰∏ÄÊ¨°Âü∫ÂáÜÔºåÊàë‰ª¨Áúã‰∏Ä‰∏ãÊâãÂä®ÂÜÖËÅîÁöÑÁâàÊú¨ÂíåÁºñËØëÂô®ÂÜÖËÅîÁöÑÁâàÊú¨ÁöÑË°®Áé∞Ôºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>% benchstat <span style="color:#f92672">{</span>old,new<span style="color:#f92672">}</span>.txt
</span></span><span style="display:flex;"><span>name   old time/op  new time/op  delta
</span></span><span style="display:flex;"><span>Max-4  2.21ns ¬± 1%  0.48ns ¬± 3%  -78.14%  <span style="color:#f92672">(</span>p<span style="color:#f92672">=</span>0.000 n<span style="color:#f92672">=</span>18+18<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Áé∞Âú®ÁºñËØëÂô®ËÉΩÁúãÂà∞Âú® <code>BenchmarkMax</code> ÈáåÂÜÖËÅî <code>max</code> ÁöÑÁªìÊûúÔºåÂèØ‰ª•ÊâßË°å‰ª•Ââç‰∏çËÉΩÊâßË°åÁöÑ‰ºòÂåñÊé™ÊñΩ„ÄÇ‰æãÂ¶ÇÔºåÁºñËØëÂô®Ê≥®ÊÑèÂà∞ <code>i</code> ÂàùÂßãÂÄº‰∏∫ <code>0</code>Ôºå‰ªÖÂÅöËá™Â¢ûÊìç‰ΩúÔºåÂõ†Ê≠§ÊâÄÊúâ‰∏é <code>i</code> ÁöÑÊØîËæÉÈÉΩÂèØ‰ª•ÂÅáÂÆö <code>i</code> ‰∏çÊòØË¥üÂÄº„ÄÇËøôÊ†∑Êù°‰ª∂Ë°®ËææÂºè <code>-1 &gt; i</code> Ê∞∏Ëøú‰∏çÊòØ <code>true</code>„ÄÇ<sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup></p>
<p>ËØÅÊòé‰∫Ü <code>-1 &gt; i</code> Ê∞∏Ëøú‰∏ç‰∏∫ true ÂêéÔºåÁºñËØëÂô®ÂèØ‰ª•Êää‰ª£Á†ÅÁÆÄÂåñ‰∏∫Ôºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">BenchmarkMax</span>(<span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">N</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">false</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">r</span> = <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">r</span> = <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Result</span> = <span style="color:#a6e22e">r</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Âπ∂‰∏îÂõ†‰∏∫ÂàÜÊîØÈáåÊòØ‰∏™Â∏∏ÈáèÔºåÁºñËØëÂô®ÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑÊñπÂºèÁßªÈô§‰∏ç‰ºöËµ∞Âà∞ÁöÑÂàÜÊîØÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">BenchmarkMax</span>(<span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">N</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">r</span> = <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Result</span> = <span style="color:#a6e22e">r</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ËøôÊ†∑ÔºåÈÄöËøáÂÜÖËÅîÂíåÁî±ÂÜÖËÅîËß£ÈîÅÁöÑ‰ºòÂåñËøáÁ®ãÔºåÁºñËØëÂô®ÊääË°®ËææÂºè <code>r = max(-1, i))</code> ÁÆÄÂåñ‰∏∫ <code>r = i</code>„ÄÇ</p>
<h3 id="ÂÜÖËÅîÁöÑÈôêÂà∂">ÂÜÖËÅîÁöÑÈôêÂà∂</h3>
<p>Êú¨Êñá‰∏≠ÊàëËÆ∫Ëø∞ÁöÑÂÜÖËÅîÁß∞‰Ωú<!-- raw HTML omitted -->Âè∂Â≠êÂÜÖËÅî<!-- raw HTML omitted -->leaf inlining<!-- raw HTML omitted --><!-- raw HTML omitted -->ÔºöÊääÂáΩÊï∞Ë∞ÉÁî®Ê†à‰∏≠ÊúÄÂ∫ïÂ±ÇÁöÑÂáΩÊï∞Âú®Ë∞ÉÁî®ÂÆÉÁöÑÂáΩÊï∞Â§ÑÂ±ïÂºÄÁöÑË°å‰∏∫„ÄÇÂÜÖËÅîÊòØ‰∏™ÈÄíÂΩíÁöÑËøáÁ®ãÔºåÂΩìÊääÂáΩÊï∞ÂÜÖËÅîÂà∞Ë∞ÉÁî®ÂÆÉÁöÑÂáΩÊï∞ A Â§ÑÂêéÔºåÁºñËØëÂô®‰ºöÊääÂÜÖËÅîÂêéÁöÑÁªìÊûú‰ª£Á†ÅÂÜçÂÜÖËÅîÂà∞ A ÁöÑË∞ÉÁî®ÊñπÔºåËøôÊ†∑ÊåÅÁª≠ÂÜÖËÅî‰∏ãÂéª„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">BenchmarkMaxMaxMax</span>(<span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">N</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">r</span> = <span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">max</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">i</span>), <span style="color:#a6e22e">max</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">i</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Result</span> = <span style="color:#a6e22e">r</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>‰∏é‰πãÂâçÁöÑ‰æãÂ≠ê‰∏≠ÁöÑ‰ª£Á†ÅËøêË°åÈÄüÂ∫¶‰∏ÄÊ†∑Âø´ÔºåÂõ†‰∏∫ÁºñËØëÂô®ÂèØ‰ª•ÂØπ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÈáçÂ§çÂú∞ËøõË°åÂÜÖËÅîÔºå‰πüÊää‰ª£Á†ÅÁÆÄÂåñÂà∞ <code>r = i</code> Ë°®ËææÂºè„ÄÇ</p>
<p>‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ºöËÆ∫Ëø∞ÂΩì Go ÁºñËØëÂô®ÊÉ≥Ë¶ÅÂÜÖËÅîÂáΩÊï∞Ë∞ÉÁî®Ê†à‰∏≠Èó¥ÁöÑÊüê‰∏™ÂáΩÊï∞Êó∂ÈÄâÁî®ÁöÑÂè¶‰∏ÄÁßçÂÜÖËÅîÁ≠ñÁï•„ÄÇÊúÄÂêéÊàë‰ºöËÆ∫Ëø∞ÁºñËØëÂô®‰∏∫‰∫ÜÂÜÖËÅî‰ª£Á†ÅÂáÜÂ§áÂ•ΩË¶ÅËææÂà∞ÁöÑÊûÅÈôêÔºåËøô‰∏™ÊûÅÈôê Go Áé∞Âú®ÁöÑËÉΩÂäõËøòËææ‰∏çÂà∞„ÄÇ</p>
<h4 id="Áõ∏ÂÖ≥ÊñáÁ´†">Áõ∏ÂÖ≥ÊñáÁ´†Ôºö</h4>
<ol>
<li><a class="link" href="https://dave.cheney.net/2014/06/07/five-things-that-make-go-fast"  target="_blank" rel="noopener"
    >‰Ωø Go ÂèòÂø´ÁöÑ 5 ‰ª∂‰∫ã</a></li>
<li><a class="link" href="https://dave.cheney.net/2013/06/02/why-is-a-goroutines-stack-infinite"  target="_blank" rel="noopener"
    >‰∏∫‰ªÄ‰πà Goroutine ÁöÑÊ†àÁ©∫Èó¥‰ºöÊó†ÈôêÂ¢ûÈïøÔºü</a></li>
<li><a class="link" href="https://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go"  target="_blank" rel="noopener"
    >Go ‰∏≠ÊÄé‰πàÂÜôÂü∫ÂáÜÊµãËØï</a></li>
<li><a class="link" href="https://dave.cheney.net/2018/01/08/gos-hidden-pragmas"  target="_blank" rel="noopener"
    >Go ‰∏≠ÈöêËóèÁöÑÁºñËØëÊåá‰ª§</a></li>
</ol>
<hr>
<p>via: <a class="link" href="https://dave.cheney.net/2020/04/25/inlining-optimisations-in-go"  target="_blank" rel="noopener"
    >https://dave.cheney.net/2020/04/25/inlining-optimisations-in-go</a></p>
<p>‰ΩúËÄÖÔºö<a class="link" href="https://dave.cheney.net/author/davecheney"  target="_blank" rel="noopener"
    >Dave Cheney</a>
ÈÄâÈ¢òÔºö<a class="link" href="https://github.com/lujun9972"  target="_blank" rel="noopener"
    >lujun9972</a>
ËØëËÄÖÔºö<a class="link" href="https://github.com/lxbwolf"  target="_blank" rel="noopener"
    >Xiaobin.Liu</a>
Ê†°ÂØπÔºö<a class="link" href="https://github.com/wxy"  target="_blank" rel="noopener"
    >wxy</a></p>
<p>Êú¨ÊñáÁî± <a class="link" href="https://github.com/LCTT/TranslateProject"  target="_blank" rel="noopener"
    >LCTT</a> ÂéüÂàõÁºñËØëÔºå<a class="link" href="https://linux.cn/"  target="_blank" rel="noopener"
    >Linux‰∏≠ÂõΩ</a> Ëç£Ë™âÊé®Âá∫</p>
<p>[3]: tmp.gBQ2tEtMHc#easy-footnote-bottom-2-4053 &ldquo;Up until Go 1.14 the stack check preamble was also used by the garbage collector to stop the world by setting all active goroutine‚Äôs stacks to zero, forcing them to trap into the runtime the next time they made a function call. This system was <!-- raw HTML omitted -->recently replaced<!-- raw HTML omitted --> with a mechanism which allowed the runtime to pause an goroutine without waiting for it to make a function call.&rdquo;
[4]: tmp.gBQ2tEtMHc#easy-footnote-bottom-3-4053 &ldquo;I‚Äôm using the <!-- raw HTML omitted -->//go:noinline<!-- raw HTML omitted --> pragma to prevent the compiler from inlining <!-- raw HTML omitted -->max<!-- raw HTML omitted -->. This is because I want to isolate the effects of inlining on <!-- raw HTML omitted -->max<!-- raw HTML omitted --> rather than disabling optimisations globally with <!-- raw HTML omitted -->-gcflags=&rsquo;-l -N&rsquo;<!-- raw HTML omitted -->. I go into detail about the <!-- raw HTML omitted -->//go:<!-- raw HTML omitted --> comments in <!-- raw HTML omitted -->this presentation<!-- raw HTML omitted -->.&rdquo;
[5]: tmp.gBQ2tEtMHc#easy-footnote-bottom-4-4053 &ldquo;You can check this for yourself by comparing the output of <!-- raw HTML omitted -->go test -bench=. -gcflags=-S<!-- raw HTML omitted --> with and without the <!-- raw HTML omitted -->//go:noinline<!-- raw HTML omitted --> annotation.&rdquo;
[6]: tmp.gBQ2tEtMHc#easy-footnote-bottom-5-4053 &ldquo;You can check this yourself with the <!-- raw HTML omitted -->-gcflags=-d=ssa/prove/debug=on<!-- raw HTML omitted --> flag.&rdquo;
[7]: tmp.gBQ2tEtMHc#easy-footnote-1-4053
[8]: <a class="link" href="https://github.com/golang/proposal/blob/master/design/24543-non-cooperative-preemption.md"  target="_blank" rel="noopener"
    >https://github.com/golang/proposal/blob/master/design/24543-non-cooperative-preemption.md</a>
[9]: tmp.gBQ2tEtMHc#easy-footnote-2-4053
[10]: <a class="link" href="https://dave.cheney.net/2018/01/08/gos-hidden-pragmas"  target="_blank" rel="noopener"
    >https://dave.cheney.net/2018/01/08/gos-hidden-pragmas</a>
[11]: tmp.gBQ2tEtMHc#easy-footnote-3-4053
[12]: tmp.gBQ2tEtMHc#easy-footnote-4-4053
[13]: tmp.gBQ2tEtMHc#easy-footnote-5-4053
[14]: <a class="link" href="https://dave.cheney.net/2014/06/07/five-things-that-make-go-fast"  target="_blank" rel="noopener"
    >https://dave.cheney.net/2014/06/07/five-things-that-make-go-fast</a> &ldquo;Five things that make Go fast&rdquo;
[15]: <a class="link" href="https://dave.cheney.net/2013/06/02/why-is-a-goroutines-stack-infinite"  target="_blank" rel="noopener"
    >https://dave.cheney.net/2013/06/02/why-is-a-goroutines-stack-infinite</a> &ldquo;Why is a Goroutine‚Äôs stack infinite ?&rdquo;
[16]: <a class="link" href="https://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go"  target="_blank" rel="noopener"
    >https://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go</a> &ldquo;How to write benchmarks in Go&rdquo;
[17]: <a class="link" href="https://dave.cheney.net/2018/01/08/gos-hidden-pragmas"  target="_blank" rel="noopener"
    >https://dave.cheney.net/2018/01/08/gos-hidden-pragmas</a> &ldquo;Go‚Äôs hidden #pragmas&rdquo;</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Âú® Go ‰∏≠Ôºå‰∏Ä‰∏™ÊñπÊ≥ïÂ∞±ÊòØ‰∏Ä‰∏™ÊúâÈ¢ÑÂÖàÂÆö‰πâÁöÑÂΩ¢ÂèÇÂíåÊé•ÂèóËÄÖÁöÑÂáΩÊï∞„ÄÇÂÅáËÆæËøô‰∏™ÊñπÊ≥ï‰∏çÊòØÈÄöËøáÊé•Âè£Ë∞ÉÁî®ÁöÑÔºåË∞ÉÁî®‰∏Ä‰∏™Êó†Ê∂àËÄóÁöÑÂáΩÊï∞ÊâÄÊ∂àËÄóÁöÑ‰ª£‰ª∑‰∏éÂºïÂÖ•‰∏Ä‰∏™ÊñπÊ≥ïÊòØÁõ∏ÂêåÁöÑ„ÄÇ&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>Âú® Go 1.14 ‰ª•ÂâçÔºåÊ†àÊ£ÄÊü•ÁöÑÂâçÁΩÆÂ§ÑÁêÜ‰πüË¢´ÂûÉÂúæÂõûÊî∂Âô®Áî®‰∫é STWÔºåÈÄöËøáÊääÊâÄÊúâÊ¥ªË∑ÉÁöÑ goroutine Ê†àÁ©∫Èó¥ËÆæ‰∏∫ 0ÔºåÊù•Âº∫Âà∂ÂÆÉ‰ª¨ÂàáÊç¢‰∏∫‰∏ã‰∏ÄÊ¨°ÂáΩÊï∞Ë∞ÉÁî®Êó∂ÁöÑËøêË°åÊó∂Áä∂ÊÄÅ„ÄÇËøô‰∏™Êú∫Âà∂[ÊúÄËøëË¢´ÊõøÊç¢][8]‰∏∫‰∏ÄÁßçÊñ∞Êú∫Âà∂ÔºåÊñ∞Êú∫Âà∂‰∏ãËøêË°åÊó∂ÂèØ‰ª•‰∏çÁî®Á≠â goroutine ËøõË°åÂáΩÊï∞Ë∞ÉÁî®Â∞±ÂèØ‰ª•ÊöÇÂÅú goroutine„ÄÇ&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p>ÊàëÁî® <code>//go:noinline</code> ÁºñËØëÊåá‰ª§Êù•ÈòªÊ≠¢ÁºñËØëÂô®ÂÜÖËÅî <code>max</code>„ÄÇËøôÊòØÂõ†‰∏∫ÊàëÊÉ≥ÊääÂÜÖËÅî <code>max</code> ÁöÑÂΩ±Âìç‰∏éÂÖ∂‰ªñÂΩ±ÂìçÈöîÁ¶ªÂºÄÔºåËÄå‰∏çÊòØÁî® <code>-gcflags='-l -N'</code> ÈÄâÈ°πÂú®ÂÖ®Â±ÄËåÉÂõ¥ÂÜÖÁ¶ÅÊ≠¢‰ºòÂåñ„ÄÇÂÖ≥‰∫é <code>//go:</code> Ê≥®ÈáäÂú®[ËøôÁØáÊñáÁ´†][10]‰∏≠ËØ¶ÁªÜËÆ∫Ëø∞„ÄÇ&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4">
<p>‰Ω†ÂèØ‰ª•Ëá™Â∑±ÈÄöËøáÊØîËæÉ <code>go test -bench=. -gcflags=-S</code> ÊúâÊó† <code>//go:noinline</code> Ê≥®ÈáäÊó∂ÁöÑ‰∏çÂêåÁªìÊûúÊù•È™åËØÅ‰∏Ä‰∏ã„ÄÇ&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5">
<p>‰Ω†ÂèØ‰ª•Áî® <code>-gcflags=-d=ssa/prove/debug=on</code> ÈÄâÈ°πÊù•Ëá™Â∑±È™åËØÅ‰∏Ä‰∏ã„ÄÇ&#160;<a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/8c45788a/">
        
        

        <div class="article-details">
            <h2 class="article-title">„ÄêËØë„ÄëÂÖ≥‰∫é CGo ÁöÑÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞ÁöÑËß£Èáä</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/10e5e8ba/">
        
        

        <div class="article-details">
            <h2 class="article-title">„ÄêËØë„ÄëGo Â≠óÁ¨¶‰∏≤‰∏≠ÁöÑÊΩúÂú®ÈóÆÈ¢ò</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/c9399f4/">
        
        

        <div class="article-details">
            <h2 class="article-title">„ÄêËØë„ÄëÂæÆÊúçÂä°‰∏≠ÁöÑÁÜîÊñ≠Âô®ÂíåÈáçËØï</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/4e717bb5/">
        
        

        <div class="article-details">
            <h2 class="article-title">„ÄêËØë„ÄëÂçèÁ®ãÔºåÊìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ãÂíå CPU ÁÆ°ÁêÜ</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/b3baee92/">
        
        

        <div class="article-details">
            <h2 class="article-title">[ËØë]Go GC ÊÄé‰πàÊ†áËÆ∞ÂÜÖÂ≠ò</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="lxbwolf/lxbwolf.github.io"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 Xiaobin&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
