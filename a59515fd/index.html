<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='æ¥å­¦ä¹ ä¸‹ Go è¯­è¨€çš„å®‰å…¨æ£€æŸ¥å·¥å…· gosecã€‚ Go è¯­è¨€å†™çš„ä»£ç è¶Šæ¥è¶Šå¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨å®¹å™¨ã€Kubernetes æˆ–äº‘ç”Ÿæ€ç›¸å…³çš„å¼€å‘ä¸­ã€‚Docker æ˜¯æœ€æ—©'>
<title>ã€è¯‘ã€‘ä½¿ç”¨ gosec æ£€æŸ¥ Go ä»£ç ä¸­çš„å®‰å…¨é—®é¢˜</title>

<link rel='canonical' href='https://lxb.wiki/a59515fd/'>

<link rel="stylesheet" href="/scss/style.min.e5fa5972b3e81b9d9b61e2598991a71c444ca50e38b034d78f5651a82802e894.css"><meta property='og:title' content='ã€è¯‘ã€‘ä½¿ç”¨ gosec æ£€æŸ¥ Go ä»£ç ä¸­çš„å®‰å…¨é—®é¢˜'>
<meta property='og:description' content='æ¥å­¦ä¹ ä¸‹ Go è¯­è¨€çš„å®‰å…¨æ£€æŸ¥å·¥å…· gosecã€‚ Go è¯­è¨€å†™çš„ä»£ç è¶Šæ¥è¶Šå¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨å®¹å™¨ã€Kubernetes æˆ–äº‘ç”Ÿæ€ç›¸å…³çš„å¼€å‘ä¸­ã€‚Docker æ˜¯æœ€æ—©'>
<meta property='og:url' content='https://lxb.wiki/a59515fd/'>
<meta property='og:site_name' content='Xiaobin&#39;s Notes'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='go' /><meta property='article:published_time' content='2020-10-19T23:36:00&#43;00:00'/><meta property='article:modified_time' content='2020-10-19T23:36:00&#43;00:00'/>
<meta name="twitter:title" content="ã€è¯‘ã€‘ä½¿ç”¨ gosec æ£€æŸ¥ Go ä»£ç ä¸­çš„å®‰å…¨é—®é¢˜">
<meta name="twitter:description" content="æ¥å­¦ä¹ ä¸‹ Go è¯­è¨€çš„å®‰å…¨æ£€æŸ¥å·¥å…· gosecã€‚ Go è¯­è¨€å†™çš„ä»£ç è¶Šæ¥è¶Šå¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨å®¹å™¨ã€Kubernetes æˆ–äº‘ç”Ÿæ€ç›¸å…³çš„å¼€å‘ä¸­ã€‚Docker æ˜¯æœ€æ—©">
<link rel="shortcut icon" href="/favicon.png" />

<script data-ad-client="ca-pub-5708899526501350" async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-JZ2PWLT6JY"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-JZ2PWLT6JY');
</script>
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?e710560ffa44cae2b3a6259e0171fb5f";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
<script>
    (function () {
        var el = document.createElement("script");
        el.src = "https://lf1-cdn-tos.bytegoofy.com/goofy/ttzz/push.js?f146251743600ee0672cdcc8455ce18def91cdb255ad969a2ef5c715d5ed5baecaf7cd753709c168f20e6a2e9019123fd11e31a222d3a2fe01ad05c6b8f519b2";
        el.id = "ttzz";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(el, s);
    })(window)
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu692828361b78eaa42fdbdbbf5a7177a9_44446_300x0_resize_q75_box.jpeg" width="300"
                            height="298" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Xiaobin&#39;s Notes</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header>


    <ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                <span>é¦–é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/categories/' >
                
                
                
                <span>åˆ†ç±»</span>
            </a>
        </li>
        
        
        <li >
            <a href='/tags/' >
                
                
                
                <span>æ ‡ç­¾</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                <span>å‹é“¾</span>
            </a>
        </li>
        

        <div class="menu-bottom-section"><ol class="social-menu">
                    
                        <li>
                            <a 
                                href='mailto://me@liuxb.email'
                                target="_blank"
                                title="Email"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                                
                            </a>
                        </li>
                    
                        <li>
                            <a 
                                href='https://github.com/lxbwolf'
                                target="_blank"
                                title="GitHub"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                                
                            </a>
                        </li>
                    
                        <li>
                            <a 
                                href='https://lxb.wiki/atom.xml'
                                target="_blank"
                                title="Rss"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                                
                            </a>
                        </li>
                    
                </ol>
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
<section class="widget archives">
    
    <h2 class="widget-title section-title">ç›®å½•</h2>

    <div class="widget--toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#å¼€å§‹ä½¿ç”¨-gosec">å¼€å§‹ä½¿ç”¨ gosec</a></li>
        <li><a href="#ä½¿ç”¨é»˜è®¤é€‰é¡¹è¿è¡Œ-gosec">ä½¿ç”¨é»˜è®¤é€‰é¡¹è¿è¡Œ gosec</a></li>
        <li><a href="#è‡ªå®šä¹‰-gosec-æ‰«æ">è‡ªå®šä¹‰ gosec æ‰«æ</a></li>
        <li><a href="#ç”¨-gosec-æ£€æŸ¥å®¹æ˜“è¢«å‘ç°çš„é—®é¢˜">ç”¨ gosec æ£€æŸ¥å®¹æ˜“è¢«å‘ç°çš„é—®é¢˜</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
        <a href="/categories/Lang/" >
            Lang
        </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/a59515fd/">ã€è¯‘ã€‘ä½¿ç”¨ gosec æ£€æŸ¥ Go ä»£ç ä¸­çš„å®‰å…¨é—®é¢˜</a>
        </h2>

        
    </div>

    
    
    
    
    <footer class="article-time">
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
            <time class="article-time--published">Oct 19, 2020</time>
        </div>
        

        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



            <time class="article-time--reading">
                é˜…è¯»æ—¶é•¿: 8 åˆ†é’Ÿ
            </time>
        </div>
        
        <small>
    <section class="article-tags">
        
            <a href="/tags/go/">go</a>
        
    </section>
</small>
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <!-- raw HTML omitted -->
<blockquote>
<p>æ¥å­¦ä¹ ä¸‹ Go è¯­è¨€çš„å®‰å…¨æ£€æŸ¥å·¥å…· gosecã€‚</p>
</blockquote>
<p><img src="https://img.linux.net.cn/data/attachment/album/202010/04/125129bh4qxxsyqpvqjtx4.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><a class="link" href="https://golang.org/"  target="_blank" rel="noopener"
    >Go è¯­è¨€</a>å†™çš„ä»£ç è¶Šæ¥è¶Šå¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨å®¹å™¨ã€Kubernetes æˆ–äº‘ç”Ÿæ€ç›¸å…³çš„å¼€å‘ä¸­ã€‚Docker æ˜¯æœ€æ—©é‡‡ç”¨ Golang çš„é¡¹ç›®ä¹‹ä¸€ï¼Œéšåæ˜¯ Kubernetesï¼Œä¹‹åå¤§é‡çš„æ–°é¡¹ç›®åœ¨ä¼—å¤šç¼–ç¨‹è¯­è¨€ä¸­é€‰æ‹©äº† Goã€‚</p>
<p>åƒå…¶ä»–è¯­è¨€ä¸€æ ·ï¼ŒGo ä¹Ÿæœ‰å®ƒçš„é•¿å¤„å’ŒçŸ­å¤„ï¼ˆå¦‚å®‰å…¨ç¼ºé™·ï¼‰ã€‚è¿™äº›ç¼ºé™·å¯èƒ½ä¼šå› ä¸ºè¯­è¨€æœ¬èº«çš„ç¼ºé™·åŠ ä¸Šç¨‹åºå‘˜ç¼–ç ä¸å½“è€Œäº§ç”Ÿï¼Œä¾‹å¦‚ï¼ŒC ä»£ç ä¸­çš„å†…å­˜å®‰å…¨é—®é¢˜ã€‚</p>
<p>æ— è®ºå®ƒä»¬å‡ºç°çš„åŸå› æ˜¯ä»€ä¹ˆï¼Œå®‰å…¨é—®é¢˜éƒ½åº”è¯¥åœ¨å¼€å‘è¿‡ç¨‹çš„æ—©æœŸä¿®å¤ï¼Œä»¥å…åœ¨å°è£…å¥½çš„è½¯ä»¶ä¸­å‡ºç°ã€‚å¹¸è¿çš„æ˜¯ï¼Œé™æ€åˆ†æå·¥å…·å¯ä»¥å¸®ä½ ä»¥æ›´å¯é‡å¤çš„æ–¹å¼å¤„ç†è¿™äº›é—®é¢˜ã€‚é™æ€åˆ†æå·¥å…·é€šè¿‡è§£æç”¨æŸç§ç¼–ç¨‹è¯­è¨€å†™çš„ä»£ç æ¥æ‰¾åˆ°é—®é¢˜ã€‚</p>
<p>è¿™ç±»å·¥å…·ä¸­å¾ˆå¤šè¢«ç§°ä¸º linterã€‚ä¼ ç»Ÿæ„ä¹‰ä¸Šï¼Œlinter æ›´æ³¨é‡çš„æ˜¯æ£€æŸ¥ä»£ç ä¸­ç¼–ç é—®é¢˜ã€bugã€ä»£ç é£æ ¼ä¹‹ç±»çš„é—®é¢˜ï¼Œå®ƒä»¬å¯èƒ½ä¸ä¼šå‘ç°ä»£ç ä¸­çš„å®‰å…¨é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ<a class="link" href="https://www.synopsys.com/software-integrity/security-testing/static-analysis-sast.html"  target="_blank" rel="noopener"
    >Coverity</a> æ˜¯ä¸€ä¸ªå¾ˆæµè¡Œçš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¯»æ‰¾ C/C++ ä»£ç ä¸­çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œä¹Ÿæœ‰ä¸€äº›å·¥å…·ä¸“é—¨ç”¨æ¥æ£€æŸ¥æºç ä¸­çš„å®‰å…¨é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ<a class="link" href="https://pypi.org/project/bandit/"  target="_blank" rel="noopener"
    >Bandit</a> å¯ä»¥æ£€æŸ¥ Python ä»£ç ä¸­çš„å®‰å…¨ç¼ºé™·ã€‚è€Œ <a class="link" href="https://github.com/securego/gosec"  target="_blank" rel="noopener"
    >gosec</a> åˆ™ç”¨æ¥æœå¯» Go æºç ä¸­çš„å®‰å…¨ç¼ºé™·ã€‚<code>gosec</code> é€šè¿‡æ‰«æ Go çš„ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘abstract syntax tree<!-- raw HTML omitted -->æŠ½è±¡è¯­æ³•æ ‘<!-- raw HTML omitted -->abstract syntax tree<!-- raw HTML omitted --><!-- raw HTML omitted -->ï¼‰æ¥æ£€æŸ¥æºç ä¸­çš„å®‰å…¨é—®é¢˜ã€‚</p>
<h3 id="å¼€å§‹ä½¿ç”¨-gosec">å¼€å§‹ä½¿ç”¨ gosec</h3>
<p>åœ¨å¼€å§‹å­¦ä¹ å’Œä½¿ç”¨ <code>gosec</code> ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä¸€ä¸ª Go è¯­è¨€å†™çš„é¡¹ç›®ã€‚æœ‰è¿™ä¹ˆå¤šå¼€æºè½¯ä»¶ï¼Œæˆ‘ç›¸ä¿¡è¿™ä¸æ˜¯é—®é¢˜ã€‚ä½ å¯ä»¥åœ¨ GitHub çš„ <a class="link" href="https://github.com/trending/go"  target="_blank" rel="noopener"
    >çƒ­é—¨ Golang ä»“åº“</a>ä¸­æ‰¾ä¸€ä¸ªã€‚</p>
<p>æœ¬æ–‡ä¸­ï¼Œæˆ‘éšæœºé€‰äº† <a class="link" href="https://github.com/docker/docker-ce"  target="_blank" rel="noopener"
    >Docker CE</a> é¡¹ç›®ï¼Œä½†ä½ å¯ä»¥é€‰æ‹©ä»»æ„çš„ Go é¡¹ç›®ã€‚</p>
<h4 id="å®‰è£…-go-å’Œ-gosec">å®‰è£… Go å’Œ gosec</h4>
<p>å¦‚æœä½ è¿˜æ²¡å®‰è£… Goï¼Œä½ å¯ä»¥å…ˆä»ä»“åº“ä¸­æ‹‰å–ä¸‹æ¥ã€‚å¦‚æœä½ ç”¨çš„æ˜¯ Fedora æˆ–å…¶ä»–åŸºäº RPM çš„ Linux å‘è¡Œç‰ˆæœ¬ï¼š</p>
<pre tabindex="0"><code>$ dnf install golang.x86_64
</code></pre><p>å¦‚æœä½ ç”¨çš„æ˜¯å…¶ä»–æ“ä½œç³»ç»Ÿï¼Œè¯·å‚ç…§ <a class="link" href="https://golang.org/doc/install"  target="_blank" rel="noopener"
    >Golang å®‰è£…</a>é¡µé¢ã€‚</p>
<p>ä½¿ç”¨ <code>version</code> å‚æ•°æ¥éªŒè¯ Go æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre tabindex="0"><code>$ go version
go version go1.14.6 linux/amd64
</code></pre><p>è¿è¡Œ <code>go get</code> å‘½ä»¤å°±å¯ä»¥è½»æ¾åœ°å®‰è£… <code>gosec</code>ï¼š</p>
<pre tabindex="0"><code>$ go get github.com/securego/gosec/cmd/gosec
</code></pre><p>ä¸Šé¢è¿™è¡Œå‘½ä»¤ä¼šä» GitHub ä¸‹è½½ <code>gosec</code> çš„æºç ï¼Œç¼–è¯‘å¹¶å®‰è£…åˆ°æŒ‡å®šä½ç½®ã€‚åœ¨ä»“åº“çš„ <code>README</code> ä¸­ä½ è¿˜å¯ä»¥çœ‹åˆ°<a class="link" href="https://github.com/securego/gosec#install"  target="_blank" rel="noopener"
    >å®‰è£…è¯¥å·¥å…·çš„å…¶ä»–æ–¹æ³•</a>ã€‚</p>
<p><code>gosec</code> çš„æºç ä¼šè¢«ä¸‹è½½åˆ° <code>$GOPATH</code> çš„ä½ç½®ï¼Œç¼–è¯‘å‡ºçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¼šè¢«å®‰è£…åˆ°ä½ ç³»ç»Ÿä¸Šè®¾ç½®çš„ <code>bin</code> ç›®å½•ä¸‹ã€‚ä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹ <code>$GOPATH</code> å’Œ <code>$GOBIN</code> ç›®å½•ï¼š</p>
<pre tabindex="0"><code>$ go env | grep GOBIN
GOBIN=&#34;/root/go/gobin&#34;
$ go env | grep GOPATH
GOPATH=&#34;/root/go&#34;
</code></pre><p>å¦‚æœ <code>go get</code> å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆ <code>gosec</code> äºŒè¿›åˆ¶åº”è¯¥å°±å¯ä»¥ä½¿ç”¨äº†ï¼š</p>
<pre tabindex="0"><code>$ ls -l ~/go/bin/
total 9260
-rwxr-xr-x. 1 root root 9482175 Aug 20 04:17 gosec
</code></pre><p>ä½ å¯ä»¥æŠŠ <code>$GOPATH</code> ä¸‹çš„ <code>bin</code> ç›®å½•æ·»åŠ åˆ° <code>$PATH</code> ä¸­ã€‚è¿™æ ·ä½ å°±å¯ä»¥åƒä½¿ç”¨ç³»ç»Ÿä¸Šçš„å…¶ä»–å‘½ä»¤ä¸€æ ·æ¥ä½¿ç”¨ <code>gosec</code> å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰äº†ã€‚</p>
<pre tabindex="0"><code>$ which gosec
/root/go/bin/gosec
$
</code></pre><p>ä½¿ç”¨ <code>gosec</code> å‘½ä»¤è¡Œå·¥å…·çš„ <code>-help</code> é€‰é¡¹æ¥çœ‹çœ‹è¿è¡Œæ˜¯å¦ç¬¦åˆé¢„æœŸï¼š</p>
<pre tabindex="0"><code>$ gosec -help

gosec - Golang security checker

gosec analyzes Go source code to look for common programming mistakes that
can lead to security problems.

VERSION: dev
GIT TAG:
BUILD DATE:

USAGE:
</code></pre><p>ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªç›®å½•ï¼ŒæŠŠæºç ä¸‹è½½åˆ°è¿™ä¸ªç›®å½•ä½œä¸ºå®ä¾‹é¡¹ç›®ï¼ˆæœ¬ä¾‹ä¸­ï¼Œæˆ‘ç”¨çš„æ˜¯ Docker CEï¼‰ï¼š</p>
<pre tabindex="0"><code>$ mkdir gosec-demo
$ cd gosec-demo/
$ pwd
/root/gosec-demo
$ git clone https://github.com/docker/docker-ce.git
Cloning into &#39;docker-ce&#39;...
remote: Enumerating objects: 1271, done.
remote: Counting objects: 100% (1271/1271), done.
remote: Compressing objects: 100% (722/722), done.
remote: Total 431003 (delta 384), reused 981 (delta 318), pack-reused 429732
Receiving objects: 100% (431003/431003), 166.84 MiB | 28.94 MiB/s, done.
Resolving deltas: 100% (221338/221338), done.
Updating files: 100% (10861/10861), done.
</code></pre><p>ä»£ç ç»Ÿè®¡å·¥å…·ï¼ˆæœ¬ä¾‹ä¸­ç”¨çš„æ˜¯ <code>cloc</code>ï¼‰æ˜¾ç¤ºè¿™ä¸ªé¡¹ç›®å¤§éƒ¨åˆ†æ˜¯ç”¨ Go å†™çš„ï¼Œæ°å¥½è¿åˆäº† <code>gosec</code> çš„åŠŸèƒ½ã€‚</p>
<pre tabindex="0"><code>$ ./cloc /root/gosec-demo/docker-ce/
   10771 text files.
    8724 unique files.                                          
    2560 files ignored.


-----------------------------------------------------------------------------------
Language                         files          blank        comment           code
-----------------------------------------------------------------------------------
Go                                7222         190785         230478        1574580
YAML                                37           4831            817         156762
Markdown                           529          21422              0          67893
Protocol Buffers                   149           5014          16562          10071
</code></pre><h3 id="ä½¿ç”¨é»˜è®¤é€‰é¡¹è¿è¡Œ-gosec">ä½¿ç”¨é»˜è®¤é€‰é¡¹è¿è¡Œ gosec</h3>
<p>åœ¨ Docker CE é¡¹ç›®ä¸­ä½¿ç”¨é»˜è®¤é€‰é¡¹è¿è¡Œ <code>gosec</code>ï¼Œæ‰§è¡Œ <code>gosec ./...</code> å‘½ä»¤ã€‚å±å¹•ä¸Šä¼šæœ‰å¾ˆå¤šè¾“å‡ºå†…å®¹ã€‚åœ¨æœ«å°¾ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç®€çŸ­çš„ â€œSummaryâ€ï¼Œåˆ—å‡ºäº†æµè§ˆçš„æ–‡ä»¶æ•°ã€æ‰€æœ‰æ–‡ä»¶çš„æ€»è¡Œæ•°ï¼Œä»¥åŠæºç ä¸­å‘ç°çš„é—®é¢˜æ•°ã€‚</p>
<pre tabindex="0"><code>$ pwd
/root/gosec-demo/docker-ce
$ time gosec ./...
[gosec] 2020/08/20 04:44:15 Including rules: default
[gosec] 2020/08/20 04:44:15 Excluding rules: default
[gosec] 2020/08/20 04:44:15 Import directory: /root/gosec-demo/docker-ce/components/engine/opts
[gosec] 2020/08/20 04:44:17 Checking package: opts
[gosec] 2020/08/20 04:44:17 Checking file: /root/gosec-demo/docker-ce/components/engine/opts/address_pools.go
[gosec] 2020/08/20 04:44:17 Checking file: /root/gosec-demo/docker-ce/components/engine/opts/env.go
[gosec] 2020/08/20 04:44:17 Checking file: /root/gosec-demo/docker-ce/components/engine/opts/hosts.go

# End of gosec run

Summary:
   Files: 1278
   Lines: 173979
   Nosec: 4
  Issues: 644

real    0m52.019s
user    0m37.284s
sys     0m12.734s
$
</code></pre><p>æ»šåŠ¨å±å¹•ä½ ä¼šçœ‹åˆ°ä¸åŒé¢œè‰²é«˜äº®çš„è¡Œï¼šçº¢è‰²è¡¨ç¤ºéœ€è¦å°½å¿«æŸ¥çœ‹çš„é«˜ä¼˜å…ˆçº§é—®é¢˜ï¼Œé»„è‰²è¡¨ç¤ºä¸­ä¼˜å…ˆçº§çš„é—®é¢˜ã€‚</p>
<h4 id="å…³äºè¯¯åˆ¤">å…³äºè¯¯åˆ¤</h4>
<p>åœ¨å¼€å§‹æ£€æŸ¥ä»£ç ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆåˆ†äº«å‡ æ¡åŸºæœ¬åŸåˆ™ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé™æ€æ£€æŸ¥å·¥å…·ä¼šåŸºäºä¸€ç³»åˆ—çš„è§„åˆ™å¯¹æµ‹è¯•ä»£ç è¿›è¡Œåˆ†æï¼Œå¹¶æŠ¥å‘Šå‡ºå®ƒä»¬å‘ç°çš„<em>æ‰€æœ‰</em>é—®é¢˜ã€‚è¿™æ˜¯å¦æ„å‘³ç€å·¥å…·æŠ¥å‡ºæ¥çš„æ¯ä¸€ä¸ªé—®é¢˜éƒ½éœ€è¦ä¿®å¤ï¼Ÿéä¹Ÿã€‚è¿™ä¸ªé—®é¢˜æœ€å¥½çš„è§£ç­”è€…æ˜¯è®¾è®¡å’Œå¼€å‘è¿™ä¸ªè½¯ä»¶çš„äººã€‚ä»–ä»¬æœ€ç†Ÿæ‚‰ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä»–ä»¬äº†è§£è½¯ä»¶ä¼šåœ¨ä»€ä¹ˆç¯å¢ƒä¸‹éƒ¨ç½²ä»¥åŠä¼šè¢«æ€æ ·ä½¿ç”¨ã€‚</p>
<p>è¿™ä¸ªçŸ¥è¯†ç‚¹å¯¹äºåˆ¤å®šå·¥å…·æ ‡è®°å‡ºæ¥çš„æŸæ®µä»£ç åˆ°åº•æ˜¯ä¸æ˜¯å®‰å…¨ç¼ºé™·è‡³å…³é‡è¦ã€‚éšç€å·¥ä½œæ—¶é—´å’Œç»éªŒçš„ç§¯ç´¯ï¼Œä½ ä¼šæ…¢æ…¢å­¦ä¼šæ€æ ·è®©é™æ€åˆ†æå·¥å…·å¿½ç•¥éå®‰å…¨ç¼ºé™·ï¼Œä½¿æŠ¥å‘Šå†…å®¹çš„å¯æ‰§è¡Œæ€§æ›´é«˜ã€‚å› æ­¤ï¼Œè¦åˆ¤å®š <code>gosec</code> æŠ¥å‡ºæ¥çš„æŸä¸ªé—®é¢˜æ˜¯å¦éœ€è¦ä¿®å¤ï¼Œè®©ä¸€åæœ‰ç»éªŒçš„å¼€å‘è€…å¯¹æºç åšäººå·¥å®¡è®¡ä¼šæ˜¯æ¯”è¾ƒå¥½çš„åŠæ³•ã€‚</p>
<h4 id="é«˜ä¼˜å…ˆçº§é—®é¢˜">é«˜ä¼˜å…ˆçº§é—®é¢˜</h4>
<p>ä»è¾“å‡ºå†…å®¹çœ‹ï¼Œ<code>gosec</code> å‘ç°äº† Docker CE çš„ä¸€ä¸ªé«˜ä¼˜å…ˆçº§é—®é¢˜ï¼Œå®ƒä½¿ç”¨çš„æ˜¯ä½ç‰ˆæœ¬çš„ TLSï¼ˆä¼ è¾“å±‚å®‰å…¨Transport Layer Security<!-- raw HTML omitted -->ä¼ è¾“å±‚å®‰å…¨<!-- raw HTML omitted -->Transport Layer Security<!-- raw HTML omitted --><!-- raw HTML omitted -->ï¼‰ã€‚æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œä½¿ç”¨è½¯ä»¶å’Œåº“çš„æœ€æ–°ç‰ˆæœ¬éƒ½æ˜¯ç¡®ä¿å®ƒæ›´æ–°åŠæ—¶ã€æ²¡æœ‰å®‰å…¨é—®é¢˜çš„æœ€å¥½çš„æ–¹æ³•ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/engine/daemon/logger/splunk/splunk.go:173] - G402 (CWE-295): TLS MinVersion too low. (Confidence: HIGH, Severity: HIGH)
    172:
  &gt; 173:        tlsConfig := &amp;tls.Config{}
    174:
</code></pre><p>å®ƒè¿˜å‘ç°äº†ä¸€ä¸ªå¼±éšæœºæ•°ç”Ÿæˆå™¨ã€‚å®ƒæ˜¯ä¸æ˜¯ä¸€ä¸ªå®‰å…¨ç¼ºé™·ï¼Œå–å†³äºç”Ÿæˆçš„éšæœºæ•°çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/engine/pkg/namesgenerator/names-generator.go:843] - G404 (CWE-338): Use of weak random number generator (math/rand instead of crypto/rand) (Confidence: MEDIUM, Severity: HIGH)
    842: begin:
  &gt; 843:        name := fmt.Sprintf(&#34;%s_%s&#34;, left[rand.Intn(len(left))], right[rand.Intn(len(right))])
    844:        if name == &#34;boring_wozniak&#34; /* Steve Wozniak is not boring */ {
</code></pre><h4 id="ä¸­ä¼˜å…ˆçº§é—®é¢˜">ä¸­ä¼˜å…ˆçº§é—®é¢˜</h4>
<p>è¿™ä¸ªå·¥å…·è¿˜å‘ç°äº†ä¸€äº›ä¸­ä¼˜å…ˆçº§é—®é¢˜ã€‚å®ƒæ ‡è®°äº†ä¸€ä¸ªé€šè¿‡ä¸ <code>tar</code> ç›¸å…³çš„è§£å‹ç‚¸å¼¹è¿™ç§æ–¹å¼å®ç°çš„æ½œåœ¨çš„ DoS å¨èƒï¼Œè¿™ç§æ–¹å¼å¯èƒ½ä¼šè¢«æ¶æ„çš„æ”»å‡»è€…åˆ©ç”¨ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/engine/pkg/archive/copy.go:357] - G110 (CWE-409): Potential DoS vulnerability via decompression bomb (Confidence: MEDIUM, Severity: MEDIUM)
    356:
  &gt; 357:                        if _, err = io.Copy(rebasedTar, srcTar); err != nil {
    358:                                w.CloseWithError(err)
</code></pre><p>å®ƒè¿˜å‘ç°äº†ä¸€ä¸ªé€šè¿‡å˜é‡è®¿é—®æ–‡ä»¶çš„é—®é¢˜ã€‚å¦‚æœæ¶æ„ä½¿ç”¨è€…èƒ½è®¿é—®è¿™ä¸ªå˜é‡ï¼Œé‚£ä¹ˆä»–ä»¬å°±å¯ä»¥æ”¹å˜å˜é‡çš„å€¼å»è¯»å…¶ä»–æ–‡ä»¶ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/cli/cli/context/tlsdata.go:80] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    79:         if caPath != &#34;&#34; {
  &gt; 80:                 if ca, err = ioutil.ReadFile(caPath); err != nil {
    81:                         return nil, err
</code></pre><p>æ–‡ä»¶å’Œç›®å½•é€šå¸¸æ˜¯æ“ä½œç³»ç»Ÿå®‰å…¨çš„æœ€åŸºç¡€çš„å…ƒç´ ã€‚è¿™é‡Œï¼Œ<code>gosec</code> æŠ¥å‡ºäº†ä¸€ä¸ªå¯èƒ½éœ€è¦ä½ æ£€æŸ¥ç›®å½•çš„æƒé™æ˜¯å¦å®‰å…¨çš„é—®é¢˜ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/engine/contrib/apparmor/main.go:41] - G301 (CWE-276): Expect directory permissions to be 0750 or less (Confidence: HIGH, Severity: MEDIUM)
    40:         // make sure /etc/apparmor.d exists
  &gt; 41:         if err := os.MkdirAll(path.Dir(apparmorProfilePath), 0755); err != nil {
    42:                 log.Fatal(err)
</code></pre><p>ä½ ç»å¸¸éœ€è¦åœ¨æºç ä¸­å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·ã€‚Go ä½¿ç”¨å†…å»ºçš„ exec åº“æ¥å®ç°ã€‚ä»”ç»†åœ°åˆ†æç”¨æ¥è°ƒç”¨è¿™äº›å·¥å…·çš„å˜é‡ï¼Œå°±èƒ½å‘ç°å®‰å…¨ç¼ºé™·ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/engine/testutil/fakestorage/fixtures.go:59] - G204 (CWE-78): Subprocess launched with variable (Confidence: HIGH, Severity: MEDIUM)
    58:
  &gt; 59:              cmd := exec.Command(goCmd, &#34;build&#34;, &#34;-o&#34;, filepath.Join(tmp, &#34;httpserver&#34;), &#34;github.com/docker/docker/contrib/httpserver&#34;)
    60:                 cmd.Env = append(os.Environ(), []string{
</code></pre><h4 id="ä½ä¼˜å…ˆçº§é—®é¢˜">ä½ä¼˜å…ˆçº§é—®é¢˜</h4>
<p>åœ¨è¿™ä¸ªè¾“å‡ºä¸­ï¼Œgosec æŠ¥å‡ºäº†ä¸€ä¸ª <code>unsafe</code> è°ƒç”¨ç›¸å…³çš„ä½ä¼˜å…ˆçº§é—®é¢˜ï¼Œè¿™ä¸ªè°ƒç”¨ä¼šç»•å¼€ Go æä¾›çš„å†…å­˜ä¿æŠ¤ã€‚å†ä»”ç»†åˆ†æä¸‹ä½ è°ƒç”¨ <code>unsafe</code> çš„æ–¹å¼ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰è¢«åˆ«äººåˆ©ç”¨çš„å¯èƒ½æ€§ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/engine/pkg/archive/changes_linux.go:264] - G103 (CWE-242): Use of unsafe calls should be audited (Confidence: HIGH, Severity: LOW)
    263:        for len(buf) &gt; 0 {
  &gt; 264:                dirent := (*unix.Dirent)(unsafe.Pointer(&amp;buf[0]))
    265:                buf = buf[dirent.Reclen:]



[/root/gosec-demo/docker-ce/components/engine/pkg/devicemapper/devmapper_wrapper.go:88] - G103 (CWE-242): Use of unsafe calls should be audited (Confidence: HIGH, Severity: LOW)
    87: func free(p *C.char) {
  &gt; 88:         C.free(unsafe.Pointer(p))
    89: }
</code></pre><p>å®ƒè¿˜æ ‡è®°äº†æºç ä¸­æœªå¤„ç†çš„é”™è¯¯ã€‚æºç ä¸­å‡ºç°çš„é”™è¯¯ä½ éƒ½åº”è¯¥å¤„ç†ã€‚</p>
<pre tabindex="0"><code>[/root/gosec-demo/docker-ce/components/cli/cli/command/image/build/context.go:172] - G104 (CWE-703): Errors unhandled. (Confidence: HIGH, Severity: LOW)
    171:                err := tar.Close()
  &gt; 172:                os.RemoveAll(dockerfileDir)
    173:                return err
</code></pre><h3 id="è‡ªå®šä¹‰-gosec-æ‰«æ">è‡ªå®šä¹‰ gosec æ‰«æ</h3>
<p>ä½¿ç”¨ <code>gosec</code> çš„é»˜è®¤é€‰é¡¹ä¼šå¸¦æ¥å¾ˆå¤šçš„é—®é¢˜ã€‚ç„¶è€Œï¼Œç»è¿‡äººå·¥å®¡è®¡ï¼Œéšç€æ—¶é—´æ¨ç§»ä½ ä¼šæŒæ¡å“ªäº›é—®é¢˜æ˜¯ä¸éœ€è¦æ ‡è®°çš„ã€‚ä½ å¯ä»¥è‡ªå·±æŒ‡å®šæ’é™¤å’ŒåŒ…å«å“ªäº›æµ‹è¯•ã€‚</p>
<p>æˆ‘ä¸Šé¢æåˆ°è¿‡ï¼Œ<code>gosec</code> æ˜¯åŸºäºä¸€ç³»åˆ—çš„è§„åˆ™ä» Go æºç ä¸­æŸ¥æ‰¾é—®é¢˜çš„ã€‚ä¸‹é¢æ˜¯å®ƒä½¿ç”¨çš„å®Œæ•´çš„<a class="link" href="https://github.com/securego/gosec#available-rules"  target="_blank" rel="noopener"
    >è§„åˆ™</a>åˆ—è¡¨ï¼š</p>
<ul>
<li>G101ï¼šæŸ¥æ‰¾ç¡¬ç¼–ç å‡­è¯</li>
<li>G102ï¼šç»‘å®šåˆ°æ‰€æœ‰æ¥å£</li>
<li>G103ï¼šå®¡è®¡ <code>unsafe</code> å—çš„ä½¿ç”¨</li>
<li>G104ï¼šå®¡è®¡æœªæ£€æŸ¥çš„é”™è¯¯</li>
<li>G106ï¼šå®¡è®¡ <code>ssh.InsecureIgnoreHostKey</code> çš„ä½¿ç”¨</li>
<li>G107: æä¾›ç»™ HTTP è¯·æ±‚çš„ url ä½œä¸ºæ±¡ç‚¹è¾“å…¥</li>
<li>G108: <code>/debug/pprof</code> ä¸Šè‡ªåŠ¨æš´éœ²çš„å‰–æç«¯ç‚¹</li>
<li>G109: <code>strconv.Atoi</code> è½¬æ¢åˆ° int16 æˆ– int32 æ—¶æ½œåœ¨çš„æ•´æ•°æº¢å‡º</li>
<li>G110: æ½œåœ¨çš„é€šè¿‡è§£å‹ç‚¸å¼¹å®ç°çš„ DoS</li>
<li>G201ï¼šSQL æŸ¥è¯¢æ„é€ ä½¿ç”¨æ ¼å¼å­—ç¬¦ä¸²</li>
<li>G202ï¼šSQL æŸ¥è¯¢æ„é€ ä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥</li>
<li>G203ï¼šåœ¨ HTML æ¨¡æ¿ä¸­ä½¿ç”¨æœªè½¬ä¹‰çš„æ•°æ®</li>
<li>G204ï¼šå®¡è®¡å‘½ä»¤æ‰§è¡Œæƒ…å†µ</li>
<li>G301ï¼šåˆ›å»ºç›®å½•æ—¶æ–‡ä»¶æƒé™åˆ†é…ä¸åˆç†</li>
<li>G302ï¼šä½¿ç”¨ <code>chmod</code> æ—¶æ–‡ä»¶æƒé™åˆ†é…ä¸åˆç†</li>
<li>G303ï¼šä½¿ç”¨å¯é¢„æµ‹çš„è·¯å¾„åˆ›å»ºä¸´æ—¶æ–‡ä»¶</li>
<li>G304ï¼šé€šè¿‡æ±¡ç‚¹è¾“å…¥æä¾›çš„æ–‡ä»¶è·¯å¾„</li>
<li>G305ï¼šæå– zip/tar æ–‡æ¡£æ—¶éå†æ–‡ä»¶</li>
<li>G306: å†™åˆ°æ–°æ–‡ä»¶æ—¶æ–‡ä»¶æƒé™åˆ†é…ä¸åˆç†</li>
<li>G307: æŠŠè¿”å›é”™è¯¯çš„å‡½æ•°æ”¾åˆ° <code>defer</code> å†…</li>
<li>G401ï¼šæ£€æµ‹ DESã€RC4ã€MD5 æˆ– SHA1 çš„ä½¿ç”¨</li>
<li>G402ï¼šæŸ¥æ‰¾é”™è¯¯çš„ TLS è¿æ¥è®¾ç½®</li>
<li>G403ï¼šç¡®ä¿æœ€å° RSA å¯†é’¥é•¿åº¦ä¸º 2048 ä½</li>
<li>G404ï¼šä¸å®‰å…¨çš„éšæœºæ•°æºï¼ˆ<code>rand</code>ï¼‰</li>
<li>G501ï¼šå¯¼å…¥é»‘åå•åˆ—è¡¨ï¼šcrypto/md5</li>
<li>G502ï¼šå¯¼å…¥é»‘åå•åˆ—è¡¨ï¼šcrypto/des</li>
<li>G503ï¼šå¯¼å…¥é»‘åå•åˆ—è¡¨ï¼šcrypto/rc4</li>
<li>G504ï¼šå¯¼å…¥é»‘åå•åˆ—è¡¨ï¼šnet/http/cgi</li>
<li>G505ï¼šå¯¼å…¥é»‘åå•åˆ—è¡¨ï¼šcrypto/sha1</li>
<li>G601: åœ¨ <code>range</code> è¯­å¥ä¸­ä½¿ç”¨éšå¼çš„å…ƒç´ åˆ«å</li>
</ul>
<h4 id="æ’é™¤æŒ‡å®šçš„æµ‹è¯•">æ’é™¤æŒ‡å®šçš„æµ‹è¯•</h4>
<p>ä½ å¯ä»¥è‡ªå®šä¹‰ <code>gosec</code> æ¥é¿å…å¯¹å·²çŸ¥ä¸ºå®‰å…¨çš„é—®é¢˜è¿›è¡Œæ‰«æå’ŒæŠ¥å‘Šã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>-exclude</code> é€‰é¡¹å’Œä¸Šé¢çš„è§„åˆ™ç¼–å·æ¥å¿½ç•¥æŒ‡å®šçš„é—®é¢˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¸æƒ³è®© <code>gosec</code> æ£€æŸ¥æºç ä¸­ç¡¬ç¼–ç å‡­è¯ç›¸å…³çš„æœªå¤„ç†çš„é”™è¯¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å¿½ç•¥è¿™äº›é”™è¯¯ï¼š</p>
<pre tabindex="0"><code>$ gosec -exclude=G104 ./...
$ gosec -exclude=G104,G101 ./...
</code></pre><p>æœ‰æ—¶å€™ä½ çŸ¥é“æŸæ®µä»£ç æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯ <code>gosec</code> è¿˜æ˜¯ä¼šæŠ¥å‡ºé—®é¢˜ã€‚ç„¶è€Œï¼Œä½ åˆä¸æƒ³å®Œå…¨æ’é™¤æ‰æ•´ä¸ªæ£€æŸ¥ï¼Œå› ä¸ºä½ æƒ³è®© <code>gosec</code> æ£€æŸ¥æ–°å¢çš„ä»£ç ã€‚é€šè¿‡åœ¨ä½ å·²çŸ¥ä¸ºå®‰å…¨çš„ä»£ç å—æ·»åŠ  <code>#nosec</code> æ ‡è®°å¯ä»¥é¿å… <code>gosec</code> æ‰«æã€‚è¿™æ · <code>gosec</code> ä¼šç»§ç»­æ‰«ææ–°å¢ä»£ç ï¼Œè€Œå¿½ç•¥æ‰ <code>#nosec</code> æ ‡è®°çš„ä»£ç å—ã€‚</p>
<h4 id="è¿è¡ŒæŒ‡å®šçš„æ£€æŸ¥">è¿è¡ŒæŒ‡å®šçš„æ£€æŸ¥</h4>
<p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ åªæƒ³æ£€æŸ¥æŒ‡å®šçš„é—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡ <code>-include</code> é€‰é¡¹å’Œè§„åˆ™ç¼–å·æ¥å‘Šè¯‰ <code>gosec</code> è¿è¡Œå“ªäº›æ£€æŸ¥ï¼š</p>
<pre tabindex="0"><code>$ gosec -include=G201,G202 ./...
</code></pre><h4 id="æ‰«ææµ‹è¯•æ–‡ä»¶">æ‰«ææµ‹è¯•æ–‡ä»¶</h4>
<p>Go è¯­è¨€è‡ªå¸¦å¯¹æµ‹è¯•çš„æ”¯æŒï¼Œé€šè¿‡å•å…ƒæµ‹è¯•æ¥æ£€éªŒä¸€ä¸ªå…ƒç´ æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚åœ¨é»˜è®¤æ¨¡å¼ä¸‹ï¼Œ<code>gosec</code> ä¼šå¿½ç•¥æµ‹è¯•æ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>-tests</code> é€‰é¡¹æŠŠå®ƒä»¬åŒ…å«è¿›æ¥ï¼š</p>
<pre tabindex="0"><code>gosec -tests ./...
</code></pre><h4 id="ä¿®æ”¹è¾“å‡ºçš„æ ¼å¼">ä¿®æ”¹è¾“å‡ºçš„æ ¼å¼</h4>
<p>æ‰¾å‡ºé—®é¢˜åªæ˜¯å®ƒçš„ä¸€åŠåŠŸèƒ½ï¼›å¦ä¸€åŠåŠŸèƒ½æ˜¯æŠŠå®ƒæ£€æŸ¥åˆ°çš„é—®é¢˜ä»¥ç”¨æˆ·å‹å¥½åŒæ—¶åˆæ–¹ä¾¿å·¥å…·å¤„ç†çš„æ–¹å¼æŠ¥å‘Šå‡ºæ¥ã€‚å¹¸è¿çš„æ˜¯ï¼Œ<code>gosec</code> å¯ä»¥ç”¨ä¸åŒçš„æ–¹å¼è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³çœ‹ JSON æ ¼å¼çš„æŠ¥å‘Šï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ <code>-fmt</code> é€‰é¡¹æŒ‡å®š JSON æ ¼å¼å¹¶æŠŠç»“æœä¿å­˜åˆ° <code>results.json</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre tabindex="0"><code>$ gosec -fmt=json -out=results.json ./...

$ ls -l results.json
-rw-r--r--. 1 root root 748098 Aug 20 05:06 results.json
$

         {
             &#34;severity&#34;: &#34;LOW&#34;,
             &#34;confidence&#34;: &#34;HIGH&#34;,
             &#34;cwe&#34;: {
                 &#34;ID&#34;: &#34;242&#34;,
                 &#34;URL&#34;: &#34;https://cwe.mitre.org/data/definitions/242.html&#34;
             },
             &#34;rule_id&#34;: &#34;G103&#34;,
             &#34;details&#34;: &#34;Use of unsafe calls should be audited&#34;,
             &#34;file&#34;: &#34;/root/gosec-demo/docker-ce/components/engine/daemon/graphdriver/graphtest/graphtest_unix.go&#34;,
             &#34;code&#34;: &#34;304: \t// Cast to []byte\n305: \theader := *(*reflect.SliceHeader)(unsafe.Pointer(\u0026buf))\n306: \theader.      Len *= 8\n&#34;,
             &#34;line&#34;: &#34;305&#34;,
             &#34;column&#34;: &#34;36&#34;
         },
</code></pre><h3 id="ç”¨-gosec-æ£€æŸ¥å®¹æ˜“è¢«å‘ç°çš„é—®é¢˜">ç”¨ gosec æ£€æŸ¥å®¹æ˜“è¢«å‘ç°çš„é—®é¢˜</h3>
<p>é™æ€æ£€æŸ¥å·¥å…·ä¸èƒ½å®Œå…¨ä»£æ›¿äººå·¥ä»£ç å®¡è®¡ã€‚ç„¶è€Œï¼Œå½“ä»£ç é‡å˜å¤§ã€æœ‰ä¼—å¤šå¼€å‘è€…æ—¶ï¼Œè¿™æ ·çš„å·¥å…·å¾€å¾€æœ‰åŠ©äºä»¥å¯é‡å¤çš„æ–¹å¼æ‰¾å‡ºå®¹æ˜“è¢«å‘ç°çš„é—®é¢˜ã€‚å®ƒå¯¹äºå¸®åŠ©æ–°å¼€å‘è€…è¯†åˆ«å’Œåœ¨ç¼–ç æ—¶é¿å…å¼•å…¥è¿™äº›å®‰å…¨ç¼ºé™·å¾ˆæœ‰ç”¨ã€‚</p>
<hr>
<p>via: <a class="link" href="https://opensource.com/article/20/9/gosec"  target="_blank" rel="noopener"
    >https://opensource.com/article/20/9/gosec</a></p>
<p>ä½œè€…ï¼š<a class="link" href="https://opensource.com/users/gkamathe"  target="_blank" rel="noopener"
    >Gaurav Kamathe</a>
é€‰é¢˜ï¼š<a class="link" href="https://github.com/lujun9972"  target="_blank" rel="noopener"
    >lujun9972</a>
è¯‘è€…ï¼š<a class="link" href="https://github.com/lxbwolf"  target="_blank" rel="noopener"
    >lxbowlf</a>
æ ¡å¯¹ï¼š<a class="link" href="https://github.com/wxy"  target="_blank" rel="noopener"
    >wxy</a></p>
<p>æœ¬æ–‡ç”± <a class="link" href="https://github.com/LCTT/TranslateProject"  target="_blank" rel="noopener"
    >LCTT</a> åŸåˆ›ç¼–è¯‘ï¼Œ<a class="link" href="https://linux.cn/"  target="_blank" rel="noopener"
    >Linuxä¸­å›½</a> è£èª‰æ¨å‡º</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/8c9efcce/">
        
        

        <div class="article-details">
            <h2 class="article-title">æµé‡å¤åˆ¶é‡æ”¾å·¥å…·goreplay</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/ace0b2ab/">
        
        

        <div class="article-details">
            <h2 class="article-title">ã€è¯‘ã€‘Go 1.14 ä¸­æ¥å£çš„è±å½¢ç»„åˆ</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/27d7ea27/">
        
        

        <div class="article-details">
            <h2 class="article-title">ã€è¯‘ã€‘é€šè¿‡ç¦æ­¢æ¯”è¾ƒè®© Go äºŒè¿›åˆ¶æ–‡ä»¶å˜å°</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/5698ca18/">
        
        

        <div class="article-details">
            <h2 class="article-title">ã€è¯‘ã€‘Goï¼šå¼‚æ­¥æŠ¢å </h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/6ce34c49/">
        
        

        <div class="article-details">
            <h2 class="article-title">ã€è¯‘ã€‘Inlining Optimisations in Go</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="lxbwolf/lxbwolf.github.io"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 Xiaobin&#39;s Notes
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
