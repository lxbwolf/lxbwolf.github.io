<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-e8-b7-91-e9-81-93-e9-97-ae-e9-a2-98" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/12/e8-b7-91-e9-81-93-e9-97-ae-e9-a2-98/" class="article-date">
  <time datetime="2019-03-12T15:20:56.000Z" itemprop="datePublished">2019-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/12/e8-b7-91-e9-81-93-e9-97-ae-e9-a2-98/">跑道问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>25个人，每5个人一个跑道，最少经过几次比赛，得到前三名</p>
<p><strong>初步思路</strong>: 第一步, 每5人一组, 全跑完后, 每组的后两名一定不在最终要的”前三名” 结果内, 所以每组可以排除2人, 剩下25-2_5=15人. 共经过5次比赛 第二步, 剩下的15人, 每5人一组, 跑完后, 每组淘汰2人, 剩下 15-2_3=9人. 经过3次比赛 第三步, 剩下的9个人分两组, A组5人B组4人, 跑完后, A组淘汰2人, B组淘汰1人, 剩下 9-2-1=6人. 经过2次比赛 第四步, 剩下的6人分两组, C组5人D组1人, A组跑完后, 淘汰2人, B组1人不需要跑, 剩下 6-2=4人. 经过1次比赛 第五步, 剩下的4个人, 跑一次, 得出前三名. 经过1次比赛 共经过 5+3+2+1+1=12次</p>
<p>在第一步中, 5组全跑完后, 每组的第一名再跑一次, 按速度快慢分别标为A1 B1 C1 D1 E1. 则A1 为25人中的第一名. 经过5+1=6次比赛 在第6次比赛中, 落后的两名D1 和E1, 可以被排除, 进而整个D组和E组都可以排除. C1不可能是第二名. 第二名可能的人员有A2 B1, 第三名可能的人员有 B1 A3 B2 A2 C1. 第二名的集合是第三名集合的子集. 第三名所有可能的5个人跑一次, 得出第二名和第三名.经过1次比赛 共经过7次比赛</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/12/e8-b7-91-e9-81-93-e9-97-ae-e9-a2-98/" data-id="ck10vanx60018zxz2y3j3qdtb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e6-9e-b6-e6-9e-84-e8-ae-be-e8-ae-a1-e5-8e-9f-e5-88-99" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/01/e6-9e-b6-e6-9e-84-e8-ae-be-e8-ae-a1-e5-8e-9f-e5-88-99/" class="article-date">
  <time datetime="2019-03-01T14:52:22.000Z" itemprop="datePublished">2019-03-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Design/">Design</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/01/e6-9e-b6-e6-9e-84-e8-ae-be-e8-ae-a1-e5-8e-9f-e5-88-99/">架构设计原则</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="GRASP-通用职责分配软件模式"><a href="#GRASP-通用职责分配软件模式" class="headerlink" title="GRASP 通用职责分配软件模式"></a>GRASP 通用职责分配软件模式</h4><p>来自 Craig Larman 的软件设计书《UML 和模式应用》[附录 1]，Larman 在书中提出软件设计的关键任务是职责分配，并提炼总结出 9 种 (5 种核心 +4 种扩展) 软件职责分配模式，这些模式是比 GoF 设计模式更抽象的元模式。</p>
<p><strong>1. 信息专家 (Information Expert)</strong></p>
<p>为对象分配职责的通用原则 – 把职责分配给拥有足够信息可以履行职责的专家</p>
<p><strong>2. 创建者 (Creator)</strong></p>
<p>将创建 A 的职责赋给 B，如果至少下面一种情况为真：</p>
<ul>
<li>B“包含”或者聚合 A</li>
<li>B 记录 A 的实例</li>
<li>B 密切地使用 A</li>
<li>B 拥有 A 的初始化数据</li>
</ul>
<p><strong>3. 低耦合 (Low Coupling)</strong></p>
<p>赋予职责使得对象间的耦合度尽可能低，最小化对象间的依赖和变更影响，最大化重用。</p>
<p><strong>4. 高内聚 (High Cohesion)</strong></p>
<p>赋予职责使得每个对象的职责尽可能保持聚焦和单一，易于管理和理解。</p>
<p><strong>5. 控制器 (Controller)</strong></p>
<p>把职责赋予系统、设备或者子系统的表示类 (门面控制器)，或者某个用例的表示类 (用例控制器)，让控制器接收事件并协调整个系统的运作。</p>
<p><strong>6. 多态 (Polymorphism)</strong></p>
<p>将职责分配给多个具有同名方法的多态子类，运行时根据需要动态切换子类，让系统行为变得可插拔。</p>
<p><strong>7. 纯虚构 (Pure Fabrication)</strong></p>
<p>针对真实问题域中不存在，但是设计建模中有用的概念，设计虚构类并赋予职责。</p>
<p><strong>8. 间接 (Indirection)</strong></p>
<p>在两个或者多个对象间有交互的情况下，为避免直接耦合，提高重用性，创建中间类并赋予职责，对象的交互交由中间类协调。</p>
<p><strong>9. 受保护的变化 (Protected Variation)</strong></p>
<p>简单讲就是封装变化。识别系统中可能的不稳定或者变化，在不稳定组件上创建稳定的抽象接口，将可能的变化封装在接口之后，使得系统内部的不稳定或者变化不会对系统的其它部分产生不良影响。</p>
<h4 id="SOLID-面向对象设计原则"><a href="#SOLID-面向对象设计原则" class="headerlink" title="SOLID 面向对象设计原则"></a>SOLID 面向对象设计原则</h4><p>S.O.L.I.D 是面向对象设计和编程 (OOD&amp;OOP) 中几个重要原则的首字母缩写，受 Robert Martin 推崇。</p>
<p><strong>1. 单一职责原则 (The Single Responsibility Principle)</strong></p>
<p>修改某个类的理由应该只有一个，如果超过一个，说明类承担不止一个职责，要视情况拆分。</p>
<p><strong>2. 开放封闭原则 (The Open Closed Principle)</strong></p>
<p>软件实体应该对扩展开放，对修改封闭。一般不要直接修改类库源码（即使你有源代码），通过继承等方式扩展。</p>
<p><strong>3. 里氏替代原则 (The Liskov Substitution Principle)</strong></p>
<p>当一个子类的实例能够被替换成任何超类的实例时，它们之间才是真正的 is-a 关系。</p>
<p><strong>4. 依赖倒置原则 (The Dependency Inversion Principle)</strong></p>
<p>高层模块不应该依赖于底层模块，二者都应该依赖于抽象。换句话说，依赖于抽象，不要依赖于具体实现。比方说，你不会把电器电源线焊死在室内电源接口处，而是用标准的插头插在标准的插座 (抽象) 上。</p>
<p><strong>5. 接口分离原则 (The Interface Segregation Principle)</strong></p>
<p>不要强迫用户去依赖它们不使用的接口。换句话说，使用多个专门的接口比使用单一的大而全接口要好。</p>
<p><strong>备注</strong></p>
<ol>
<li>高内聚 + 低耦合，就像道中的一阴一阳，是所有其它 OO 设计原则的原则 (元原则)，其它设计原则都是在这两个基础上泛化衍生出来的。</li>
<li>上述原则虽然是针对 OO 设计和编程提出，但是对于大规模系统架构仍然适用。比如，微服务架构就体现了：</li>
<li><ul>
<li>单一职责：一个微服务尽可能要职责单一，提供的接口也尽可能单一 (接口分离原则)，安全 / 路由 / 限流等跨横切面的关注点 (Cross-Cutting Concerns) 由独立网关负责，体现关注分离 (Separation of Concerns)。</li>
</ul>
</li>
</ol>
<ul>
<li>信息专家：当不确定哪个团队应该负责某个微服务时，一般原则也是谁拥有数据谁负责，基于有界上下文 Bounded Context（一般是边界比较清晰的领域数据源）构建微服务。</li>
<li>松散耦合：服务之间通过 HTTP/JSON 等轻量机制通信，服务之间不强耦合。</li>
<li>受保护的变化和依赖倒置：服务之间只依赖抽象接口，实现可能随时变化。</li>
<li>间接：网关在外面的客户端和内部的服务之间增加了一层间接，使两者不强耦合，可以相互独立演化。</li>
</ul>
<ol>
<li>作为架构师或者设计师，有两个设计能力是需要重点培养的，也是最难和最能体现架构设计水平的：</li>
<li><ul>
<li>合理的职责分配能力，也就是每个类 / 组件 / 子系统应该承担什么职责，如何保证职责单一，它们之间如何协作；</li>
</ul>
</li>
</ol>
<ul>
<li>系统抽象和核心领域建模能力，需要深入一线业务域。</li>
</ul>
<h3 id="分布式系统架构设计原则和理论"><a href="#分布式系统架构设计原则和理论" class="headerlink" title="分布式系统架构设计原则和理论"></a>分布式系统架构设计原则和理论</h3><h4 id="AKF-架构原则"><a href="#AKF-架构原则" class="headerlink" title="AKF 架构原则"></a>AKF 架构原则</h4><p>这 15 个架构原则来自《架构即未来 (The Art of Scalability)》[附录 2] 一书，作者马丁 L. 阿伯特和迈克尔 T. 费舍尔分别是 eBay 和 PayPal 的前 CTO，他们经历过 eBay 和 PayPal 大规模分布式电商平台的架构演进，在一线实战经验的基础上总结并提炼出 15 条架构原则：</p>
<p><strong>1.N + 1 设计</strong></p>
<p>永远不要少于两个，通常为三个。比方说无状态的 Web/API 一般部署至少&gt;=2 个。</p>
<p><strong>2. 回滚设计</strong></p>
<p>确保系统可以回滚到以前发布过的任何版本。可以通过发布系统保留历史版本，或者代码中引入动态开关切换机制 (Feature Switch)。</p>
<p><strong>3. 禁用设计</strong></p>
<p>能够关闭任何发布的功能。新功能隐藏在动态开关机制 (Feature Switch) 后面，可以按需一键打开，如发现问题随时关闭禁用。</p>
<p><strong>4. 监控设计</strong></p>
<p>在设计阶段就必须考虑监控，而不是在实施完毕之后补充。例如在需求阶段就要考虑关键指标监控项，这就是度量驱动开发 (Metrics Driven Development) 的理念。</p>
<p><strong>5. 设计多活数据中心</strong></p>
<p>不要被一个数据中心的解决方案把自己限制住。当然也要考虑成本和公司规模发展阶段。</p>
<p><strong>6. 使用成熟的技术</strong></p>
<p>只用确实好用的技术。商业组织毕竟不是研究机构，技术要落地实用，成熟的技术一般坑都被踩平了，新技术在完全成熟前一般需要踩坑躺坑。</p>
<p><strong>7. 异步设计</strong></p>
<p>能异步尽量用异步，只有当绝对必要或者无法异步时，才使用同步调用。</p>
<p><strong>8. 无状态系统</strong></p>
<p>尽可能无状态，只有当业务确实需要，才使用状态。无状态系统易于扩展，有状态系统不易扩展且状态复杂时更易出错。</p>
<p><strong>9. 水平扩展而非垂直升级</strong></p>
<p>永远不要依赖更大、更快的系统。一般公司成长到一定阶段普遍经历过买更大、更快系统的阶段，即使淘宝当年也买小型机扛流量，后来扛不住才体会这样做不 scalable，所以才有后来的去 IOE 行动。</p>
<p><strong>10. 设计时至少要有两步前瞻性</strong></p>
<p>在扩展性问题发生前考虑好下一步的行动计划。架构师的价值就体现在这里，架构设计对于流量的增长要有提前量。</p>
<p><strong>11. 非核心则购买</strong></p>
<p>如果不是你最擅长，也提供不了差异化的竞争优势则直接购买。避免 Not Invented Here 症状，避免凡事都要重造轮子，毕竟达成业务目标才是重点。</p>
<p><strong>12. 使用商品化硬件</strong></p>
<p>在大多数情况下，便宜的就是最好的。这点和第 9 点是一致的，通过商品化硬件水平扩展，而不是买更大、更快的系统。</p>
<p><strong>13. 小构建、小发布和快试错</strong></p>
<p>全部研发要小构建，不断迭代，让系统不断成长。这个和微服务理念一致。</p>
<p><strong>14. 隔离故障</strong></p>
<p>实现故障隔离设计，通过断路保护避免故障传播和交叉影响。通过舱壁泳道等机制隔离失败单元 (Failure Unit)，一个单元的失败不至影响其它单元的正常工作。</p>
<p><strong>15. 自动化</strong></p>
<p>设计和构建自动化的过程。如果机器可以做，就不要依赖于人。自动化是 DevOps 的基础。</p>
<p><strong>备注</strong></p>
<ol>
<li>这 15 条架构原则基本上是 eBay 在发展，经历过流量数量级增长冲击过程中，通过不断踩坑踩出来的，是干货中的干货。消化吸收这 15 条原则，基本可保系统架构不会有原则性问题。</li>
<li>这 15 条原则同样适用于现在的微服务架构。eBay 发展较早，它内部其实很早 (差不多 2010 年前) 就已形成完善的微服务生态，只是没有提出微服务这个概念。</li>
<li>这 15 条原则可根据 TTM(Time To Market)，可用性 / 可扩展性 / 质量，成本 / 效率分布在三个环内，如下图所示。</li>
</ol>
<h4 id="12-要素应用"><a href="#12-要素应用" class="headerlink" title="12 要素应用"></a>12 要素应用</h4><p>基于上百万应用的托管和运营经验，创始人 Adam Wiggins 提出了 12 要素应用宣言 。简单讲，满足这 12 个要素的应用是比较容易云化并居住在 Heroku 平台上的。</p>
<p><strong>1. 基准代码</strong></p>
<p>一份基准代码，多份部署。如果用镜像部署方式，则一个镜像可以部署到多个环境 (测试，预发，生产)，而不是给每个环境制作一个不同镜像。</p>
<p><strong>2. 依赖</strong></p>
<p>显式声明依赖。如果用镜像部署，则一般依赖被直接打在镜像中，或者声明在 docker file 中。</p>
<p><strong>3. 配置</strong></p>
<p>在环境中存储配置。在 Heroku 或者类似的 PaaS 平台上，配置一般是推荐注入到环境变量中的。现在采用集中式配置中心也是一种流行方式。</p>
<p><strong>4. 后端服务</strong></p>
<p>把后端服务 (例如缓存，数据库，MQ 等) 当作附加资源，相关配置和连接字符串通过环境变量注入，或者采用配置中心。</p>
<p><strong>5. 构建、发布和运行</strong></p>
<p>严格分离构建和运行。如果使用镜像部署，则构建、发布 / 运行是通过镜像这种中间格式严格分离的。</p>
<p><strong>6. 进程</strong></p>
<p>一个或者多个无状态的进程运行应用。容器运行时相当于进程，适用于无状态 Web/API。</p>
<p><strong>7. 端口绑定</strong></p>
<p>通过端口绑定提供服务。容器也是通过端口绑定对外提供服务。</p>
<p><strong>8. 并发</strong></p>
<p>通过进程模型进行扩展。容器运行时相当于进程，通过起多个容器可以任意扩展并发数量。</p>
<p><strong>9. 易处理</strong></p>
<p>快速启动和优雅终止可最大化健壮性。docker 容器支持秒级启动和关闭。</p>
<p><strong>10. 开发环境和线上环境等价</strong></p>
<p>尽可能保持开发、测试、预发和线上环境相同。容器可以保证容器内运行时环境的一致性，还需要保证不同环境的一致性，例如不同环境内的操作系统，负载均衡，服务发现，后台服务，监控告警等要尽可能一致。</p>
<p><strong>11. 日志</strong></p>
<p>把日志当作数据流。Heroku 不支持本地文件，所以必须以流方式把日志输送到后台日志服务。除了日志以外还要补充考虑 metrics 流的采集和输送。</p>
<p><strong>12. 管理进程</strong></p>
<p>后台管理任务当作一次性的进程。其实相当于在 Heroku 上以独立进程方式运行任务 Job。</p>
<p><strong>备注</strong></p>
<ol>
<li>12 要素应用也是当前云原生应用 (Cloud Native App) 的参考标准，也称为云应用迁移原则。满足这 12 个要素的应用，可以比较顺利迁移到各种云平台 (Kubernetes, Marathon, Cloud Foundry 等) 上。</li>
<li>对于面临企业遗留应用改造和云化迁移的架构师，可以重点参考这 12 条迁移原则。</li>
<li>Docker 容器技术可以认为是为云迁移量身定制的技术。容器化是后续云迁移的捷径，所以遗留应用改造可以先想办法做到容器化。</li>
</ol>
<h4 id="CAP-定理"><a href="#CAP-定理" class="headerlink" title="CAP 定理"></a>CAP 定理</h4><p>2000 年 7 月，加州大学伯克利分校的 Eric Brewer 教授在 ACM PODC 会议上提出 CAP 猜想。2 年后，麻省理工学院的 Seth Gilbert 和 Nancy Lynch 从理论上证明了 CAP。之后，CAP 理论正式成为分布式计算领域的公认定理。</p>
<p>CAP 认为：一个分布式系统最多同时满足一致性 (Consistency)，可用性 (Availability) 和分区容忍性 (Partition Tolerance) 这三项中的两项。</p>
<p><strong>1.一致性 (Consistency)</strong></p>
<p>一致性指“all nodes see the same data at the same time”，即更新操作成功，所有节点在同一时间的数据完全一致。</p>
<p><strong>2.可用性 (Availability)</strong></p>
<p>可用性指“Reads and writes always succeed”，即服务一直可用，而且响应时间正常。</p>
<p><strong>3.分区容忍性 (Partition tolerance)</strong></p>
<p>分区容忍性指“the system continue to operate despite arbitrary message loss or failure of part of the system.”，即分布式系统在遇到某节点或网络分区故障时，仍然能够对外提供满足一致性和可用性的服务。</p>
<h4 id="BASE-理论"><a href="#BASE-理论" class="headerlink" title="BASE 理论"></a>BASE 理论</h4><p>eBay 架构师 Dan Pritchett 基于对大规模分布式系统的实践总结，在 ACM 上发表文章提出了 BASE 理论，BASE 理论是对于 CAP 理论的延伸，核心思想是即使无法做到强一致性 (Strong Consistency，CAP 中的一致性指强一致性)，但是可以采用适当的方式达到最终一致性 (Eventual Consistency)。</p>
<p>BASE 指基本可用 (Basically Available)、软状态 (Soft State) 和最终一致性 (Eventual Consistency)。</p>
<p><strong>1.基本可用 (Basically Available)</strong></p>
<p>基本可用是指分布式系统在出现故障时，允许损失部分可用性，即保证核心可用。比如服务降级。</p>
<p><strong>2.软状态 (Soft State)</strong></p>
<p>软状态是指允许系统存在中间状态，而该中间状态不会影响系统的整体可用性。分布式存储中一般一份数据至少存三个副本，允许不同节点间副本同步的延迟就是软状态的体现。</p>
<p><strong>3.最终一致性 (Eventual Consistency)</strong></p>
<p>最终一致性是指系统中的所有数据副本经过一段时间后，最终能够达成一致状态。弱一致性和强一致性相反，最终一致性是弱一致性的一种特殊情况。</p>
<p><strong>备注</strong></p>
<ol>
<li>CAP 和 BASE 理论可以抠得很深，背后甚至有很复杂的数学证明。我理解得相对简单浅显：性能、高可用、不丢数据和数据一致性对分布式系统来说一般是强需求，随着流量的增长，复制和分区在所难免：</li>
<li><ul>
<li>复制 (replication)：数据在多个节点上存多份保证不丢和高可用；</li>
</ul>
</li>
</ol>
<ul>
<li>分区 (partition)：数据按某个纬度切分分布在不同节点上分摊流量压力保证高性能，同时也是为了降低每个节点的复杂性。例如数据库的分库分表，系统拆分微服务化也是一种分区。这两者都会带来一致性问题，一致性在时间上有一点妥协的余地 - 即是最终一致性；时间上要求强一致的话，只有可用性可以适当折中。系统架构的游戏很大部分是和状态一致性作斗争的游戏。</li>
</ul>
<ol>
<li>选择使用分布式产品时，比如 NoSQL 数据库，你需要了解它在 CAP 环中所在的位置，确保它满足你的场景需要。</li>
</ol>
<h3 id="组织和系统改进原则"><a href="#组织和系统改进原则" class="headerlink" title="组织和系统改进原则"></a>组织和系统改进原则</h3><h4 id="康威法则"><a href="#康威法则" class="headerlink" title="康威法则"></a>康威法则</h4><p>Melvin Conway 在 1967 年提出所谓康威法则 ，指出组织架构和系统架构之间有一种隐含的映射关系：</p>
<p>Organization which design system […] are constrained to produce designs which are copies of the communication structures of these organization. 设计系统的组织其产生的设计等价于组织间的沟通结构。</p>
<p>康威法则也可以倒过来阐述：</p>
<p>Conway’s law reversed：You won’t be able to successfully establish an efficient organization structure that is not supported by your system design(architecture)。 如果系统架构不支持，你无法建立一个高效的组织；同样，如果你的组织架构不支持，你也无法建立一个高效的系统架构。</p>
<h4 id="系统改进三原则"><a href="#系统改进三原则" class="headerlink" title="系统改进三原则"></a>系统改进三原则</h4><p>IT 运维管理畅销书《凤凰项目》[附录 8] 的作者 Gene Kim 在调研了众多高效能 IT 组织后总结出支撑 DevOps 运作的三个原理 (The Three Ways: The Principles Underpinning DevOps)[附录 9]，我认为也是系统改进提升的一般性原理 [附录 7]，见下图：</p>
<p><strong>原理一：系统思考 (System Thinking)</strong></p>
<p>开发驱动的组织，其能力不是制作软件，而是持续的交付客户价值。价值从业务需求开始，经过研发测试，到部署运维，依次流动，并最终以服务形式交付到客户手中。整个价值链流速并不依赖单个部分 (团队或个人) 的杰出工作，而是受整个价值链最薄弱环节 (瓶颈) 的限制。所以局部优化通常无效，反而招致全局受损。</p>
<p>Gene Kim 特别指出：Any improvements made anywhere besides the bottleneck are an illusion. 在瓶颈之外的任何优化提升都只是幻象。</p>
<p><strong>原理二：强化反馈环 (Amplify Feedback Loops)</strong></p>
<p>过程改进常常通过加强反馈环来达成。原理二强调企业和客户之间、组织团队间、流程上和系统内的反馈环。没有测量就没有提升，反馈要以测量数据为准，通过反馈数据优化改进系统。</p>
<p><strong>原理三：持续试验和学习的文化 (Culture of Continual Experimentation And Learning)</strong></p>
<p>在企业管理文化层面强调勇于试错和持续试验、学习和改进的文化。</p>
<p><strong>备注</strong></p>
<ol>
<li>康威法则给我们的启示：系统架构和组织架构之间有隐含的映射关系，你不能单方面改变一方的结构，调整时必须两边联动。系统架构如果是耦合的，就很难组织分散式的团队结构，两边映射不起来，团队之间容易摩擦导致生产率下降。所以一般先按业务边界对单块应用进行解耦拆分，同时做相应的团队拆分，使两边可以映射，每个团队可以独立开发、测试和部署各自的微服务，进而提升生产率。这就是近年流行的微服务架构背后的组织原则。详见我之前发表的文章《企业的组织架构是如何影响技术架构的》[附录 6]。</li>
<li>系统思考要求我们加强团队合作，培养流式思维和瓶颈约束思维，找出瓶颈并针对性地优化。在研发型组织中，常见的系统瓶颈如运维机器资源提供 (Provisioning) 缓慢，发布流程繁琐容易出错，开发 / 测试／UAT 环境缺失或不完善，遗留系统耦合历史负担重，基础研发平台薄弱等等。这些瓶颈点特别需要关注优化。</li>
<li>反馈原理要求我们关注基于数据的反馈，技术上的手段包括大数据分析和系统各个层次的测量监控。没有测量就没有反馈，没有反馈就没有提升。</li>
<li>在管理文化层面：</li>
<li><ul>
<li>管理层要承认企业内部近 50% 的创新或流程改进项目是有可能失败的，即使失败，员工不会受到责罚，鼓励持续的试验和从中学习；</li>
</ul>
</li>
</ol>
<ul>
<li>管理层要有技术偿债意识，勿追求 100% 员工利用率，要预留 20%~30% 的时间给员工做创新和系统改进提升项目</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/01/e6-9e-b6-e6-9e-84-e8-ae-be-e8-ae-a1-e5-8e-9f-e5-88-99/" data-id="ck10vao080058zxz2s2lvz5vn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e7-a7-92-e6-9d-80-e7-b3-bb-e7-bb-9f-e4-bc-98-e5-8c-96-e6-80-9d-e8-b7-af" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/26/e7-a7-92-e6-9d-80-e7-b3-bb-e7-bb-9f-e4-bc-98-e5-8c-96-e6-80-9d-e8-b7-af/" class="article-date">
  <time datetime="2019-02-26T14:13:12.000Z" itemprop="datePublished">2019-02-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Design/">Design</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/26/e7-a7-92-e6-9d-80-e7-b3-bb-e7-bb-9f-e4-bc-98-e5-8c-96-e6-80-9d-e8-b7-af/">秒杀系统优化思路</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一、秒杀业务为什么难做"><a href="#一、秒杀业务为什么难做" class="headerlink" title="一、秒杀业务为什么难做"></a>一、秒杀业务为什么难做</h3><p>1）im系统，例如qq或者微博，每个人都读自己的数据（好友列表、群列表、个人信息）； 2）微博系统，每个人读你关注的人的数据，一个人读多个人的数据； 3）秒杀系统，库存只有一份，所有人会在集中的时间读和写这些数据，多个人读一个数据。</p>
<p>例如：小米手机每周二的秒杀，可能手机只有1万部，但瞬时进入的流量可能是几百几千万。 又例如：12306抢票，票是有限的，库存一份，瞬时流量非常多，都读相同的库存。读写冲突，锁非常严重，这是秒杀业务难的地方。那我们怎么优化秒杀业务的架构呢？</p>
<h3 id="二、优化方向"><a href="#二、优化方向" class="headerlink" title="二、优化方向"></a>二、优化方向</h3><p>优化方向有两个（今天就讲这两个点）： （1）将请求尽量拦截在系统上游（不要让锁冲突落到数据库上去）。传统秒杀系统之所以挂，请求都压倒了后端数据层，数据读写锁冲突严重，并发高响应慢，几乎所有请求都超时，流量虽大，下单成功的有效流量甚小。以12306为例，一趟火车其实只有2000张票，200w个人来买，基本没有人能买成功，请求有效率为0。</p>
<p>（2）充分利用缓存，秒杀买票，这是一个典型的读多写少的应用场景，大部分请求是车次查询，票查询，下单和支付才是写请求。一趟火车其实只有2000张票，200w个人来买，最多2000个人下单成功，其他人都是查询库存，写比例只有0.1%，读比例占99.9%，非常适合使用缓存来优化。好，后续讲讲怎么个“将请求尽量拦截在系统上游”法，以及怎么个“缓存”法，讲讲细节。</p>
<h3 id="三、常见秒杀架构"><a href="#三、常见秒杀架构" class="headerlink" title="三、常见秒杀架构"></a>三、常见秒杀架构</h3><p>（1）浏览器端，最上层，会执行到一些JS代码 （2）站点层，这一层会访问后端数据，拼html页面返回给浏览器 （3）服务层，向上游屏蔽底层数据细节，提供数据访问 （4）数据层，最终的库存是存在这里的，mysql是一个典型（当然还有会缓存）</p>
<h3 id="四、各层次优化细节"><a href="#四、各层次优化细节" class="headerlink" title="四、各层次优化细节"></a>四、各层次优化细节</h3><h4 id="第一层，客户端怎么优化（浏览器层，APP层）"><a href="#第一层，客户端怎么优化（浏览器层，APP层）" class="headerlink" title="第一层，客户端怎么优化（浏览器层，APP层）"></a>第一层，客户端怎么优化（浏览器层，APP层）</h4><p>微信的摇一摇抢红包，每次摇一摇，就会往后端发送请求么？下单抢票的场景，点击了“查询”按钮之后，系统那个卡呀，进度条涨的慢呀，作为用户，我会不自觉的再去点击“查询”，对么？继续点，继续点，点点点。。。有用么？平白无故的增加了系统负载，一个用户点5次，80%的请求是这么多出来的，怎么整？</p>
<p>（a）产品层面，用户点击“查询”或者“购票”后，按钮置灰，禁止用户重复提交请求； （b）JS层面，限制用户在x秒之内只能提交一次请求；</p>
<p>APP层面，可以做类似的事情，虽然你疯狂的在摇微信，其实x秒才向后端发起一次请求。这就是所谓的“将请求尽量拦截在系统上游”，越上游越好，浏览器层，APP层就给拦住，这样就能挡住80%+的请求，这种办法只能拦住普通用户（但99%的用户是普通用户）对于群内的高端程序员是拦不住的。firebug一抓包，http长啥样都知道，js是万万拦不住程序员写for循环，调用http接口的，这部分请求怎么处理？</p>
<h4 id="第二层，站点层面的请求拦截"><a href="#第二层，站点层面的请求拦截" class="headerlink" title="第二层，站点层面的请求拦截"></a>第二层，站点层面的请求拦截</h4><p>怎么拦截？怎么防止程序员写for循环调用，有去重依据么？ip？cookie-id？…想复杂了，这类业务都需要登录，用uid即可。在站点层面，对uid进行请求计数和去重，甚至不需要统一存储计数，直接站点层内存存储（这样计数会不准，但最简单）。一个uid，5秒只准透过1个请求，这样又能拦住99%的for循环请求。</p>
<p>5s只透过一个请求，其余的请求怎么办？缓存，页面缓存，同一个uid，限制访问频度，做页面缓存，x秒内到达站点层的请求，均返回同一页面。同一个item的查询，例如车次，做页面缓存，x秒内到达站点层的请求，均返回同一页面。如此限流，既能保证用户有良好的用户体验（没有返回404）又能保证系统的健壮性（利用页面缓存，把请求拦截在站点层了）。</p>
<p>页面缓存不一定要保证所有站点返回一致的页面，直接放在每个站点的内存也是可以的。优点是简单，坏处是http请求落到不同的站点，返回的车票数据可能不一样，这是站点层的请求拦截与缓存优化。</p>
<p>好，这个方式拦住了写for循环发http请求的程序员，有些高端程序员（黑客）控制了10w个肉鸡，手里有10w个uid，同时发请求（先不考虑实名制的问题，小米抢手机不需要实名制），这下怎么办，站点层按照uid限流拦不住了。</p>
<h4 id="第三层-服务层来拦截（反正就是不要让请求落到数据库上去）"><a href="#第三层-服务层来拦截（反正就是不要让请求落到数据库上去）" class="headerlink" title="第三层 服务层来拦截（反正就是不要让请求落到数据库上去）"></a>第三层 服务层来拦截（反正就是不要让请求落到数据库上去）</h4><p>服务层怎么拦截？大哥，我是服务层，我清楚的知道小米只有1万部手机，我清楚的知道一列火车只有2000张车票，我透10w个请求去数据库有什么意义呢？没错，请求队列！</p>
<p>对于写请求，做请求队列，每次只透有限的写请求去数据层（下订单，支付这样的写业务）</p>
<p>1w部手机，只透1w个下单请求去db</p>
<p>3k张火车票，只透3k个下单请求去db</p>
<p>如果均成功再放下一批，如果库存不够则队列里的写请求全部返回“已售完”。</p>
<p>对于读请求，怎么优化？cache抗，不管是memcached还是redis，单机抗个每秒10w应该都是没什么问题的。如此限流，只有非常少的写请求，和非常少的读缓存mis的请求会透到数据层去，又有99.9%的请求被拦住了。</p>
<p>当然，还有业务规则上的一些优化。回想12306所做的，分时分段售票，原来统一10点卖票，现在8点，8点半，9点，…每隔半个小时放出一批：将流量摊匀。</p>
<p>其次，数据粒度的优化：你去购票，对于余票查询这个业务，票剩了58张，还是26张，你真的关注么，其实我们只关心有票和无票？流量大的时候，做一个粗粒度的“有票”“无票”缓存即可。</p>
<p>第三，一些业务逻辑的异步：例如下单业务与 支付业务的分离。这些优化都是结合 业务 来的，我之前分享过一个观点“一切脱离业务的架构设计都是耍流氓”架构的优化也要针对业务。</p>
<h4 id="第四层-最后是数据库层"><a href="#第四层-最后是数据库层" class="headerlink" title="第四层 最后是数据库层"></a>第四层 最后是数据库层</h4><p>浏览器拦截了80%，站点层拦截了99.9%并做了页面缓存，服务层又做了写请求队列与数据缓存，每次透到数据库层的请求都是可控的。db基本就没什么压力了，闲庭信步，单机也能扛得住，还是那句话，库存是有限的，小米的产能有限，透这么多请求来数据库没有意义。</p>
<p>全部透到数据库，100w个下单，0个成功，请求有效率0%。透3k个到数据，全部成功，请求有效率100%。</p>
<h3 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h3><p>上文应该描述的非常清楚了，没什么总结了，对于秒杀系统，再次重复下我个人经验的两个架构优化思路： （1）尽量将请求拦截在系统上游（越上游越好）； （2）读多写少的常用多使用缓存（缓存抗读压力）；</p>
<p>浏览器和APP：做限速</p>
<p>站点层：按照uid做限速，做页面缓存</p>
<p>服务层：按照业务做写请求队列控制流量，做数据缓存</p>
<p>数据层：闲庭信步</p>
<p>并且：结合业务做优化</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/26/e7-a7-92-e6-9d-80-e7-b3-bb-e7-bb-9f-e4-bc-98-e5-8c-96-e6-80-9d-e8-b7-af/" data-id="ck10vanwz000uzxz2wewim6ha" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-e5-88-b6-e4-bd-9c-e7-a7-8d-e5-ad-90" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/01/e5-88-b6-e4-bd-9c-e7-a7-8d-e5-ad-90/" class="article-date">
  <time datetime="2018-11-01T13:20:18.000Z" itemprop="datePublished">2018-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Rasp/">Rasp</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/01/e5-88-b6-e4-bd-9c-e7-a7-8d-e5-ad-90/">制作种子</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.下载mktorrent <code>git clone https://github.com/lxbwolf/mktorrent.git</code> 2.下载完成后进入到文件夹里面 例如：<code>cd mktorrent</code>（如果是根目录的话） 3. <code>make</code> 4. <code>make install</code> 5. 默认安装目录位于<code>/usr/local/bin</code>，使用cd命令，从默认的/root路径切换到要制作成种子的文件上一级。 例如<code>cd /Downloads</code> 6. 制作种子命令为： <code>mktorrent -v -p -l 22 -a tracker_address -o name.torrent file_name</code> 参数说明： tracker_address为你要发布的网站的tracker。 name.torrent为对生成torrent种子文件的命名，规则为：xxx.torrent。 file_name为你要做种的文件或文件夹。避免含有空格。 7. 等待一会儿会提示做种完成，在当前目录下即可找到。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/01/e5-88-b6-e4-bd-9c-e7-a7-8d-e5-ad-90/" data-id="ck10vanwo000czxz22ven831g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e6-a0-91-e8-8e-93-e6-b4-be-e6-90-ad-e5-bb-ba-e8-bf-85-e9-9b-b7-e8-bf-9c-e7-a8-8b-e4-b8-8b-e8-bd-bd-e6-9c-8d-e5-8a-a1-e5-99-a8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/01/e6-a0-91-e8-8e-93-e6-b4-be-e6-90-ad-e5-bb-ba-e8-bf-85-e9-9b-b7-e8-bf-9c-e7-a8-8b-e4-b8-8b-e8-bd-bd-e6-9c-8d-e5-8a-a1-e5-99-a8/" class="article-date">
  <time datetime="2018-11-01T12:09:55.000Z" itemprop="datePublished">2018-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Rasp/">Rasp</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/01/e6-a0-91-e8-8e-93-e6-b4-be-e6-90-ad-e5-bb-ba-e8-bf-85-e9-9b-b7-e8-bf-9c-e7-a8-8b-e4-b8-8b-e8-bd-bd-e6-9c-8d-e5-8a-a1-e5-99-a8/">树莓派搭建迅雷远程下载服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-下载路由器固件"><a href="#1-下载路由器固件" class="headerlink" title="1. 下载路由器固件"></a>1. 下载路由器固件</h3><p>从 <a href="http://luyou.xunlei.com/forum-51-1.html" target="_blank" rel="noopener">官网</a> 或者 百度网盘</p>
<p>解压到指定目录如 <code>/root/xunlei</code> 进入目录 执行<code>./portal</code> 稍等片刻，会在最后输出一个激活码</p>
<h3 id="2-在迅雷远程下载页面绑定树莓派"><a href="#2-在迅雷远程下载页面绑定树莓派" class="headerlink" title="2. 在迅雷远程下载页面绑定树莓派"></a>2. 在迅雷远程下载页面绑定树莓派</h3><p>登录<a href="http://yuancheng.xunlei.com/login.html" target="_blank" rel="noopener">迅雷远程下载</a>主页,登录之后，左侧会有一个添加按钮，点击添加按钮</p>
<p>不需要选择绑定设备类型, 直接将树莓派上获得的激活码填入框中，点击绑定后左侧就会出现树莓派对应的设备列表了，但是，如果我们此时就在右侧点击新建之后会发现,弹出的新建页面中会提示找不到挂载磁盘</p>
<h3 id="3-自定义迅雷的下载目录"><a href="#3-自定义迅雷的下载目录" class="headerlink" title="3. 自定义迅雷的下载目录"></a>3. 自定义迅雷的下载目录</h3><p>进入/mnt目录，创建目录TDDOWNLOAD(名字随意) 执行<code>mount --bind /data/TDDOWNLOAD /mnt/TDDOWNLOAD</code></p>
<p>其中/data/TDDOWNLOAD就是自定义的下载目录，你可以指定为其他任何目录。</p>
<p>然后再刚刚迅雷固件的解压目录下创建目录etc,同时在etc下创建文件thunder_mounts.cfg,编辑此文件, 写入内容</p>
<pre><code>avaliable_mount_path_pattern
{
/mnt/TDDOWNLOAD
}</code></pre><p>重启路由器固件 <code>./root/xunlei/portal</code> 再进入远程下载界面新建下载就没有了没挂载磁盘的提示了</p>
<h3 id="4-迅雷路由器固件开机启动"><a href="#4-迅雷路由器固件开机启动" class="headerlink" title="4. 迅雷路由器固件开机启动"></a>4. 迅雷路由器固件开机启动</h3><p>在/etc/init.d/下新建xunlei脚本，写入:</p>
<pre><code>#!/bin/sh
#
# Xunlei initscript
#
### BEGIN INIT INFO
# Provides:          xunlei
# Required-Start:    $network $local_fs $remote_fs
# Required-Stop::    $network $local_fs $remote_fs
# Should-Start:      $all
# Should-Stop:       $all
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start xunlei at boot time
# Description:       A downloader
### END INIT INFO

do_start()
{
./root/xunlei/portal
}

do_stop()
{
./root/xunlei/portal -s
}

case &quot;$1&quot; in
start)
do_start
;;
stop)
do_stop
;;
esac</code></pre><p>然后将该脚本加入默认自启动中 <code>update-rc.d xunlei defaults</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/01/e6-a0-91-e8-8e-93-e6-b4-be-e6-90-ad-e5-bb-ba-e8-bf-85-e9-9b-b7-e8-bf-9c-e7-a8-8b-e4-b8-8b-e8-bd-bd-e6-9c-8d-e5-8a-a1-e5-99-a8/" data-id="ck10vanww000nzxz2xglviapv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e6-a0-91-e8-8e-93-e6-b4-be-e5-9f-ba-e7-a1-80-e7-8e-af-e5-a2-83" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/18/e6-a0-91-e8-8e-93-e6-b4-be-e5-9f-ba-e7-a1-80-e7-8e-af-e5-a2-83/" class="article-date">
  <time datetime="2018-10-18T14:24:19.000Z" itemprop="datePublished">2018-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Rasp/">Rasp</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/18/e6-a0-91-e8-8e-93-e6-b4-be-e5-9f-ba-e7-a1-80-e7-8e-af-e5-a2-83/">树莓派基础环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="修改软件源"><a href="#修改软件源" class="headerlink" title="修改软件源"></a>修改软件源</h3><pre><code>sudo -s
echo -e &quot;deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi \n deb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi&quot; &amp;gt; /etc/apt/sources.list
echo -e &quot;deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/ stretch main ui&quot; &amp;gt; /etc/apt/sources.list.d/raspi.list
exit
sudo apt update &amp;amp;&amp;amp; sudo apt -y upgrade</code></pre><h3 id="中文输入法"><a href="#中文输入法" class="headerlink" title="中文输入法"></a>中文输入法</h3><pre><code>sudo apt-get install -y ttf-wqy-zenhei
sudo apt-get install -y scim-pinyin</code></pre><h3 id="看门狗-防止树莓派死机的监控"><a href="#看门狗-防止树莓派死机的监控" class="headerlink" title="看门狗(防止树莓派死机的监控)"></a>看门狗(防止树莓派死机的监控)</h3><p>当利用树莓派来做一些需要长期待机的应用时，如下载机、云储存、家庭影院等应用，我们往往会遇到的一个问题就是树莓派会因为过热而死机，需要我们重新启动树莓派，然后再次开启树莓派上的应用。这会给我们的日常操作带来许多麻烦。 Watchdog（看门狗）就能让树莓派永不死机。</p>
<pre><code>//树莓派自带看门狗模块，我们需要添加进去就好。
sudo modprobe bcm2708_wdog
echo -e &quot;\nbcm2708_wdog&quot; &amp;gt; sudo tee -a /etc/modules
// 安装看门狗软件
sudo apt-get install -y chkconfig watchdog
// 配置
sudo vim /etc/watchdog.conf
// 去掉&quot;watchdog-device=/dev/watchdog&quot;这一行的#注释
// 其它配置参考如下:
# 用于设定CPU温度重启条件
temperature-device = /sys/class/thermal/thermal_zone0/temp
# 最大温度为100度，超过立即重启
max-temperature = 100000
# 1分钟最多进程为24个，超过即重启
max-load-15=12
# 5分钟最多进程为18个，超过即重启
max-load-15=12
# 15分钟最多进程为12个，超过即重启
max-load-15=12

// 完成配置后，启动看门狗
sudo /etc/init.d/watchdog start
// 设置为开机自启
chkconfig watchdog on</code></pre><h3 id="Screen-让树莓派永不失联"><a href="#Screen-让树莓派永不失联" class="headerlink" title="Screen(让树莓派永不失联)"></a>Screen(让树莓派永不失联)</h3><p>利用SSH（Serare Shell，安全外壳协议）来远程控制树莓派应该是我们最常用的 操作树莓派的方式，但在用SSH连接时，我们常常会遇到连接突然断开的问题。连 接一旦断开，原米我们进行的操作也就中断了，若再使用，就得从头再来了。相信你肯定因为电脑待机而中断树莓派的任务而苦恼过。 Screen来让树莓派永不失联的方法。此方法下，就算连接断开了，当我们重新连接后依旧进行原来的操作，而不需要从头再来。</p>
<pre><code>// 直接安装Screen
sudo apt-get install -y screen
// 开启一个后台view（后台的终端，不会因为断开连接而终止）
screen -S 终端名
// 然后就可以继续你的操作了</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/18/e6-a0-91-e8-8e-93-e6-b4-be-e5-9f-ba-e7-a1-80-e7-8e-af-e5-a2-83/" data-id="ck10vanwv000kzxz2kkjsqfjj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e6-a0-91-e8-8e-93-e6-b4-be3b-e5-ae-89-e8-a3-85-e7-b3-bb-e7-bb-9f" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/17/e6-a0-91-e8-8e-93-e6-b4-be3b-e5-ae-89-e8-a3-85-e7-b3-bb-e7-bb-9f/" class="article-date">
  <time datetime="2018-10-17T14:11:38.000Z" itemprop="datePublished">2018-10-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Rasp/">Rasp</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/17/e6-a0-91-e8-8e-93-e6-b4-be3b-e5-ae-89-e8-a3-85-e7-b3-bb-e7-bb-9f/">树莓派3B+ 安装系统</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>安装步骤: <code>官网下载系统 -- 刷入TF卡 -- 设置开启显示器和SSH -- 通电 -- 进入系统</code></p>
<h3 id="1-进入官方网站下载系统镜像"><a href="#1-进入官方网站下载系统镜像" class="headerlink" title="1. 进入官方网站下载系统镜像"></a>1. 进入官方网站下载系统镜像</h3><p>官方系统 raspbian地址 <a href="https://www.raspberrypi.org/downloads/" target="_blank" rel="noopener">https://www.raspberrypi.org/downloads/</a></p>
<h3 id="2-Windows系统下的安装"><a href="#2-Windows系统下的安装" class="headerlink" title="2. Windows系统下的安装"></a>2. Windows系统下的安装</h3><h4 id="2-1-下载SD格式化工具"><a href="#2-1-下载SD格式化工具" class="headerlink" title="2.1 下载SD格式化工具"></a>2.1 下载SD格式化工具</h4><p>SDFormatter 地址 <a href="https://www.sdcard.org/downloads/formatter\_4/eula\_windows/" target="_blank" rel="noopener">https://www.sdcard.org/downloads/formatter\_4/eula\_windows/</a></p>
<p>安装后直接用默认选项 格式化SD卡</p>
<h4 id="2-2-下载写镜像工具"><a href="#2-2-下载写镜像工具" class="headerlink" title="2.2 下载写镜像工具"></a>2.2 下载写镜像工具</h4><p>Win32 DiskImager 地址 <a href="http://sourceforge.net/projects/win32diskimager/" target="_blank" rel="noopener">http://sourceforge.net/projects/win32diskimager/</a></p>
<h3 id="3-MAC系统下的安装"><a href="#3-MAC系统下的安装" class="headerlink" title="3. MAC系统下的安装"></a>3. MAC系统下的安装</h3><h4 id="3-1-查看当前已挂载的卷"><a href="#3-1-查看当前已挂载的卷" class="headerlink" title="3.1 查看当前已挂载的卷"></a>3.1 查看当前已挂载的卷</h4><pre><code>[liuxb@liuxb-mac]$ df -h
Filesystem      Size   Used  Avail Capacity iused      ifree %iused  Mounted on
/dev/disk1     112Gi   81Gi   30Gi    73% 1014786 4293952493    0%   /
devfs          188Ki  188Ki    0Bi   100%     654          0  100%   /dev
map -hosts       0Bi    0Bi    0Bi   100%       0          0  100%   /net
map auto_home    0Bi    0Bi    0Bi   100%       0          0  100%   /home
/dev/disk2s3    92Gi   51Gi   41Gi    56%  336662   42525054    1%   /Volumes/系统
/dev/disk2s4    20Gi   15Gi  4.4Gi    78%   92859    4579733    2%   /Volumes/数据
/dev/disk3s1    29Gi  2.3Mi   29Gi     1%  107876    8373436    2%   /Volumes/未命名</code></pre><p><code>对比Size和Name可以找到SD卡的分区在系统里对应的设备文件（这里是/dev/disk3s1），如果你有多个分区，可能还会有disk3s2之类的</code></p>
<h4 id="3-2-使用diskutil-unmount将分区卸载"><a href="#3-2-使用diskutil-unmount将分区卸载" class="headerlink" title="3.2 使用diskutil unmount将分区卸载"></a>3.2 使用diskutil unmount将分区卸载</h4><pre><code>[liuxb@liuxb-mac]$ diskutil unmount /dev/disk3s1
Volume 未命名 on disk3s1 unmounted</code></pre><h4 id="3-3-先对下载的zip压缩包进行解压，然后使用dd命令将系统镜像写入，需要特别特别注意disk后的数字，不能搞错"><a href="#3-3-先对下载的zip压缩包进行解压，然后使用dd命令将系统镜像写入，需要特别特别注意disk后的数字，不能搞错" class="headerlink" title="3.3 先对下载的zip压缩包进行解压，然后使用dd命令将系统镜像写入，需要特别特别注意disk后的数字，不能搞错"></a>3.3 先对下载的zip压缩包进行解压，然后使用dd命令将系统镜像写入，需要特别特别注意disk后的数字，不能搞错</h4><p>说明：/dev/disk3s1是分区，/dev/disk3是块设备，/dev/rdisk3是原始字符设备</p>
<pre><code>[liuxb@liuxb-mac]$ unzip 2017-09-07-raspbian-stretch.zip
[liuxb@liuxb-mac]$ sudo dd bs=16m if=2017-09-07-raspbian-stretch.img of=/dev/rdisk3
_
输入用户密码</code></pre><p>经过几分钟的等待，出现下面的提示，说明TF卡刷好了：</p>
<pre><code>1172+1 records in
1172+1 records out
4916019200 bytes transferred in 127.253638 secs (9691442 bytes/sec)</code></pre><h3 id="4-开启SSH"><a href="#4-开启SSH" class="headerlink" title="4. 开启SSH"></a>4. 开启SSH</h3><p>在TF卡分区里创建一个名为”ssh”的不带后缀的空文件</p>
<h3 id="5-开启强制HDMI输出"><a href="#5-开启强制HDMI输出" class="headerlink" title="5. 开启强制HDMI输出"></a>5. 开启强制HDMI输出</h3><p>在TF卡分区，打开config.txt文件(开机后位置： /boot/config.txt)，修改如下：</p>
<pre><code>hdmi_safe=1
config_hdmi_boost=4
hdmi_ignore_edid=0xa5000080
hdmi_group=2
hdmi_mode=82</code></pre><p>参数介绍:</p>
<p>项</p>
<p>解释</p>
<p>hdmi_safe=1</p>
<p>安全启动HDMI</p>
<p>config_hdmi_boost=4</p>
<p>开启热插拔</p>
<p>hdmi_group=1</p>
<p>CEA电视显示器</p>
<p>hdmi_group=2</p>
<p>DMT电脑显示器</p>
<p>hdmi_ignore_edid=0xa5000080</p>
<p>忽略自动探测的分辨率</p>
<p>输出分辨率：</p>
<p>hdmi_mode=4</p>
<p>640x480 60Hz</p>
<p>hdmi_mode=9</p>
<p>800x600 60Hz</p>
<p>hdmi_mode=16</p>
<p>1024x768 60Hz</p>
<p>hdmi_mode=82</p>
<p>1080p 60Hz</p>
<h3 id="6-设置无线WI-FI连接：（假设没有网线，而且没能连接显示器）"><a href="#6-设置无线WI-FI连接：（假设没有网线，而且没能连接显示器）" class="headerlink" title="6.设置无线WI-FI连接：（假设没有网线，而且没能连接显示器）"></a>6.设置无线WI-FI连接：（假设没有网线，而且没能连接显示器）</h3><p>在TF卡的boot分区，创建wpa_supplicant.conf文件，加入如下内容：</p>
<pre><code>country=CN
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1

network={
ssid=&quot;lxb-wifi&quot;
psk=&quot;123456789&quot;
priority=1
}</code></pre><p>在树莓派通电后会自动添加到<code>/etc/wpa_supplicant/wpa_supplicant.conf</code>文件里面，进行自动连接。</p>
<pre><code>// 详细介绍：
#ssid:网络的ssid
#psk:密码
#priority:连接优先级，数字越大优先级越高（不可以是负数）
#scan_ssid:连接隐藏WiFi时需要指定该值为1

// 如果WiFi 没有密码
network={
ssid=&quot;无线网络名称（ssid）&quot;
key_mgmt=NONE
}
// 如果WiFi 使用WEP加密

network={
ssid=&quot;无线网络名称（ssid）&quot;
key_mgmt=NONE
wep_key0=&quot;wifi密码&quot;
}
// 如果你的 WiFi 使用WPA/WPA2加密

network={
ssid=&quot;无线网络名称（ssid）&quot;
key_mgmt=WPA-PSK
psk=&quot;wifi密码&quot;
}</code></pre><p>以上设置完成后, TF卡可以插入树莓派了, 通电. 默认登录账号:<code>pi</code> 密码: <code>raspberry</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/17/e6-a0-91-e8-8e-93-e6-b4-be3b-e5-ae-89-e8-a3-85-e7-b3-bb-e7-bb-9f/" data-id="ck10vanwx000pzxz2japzu230" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-go-e5-8f-91-e9-80-81-e9-82-ae-e4-bb-b6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/01/go-e5-8f-91-e9-80-81-e9-82-ae-e4-bb-b6/" class="article-date">
  <time datetime="2018-09-01T14:26:49.000Z" itemprop="datePublished">2018-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Golang/">Golang</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/01/go-e5-8f-91-e9-80-81-e9-82-ae-e4-bb-b6/">Go 发送邮件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>需要引入 smtp包 mail.go</p>
<pre><code>package main

import (
    &quot;bytes&quot;
    &quot;encoding/base64&quot;
    &quot;fmt&quot;
    &quot;io/ioutil&quot;
    &quot;net/smtp&quot;
    &quot;strings&quot;
)

const const_smtp_server = &quot;server-ip:port&quot;

//const const_email_content_type = &quot;Content-Type: text/plain; charset=UTF-8&quot;
const const_email_content_type = &quot;Content-Type: text/html; charset=UTF-8&quot;
const const_boundary = &quot;THIS_IS_THE_BOUNDARY_FOR_EMAIL_BY_LXB&quot;

func SendEmail(sender string, receivers []string, subject string, content string, attach_files []string) error {

    var buf bytes.Buffer
    buf.WriteString(&quot;To: &quot;)
    buf.WriteString(strings.Join(receivers, &quot;,&quot;))
    buf.WriteString(&quot;\r\nFrom: &quot;)
    //nickname := strings.Split(sender,&quot;@&quot;)[0]
    //buf.WriteString(nickname)
    buf.WriteString(&quot;&lt;&quot;)
    buf.WriteString(sender)
    buf.WriteString(&quot;&gt;&quot;)
    buf.WriteString(&quot;\r\nSubject: &quot;)
    buf.WriteString(subject)
    buf.WriteString(&quot;\r\nContent-Type: multipart/mixed; boundary=&quot;)
    buf.WriteString(const_boundary)
    buf.WriteString(&quot;\r\n--&quot;)
    buf.WriteString(const_boundary)
    buf.WriteString(&quot;\r\n&quot;)
    buf.WriteString(const_email_content_type)
    buf.WriteString(&quot;\r\n\r\n&quot;)
    buf.WriteString(content)
    buf.WriteString(&quot;\r\n\r\n--&quot;)
    buf.WriteString(const_boundary)
    buf.WriteString(&quot;\r\n&quot;)

    for _, filepath := range attach_files {
        // 第一个附件
        filedepts := strings.Split(filepath, &quot;/&quot;)
        filename := filedepts[len(filedepts)-1]
        buf.WriteString(&quot;Content-Type: application/octet-stream\r\n&quot;)
        buf.WriteString(&quot;Content-Description: 附件\r\n&quot;)
        buf.WriteString(&quot;Content-Transfer-Encoding: base64\r\n&quot;)
        buf.WriteString(&quot;Content-Disposition: attachment; filename=\&quot;&quot; + filename + &quot;\&quot;\r\n\r\n&quot;)
        //读取并编码文件内容
        attaData, err := ioutil.ReadFile(filepath)
        if err != nil {
            print(err)
            return err
        }
        b := make([]byte, base64.StdEncoding.EncodedLen(len(attaData)))
        base64.StdEncoding.Encode(b, attaData)
        buf.Write(b)
        buf.WriteString(fmt.Sprintf(&quot;\r\n--%s\r\n&quot;, const_boundary))
    }

    fmt.Println(buf.String())
    err := smtp.SendMail(const_smtp_server, nil, sender, receivers, buf.Bytes())

    fmt.Println(&quot;send mail err:&quot;, err)
    return err
}</code></pre><p>main.go</p>
<pre><code>package main

import (
    //&quot;flag&quot;
    //&quot;fmt&quot;
    &quot;os&quot;
)

func main() {

    //var task string

    //flag.StringVar(&amp;task, &quot;t&quot;, &quot;&quot;, &quot;task id&quot;)
    //flag.Parse()

    //if task == &quot;&quot; {
    //  fmt.Println(&quot;task is required.&quot;)
    //  flag.Usage()
    //  os.Exit(2)
    //}

    testStr := os.Args[1]

    cont := &quot;&lt;html&gt;&lt;body&gt;&lt;p align=\&quot;center\&quot;&gt;表: 1&lt;/p&gt;&lt;table align=\&quot;center\&quot; border=\&quot;1\&quot; cellpadding=\&quot;10\&quot;&gt;&lt;tr&gt;&lt;td&gt;任务ID&lt;/td&gt;&lt;td&gt;列1&lt;/td&gt;&lt;td&gt;列2&lt;/td&gt;&lt;td&gt;列3&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&quot; + testStr + &quot;&lt;/td&gt;&lt;td&gt;&quot; + testStr + &quot;&lt;/td&gt;&lt;td&gt;&quot; + testStr + &quot;&lt;/td&gt;&lt;td&gt;&quot; + testStr + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;&quot;

    sender := &quot;&quot;
    rcvs := []string{}
    sbj := &quot;test email&quot;
    //  cont := &quot;This is content&quot;
    file := []string{}

    SendEmail(sender, rcvs, sbj, cont, file)

}</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/01/go-e5-8f-91-e9-80-81-e9-82-ae-e4-bb-b6/" data-id="ck10vanxd001lzxz2ndvxg446" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-shell-e6-95-b0-e7-bb-84-e7-ac-94-e8-ae-b0" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/30/shell-e6-95-b0-e7-bb-84-e7-ac-94-e8-ae-b0/" class="article-date">
  <time datetime="2018-08-30T14:33:15.000Z" itemprop="datePublished">2018-08-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Shell/">Shell</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/30/shell-e6-95-b0-e7-bb-84-e7-ac-94-e8-ae-b0/">Shell数组笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Bash shell 只支持一维数组. 初始化时不需要定义数组大小(与 PHP 类似). 数组元素的下标由0开始</p>
<p>shell 数组用括号来表示, 元素用”空格”符号分隔开, 语法: <code>array_name=(value1 value2 ...valuen)</code></p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><pre><code>#!/bin/bash
my_array=(A B &quot;C&quot; D)</code></pre><p>也可以用下标来定义数组</p>
<pre><code>array_name[0]=value0
array_name[1]=value1
array_name[2]=value2</code></pre><h3 id="读取数组"><a href="#读取数组" class="headerlink" title="读取数组"></a>读取数组</h3><p><code>${array_name[index]}</code></p>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><pre><code>#!/bin/bash

my_array=(A B &quot;C&quot; D)

echo &quot;第一个元素为: ${my_array[0]}&quot;
echo &quot;第二个元素为: ${my_array[1]}&quot;
echo &quot;第三个元素为: ${my_array[2]}&quot;
echo &quot;第四个元素为: ${my_array[3]}&quot;</code></pre><h3 id="获取数组中的所有元素"><a href="#获取数组中的所有元素" class="headerlink" title="获取数组中的所有元素"></a>获取数组中的所有元素</h3><p>使用<code>@</code> 或 <code>*</code> 可以后去数组中的所有元素</p>
<pre><code>#!/bin/bash

my_array[0]=A
my_array[1]=B
my_array[2]=C
my_array[3]=D

echo &quot;数组的元素为: ${my_array[*]}&quot;
echo &quot;数组的元素为: ${my_array[@]}&quot;</code></pre><h3 id="获取数组的长度"><a href="#获取数组的长度" class="headerlink" title="获取数组的长度"></a>获取数组的长度</h3><p>获取数组长度的方法与获取字符串长度的方法相同</p>
<pre><code>#!/bin/bash

my_array[0]=A
my_array[1]=B
my_array[2]=C
my_array[3]=D

echo &quot;数组元素个数为: ${#my_array[*]}&quot;
echo &quot;数组元素个数为: ${#my_array[@]}&quot;</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/30/shell-e6-95-b0-e7-bb-84-e7-ac-94-e8-ae-b0/" data-id="ck10vanyh0039zxz22zfy981g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-split-e5-91-bd-e4-bb-a4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/30/split-e5-91-bd-e4-bb-a4/" class="article-date">
  <time datetime="2018-08-30T14:23:34.000Z" itemprop="datePublished">2018-08-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Shell/">Shell</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/30/split-e5-91-bd-e4-bb-a4/">split命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><pre><code>-b 值为每一个输出档案的大小, 单位为byte
-C 每一个输出档中, 单行的最大byte 数
-d 使用数字作为后缀
-l 值为每一个输出档的行数大小</code></pre><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>生成一个大小为100KB 的测试文件</p>
<pre><code>dd if=/dev/zero bs=100k count=1 of=date.file
1+0 records in
1+0 records out
102400 bytes (102 kB) copied, 0.00043 seconds, 238 MB/s</code></pre><p>使用split 命令将上面创建的date.file文件分割成大小为10KB 的小文件</p>
<pre><code>$ split -b 10k date.file
$ ls
date.file  xaa  xab  xac  xad  xae  xaf  xag  xah  xai  xaj</code></pre><p>文件被分割成带有字母的后缀文件, 如果想用数字后缀可使用<code>-d</code>参数, 同时可以使用<code>-a length</code>指定后缀的长度</p>
<pre><code>[root@localhost split]# split -b 10k date.file -d -a 3
[root@localhost split]# ls
date.file  x000  x001  x002  x003  x004  x005  x006  x007  x008  x009</code></pre><p>为分割后的文件指定文件名的前缀</p>
<pre><code>[root@localhost split]# split -b 10k date.file -d -a 3 split_file
[root@localhost split]# ls
date.file  split_file000  split_file001  split_file002  split_file003  split_file004  split_file005  split_file006  split_file007  split_file008  split_file009</code></pre><p>使用<code>-l</code>选项根据文件的行数来分割文件,如把文件分割成每个包含10行的小文件</p>
<pre><code>split -l 10 date.file</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/30/split-e5-91-bd-e4-bb-a4/" data-id="ck10vanyl003ezxz29eqqdyo1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/A-amp-V/">A&amp;V</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/C/En/">En</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/C/En/JSON/">JSON</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/Linux/">Linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DB/">DB</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/DB/Linux/">Linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design/">Design</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Golang/">Golang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Golang/Linux/">Linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Qt/">Qt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rasp/">Rasp</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 20px;">nginx</a> <a href="/tags/架构/" style="font-size: 10px;">架构</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/09/26/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2019/08/08/e5-8d-87-e7-ba-a7https/">升级https</a>
          </li>
        
          <li>
            <a href="/2019/07/23/docker-e6-8c-82-e8-bd-bd-e7-9b-ae-e5-bd-95-e5-a4-b1-e8-b4-a5-e6-9d-83-e9-99-90-e6-8b-92-e7-bb-9d/">docker挂载目录失败/权限拒绝</a>
          </li>
        
          <li>
            <a href="/2019/07/02/mac-iterm2-e7-99-bb-e9-99-86centos-e6-8f-90-e7-a4-bawarning-setlocale-lc-ctype-cannot-change-locale-utf-8-no-such-file-or-directory/">Mac iTerm2登陆CentOS提示warning: setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory</a>
          </li>
        
          <li>
            <a href="/2019/06/12/e5-8d-87-e7-ba-a7-e5-88-b0php7-1-e4-b9-8b-e5-90-8ewordpress-e7-bd-91-e7-ab-99-e5-87-ba-e7-8e-b0error-establishing-a-database-connection-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-b3-95/">升级到php7.1之后wordpress 网站出现Error establishing a database connection的解决方法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>