<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Elasticsearch ÊïôÁ®ã'>

<meta name="keywords" content="elastic , ÊïôÁ®ã"><title>Elasticsearch ÊïôÁ®ã</title>

<link rel='canonical' href='https://lxb.wiki/be2cf138/'>

<link rel="stylesheet" href="/scss/style.min.e5fa5972b3e81b9d9b61e2598991a71c444ca50e38b034d78f5651a82802e894.css"><meta property='og:title' content='Elasticsearch ÊïôÁ®ã'>
<meta property='og:description' content='Elasticsearch ÊïôÁ®ã'>
<meta property='og:url' content='https://lxb.wiki/be2cf138/'>
<meta property='og:site_name' content='Xiaobin&#39;s Notes'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='elastic' /><meta property='article:published_time' content='2023-05-23T21:56:26&#43;08:00'/><meta property='article:modified_time' content='2023-05-23T21:56:26&#43;08:00'/>
<meta name="twitter:title" content="Elasticsearch ÊïôÁ®ã">
<meta name="twitter:description" content="Elasticsearch ÊïôÁ®ã">
<link rel="shortcut icon" href="/favicon.png" />




<script async src="https://www.googletagmanager.com/gtag/js?id=G-JZ2PWLT6JY"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-JZ2PWLT6JY');
</script>
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?e710560ffa44cae2b3a6259e0171fb5f";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
<script>
    (function () {
        var el = document.createElement("script");
        el.src = "https://lf1-cdn-tos.bytegoofy.com/goofy/ttzz/push.js?f146251743600ee0672cdcc8455ce18def91cdb255ad969a2ef5c715d5ed5baecaf7cd753709c168f20e6a2e9019123fd11e31a222d3a2fe01ad05c6b8f519b2";
        el.id = "ttzz";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(el, s);
    })(window)
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu692828361b78eaa42fdbdbbf5a7177a9_44446_300x0_resize_q75_box.jpeg" width="300"
                            height="298" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Xiaobin&#39;s Notes</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header>


    <ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                <span>È¶ñÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/categories/' >
                
                
                
                <span>ÂàÜÁ±ª</span>
            </a>
        </li>
        
        
        <li >
            <a href='/tags/' >
                
                
                
                <span>Ê†áÁ≠æ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                <span>ÂèãÈìæ</span>
            </a>
        </li>
        

        <div class="menu-bottom-section"><ol class="social-menu">
                    
                        <li>
                            <a 
                                href='mailto://me@lxb.wiki'
                                target="_blank"
                                title="Email"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                                
                            </a>
                        </li>
                    
                        <li>
                            <a 
                                href='https://github.com/lxbwolf'
                                target="_blank"
                                title="GitHub"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                                
                            </a>
                        </li>
                    
                        <li>
                            <a 
                                href='https://lxb.wiki/atom.xml'
                                target="_blank"
                                title="Rss"
                                rel="me"
                            >
                                
                                
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                                
                            </a>
                        </li>
                    
                </ol>
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
<section class="widget archives">
    
    <h2 class="widget-title section-title">ÁõÆÂΩï</h2>

    <div class="widget--toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#‰∏ÄÂÆâË£Ö">‰∏Ä„ÄÅÂÆâË£Ö</a></li>
    <li><a href="#‰∫åÂü∫Êú¨Ê¶ÇÂøµ">‰∫å„ÄÅÂü∫Êú¨Ê¶ÇÂøµ</a>
      <ul>
        <li><a href="#20-ÊäΩË±°Á±ªÊØî">2.0 ÊäΩË±°Á±ªÊØî</a></li>
        <li><a href="#21-node-‰∏é-cluster">2.1 Node ‰∏é Cluster</a></li>
        <li><a href="#22-index">2.2 Index</a></li>
        <li><a href="#23-document">2.3 Document</a></li>
        <li><a href="#24-type">2.4 Type</a></li>
        <li><a href="#25-mappingsÊò†Â∞Ñ">2.5 mappings(Êò†Â∞Ñ)</a></li>
        <li><a href="#26-shardÂàÜÁâá">2.6 shard(ÂàÜÁâá)</a></li>
        <li><a href="#27-replicaÂ§á‰ªΩ">2.7. replica(Â§á‰ªΩ)</a></li>
        <li><a href="#28-ÂÄíÊéíÁ¥¢Âºï">2.8 ÂÄíÊéíÁ¥¢Âºï</a></li>
        <li><a href="#29-analysis">2.9 analysis</a></li>
        <li><a href="#210-esÈõÜÁæ§Áä∂ÊÄÅ">2.10 ESÈõÜÁæ§Áä∂ÊÄÅÔºö</a></li>
        <li><a href="#211-replica‰ΩúÁî®">2.11 replica‰ΩúÁî®Ôºö</a></li>
      </ul>
    </li>
    <li><a href="#‰∏âÊñ∞Âª∫ÂíåÂà†Èô§-index">‰∏â„ÄÅÊñ∞Âª∫ÂíåÂà†Èô§ Index</a></li>
    <li><a href="#Âõõ‰∏≠ÊñáÂàÜËØçËÆæÁΩÆ">Âõõ„ÄÅ‰∏≠ÊñáÂàÜËØçËÆæÁΩÆ</a></li>
    <li><a href="#‰∫îÊï∞ÊçÆÊìç‰Ωú">‰∫î„ÄÅÊï∞ÊçÆÊìç‰Ωú</a>
      <ul>
        <li><a href="#51-Êñ∞Â¢ûËÆ∞ÂΩï">5.1 Êñ∞Â¢ûËÆ∞ÂΩï</a></li>
        <li><a href="#52-Êü•ÁúãËÆ∞ÂΩï">5.2 Êü•ÁúãËÆ∞ÂΩï</a></li>
        <li><a href="#53-Âà†Èô§ËÆ∞ÂΩï">5.3 Âà†Èô§ËÆ∞ÂΩï</a></li>
        <li><a href="#54-Êõ¥Êñ∞ËÆ∞ÂΩï">5.4 Êõ¥Êñ∞ËÆ∞ÂΩï</a></li>
        <li><a href="#55-Êìç‰ΩúÁ¥¢Âºï">5.5 Êìç‰ΩúÁ¥¢Âºï</a></li>
        <li><a href="#56-Êìç‰ΩúÊñáÊ°£">5.6 Êìç‰ΩúÊñáÊ°£</a></li>
      </ul>
    </li>
    <li><a href="#ÂÖ≠Êï∞ÊçÆÊü•ËØ¢">ÂÖ≠„ÄÅÊï∞ÊçÆÊü•ËØ¢</a>
      <ul>
        <li><a href="#61-ËøîÂõûÊâÄÊúâËÆ∞ÂΩï">6.1 ËøîÂõûÊâÄÊúâËÆ∞ÂΩï</a></li>
        <li><a href="#62-ÂÖ®ÊñáÊêúÁ¥¢">6.2 ÂÖ®ÊñáÊêúÁ¥¢</a></li>
        <li><a href="#63-ÈÄªËæëËøêÁÆó">6.3 ÈÄªËæëËøêÁÆó</a></li>
        <li><a href="#64-ÊêúÁ¥¢demo">6.4 ÊêúÁ¥¢demo</a></li>
      </ul>
    </li>
    <li><a href="#‰∏ÉÂèÇËÄÉÈìæÊé•">‰∏É„ÄÅÂèÇËÄÉÈìæÊé•</a></li>
  </ul>
</nav>
    </div>
</section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
        <a href="/categories/Lang/" >
            Lang
        </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/be2cf138/">Elasticsearch ÊïôÁ®ã</a>
        </h2>

        
        <h3 class="article-subtitle">
            Elasticsearch ÊïôÁ®ã
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
            <time class="article-time--published">May 23, 2023</time>
        </div>
        

        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



            <time class="article-time--reading">
                ÈòÖËØªÊó∂Èïø: 14 ÂàÜÈíü
            </time>
        </div>
        
        <small>
    <section class="article-tags">
        
            <a href="/tags/elastic/">elastic</a>
        
    </section>
</small>
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p><a class="link" href="https://baike.baidu.com/item/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"  target="_blank" rel="noopener"
    >ÂÖ®ÊñáÊêúÁ¥¢</a>Â±û‰∫éÊúÄÂ∏∏ËßÅÁöÑÈúÄÊ±ÇÔºåÂºÄÊ∫êÁöÑ <a class="link" href="https://www.elastic.co/"  target="_blank" rel="noopener"
    >Elasticsearch</a> Ôºà‰ª•‰∏ãÁÆÄÁß∞ ElasticÔºâÊòØÁõÆÂâçÂÖ®ÊñáÊêúÁ¥¢ÂºïÊìéÁöÑÈ¶ñÈÄâ„ÄÇ</p>
<p>ÂÆÉÂèØ‰ª•Âø´ÈÄüÂú∞ÂÇ®Â≠ò„ÄÅÊêúÁ¥¢ÂíåÂàÜÊûêÊµ∑ÈáèÊï∞ÊçÆ„ÄÇÁª¥Âü∫ÁôæÁßë„ÄÅStack Overflow„ÄÅGithub ÈÉΩÈááÁî®ÂÆÉ„ÄÇ</p>
<p><img src="https://raw.githubusercontent.com/lxbwolf/blog_source_image/main/202403031501235.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Elastic ÁöÑÂ∫ïÂ±ÇÊòØÂºÄÊ∫êÂ∫ì <a class="link" href="https://lucene.apache.org/"  target="_blank" rel="noopener"
    >Lucene</a>„ÄÇ‰ΩÜÊòØÔºå‰Ω†Ê≤°Ê≥ïÁõ¥Êé•Áî® LuceneÔºåÂøÖÈ°ªËá™Â∑±ÂÜô‰ª£Á†ÅÂéªË∞ÉÁî®ÂÆÉÁöÑÊé•Âè£„ÄÇElastic ÊòØ Lucene ÁöÑÂ∞ÅË£ÖÔºåÊèê‰æõ‰∫Ü REST API ÁöÑÊìç‰ΩúÊé•Âè£ÔºåÂºÄÁÆ±Âç≥Áî®„ÄÇ</p>
<p>Êú¨Êñá‰ªéÈõ∂ÂºÄÂßãÔºåËÆ≤Ëß£Â¶Ç‰Ωï‰ΩøÁî® Elastic Êê≠Âª∫Ëá™Â∑±ÁöÑÂÖ®ÊñáÊêúÁ¥¢ÂºïÊìé„ÄÇÊØè‰∏ÄÊ≠•ÈÉΩÊúâËØ¶ÁªÜÁöÑËØ¥ÊòéÔºåÂ§ßÂÆ∂Ë∑üÁùÄÂÅöÂ∞±ËÉΩÂ≠¶‰ºö„ÄÇ</p>
<h2 id="‰∏ÄÂÆâË£Ö">‰∏Ä„ÄÅÂÆâË£Ö</h2>
<p>Elastic ÈúÄË¶Å Java 8 ÁéØÂ¢É„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÊú∫Âô®ËøòÊ≤°ÂÆâË£Ö JavaÔºåÂèØ‰ª•ÂèÇËÄÉ<a class="link" href="https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-debian-8"  target="_blank" rel="noopener"
    >ËøôÁØáÊñáÁ´†</a>ÔºåÊ≥®ÊÑèË¶Å‰øùËØÅÁéØÂ¢ÉÂèòÈáè<code>JAVA_HOME</code>Ê≠£Á°ÆËÆæÁΩÆ„ÄÇ</p>
<p>ÂÆâË£ÖÂÆå JavaÔºåÂ∞±ÂèØ‰ª•Ë∑üÁùÄ<a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-targz.html"  target="_blank" rel="noopener"
    >ÂÆòÊñπÊñáÊ°£</a>ÂÆâË£Ö Elastic„ÄÇÁõ¥Êé•‰∏ãËΩΩÂéãÁº©ÂåÖÊØîËæÉÁÆÄÂçï„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.5.1.zip 
</span></span><span style="display:flex;"><span>$ unzip elasticsearch-5.5.1.zip 
</span></span><span style="display:flex;"><span>$ cd elasticsearch-5.5.1/
</span></span></code></pre></div></blockquote>
<p>Êé•ÁùÄÔºåËøõÂÖ•Ëß£ÂéãÂêéÁöÑÁõÆÂΩïÔºåËøêË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåÂêØÂä® Elastic„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ./bin/elasticsearch
</span></span></code></pre></div></blockquote>
<p>Â¶ÇÊûúËøôÊó∂<a class="link" href="https://github.com/spujadas/elk-docker/issues/92"  target="_blank" rel="noopener"
    >Êä•Èîô</a>&ldquo;max virtual memory areas vm.max_map_count [65530] is too low&rdquo;ÔºåË¶ÅËøêË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ sudo sysctl -w vm.max_map_count<span style="color:#f92672">=</span><span style="color:#ae81ff">262144</span>
</span></span></code></pre></div></blockquote>
<p>Â¶ÇÊûú‰∏ÄÂàáÊ≠£Â∏∏ÔºåElastic Â∞±‰ºöÂú®ÈªòËÆ§ÁöÑ9200Á´ØÂè£ËøêË°å„ÄÇËøôÊó∂ÔºåÊâìÂºÄÂè¶‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÁ™óÂè£ÔºåËØ∑Ê±ÇËØ•Á´ØÂè£Ôºå‰ºöÂæóÂà∞ËØ¥Êòé‰ø°ÊÅØ„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl localhost:9200 
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;atntrTf&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;cluster_name&#34;</span>:<span style="color:#e6db74">&#34;elasticsearch&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;cluster_uuid&#34;</span>:<span style="color:#e6db74">&#34;tf9250XhQ6ee4h7YI11anA&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;version&#34;</span>:<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;number&#34;</span>:<span style="color:#e6db74">&#34;5.5.1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;build_hash&#34;</span>:<span style="color:#e6db74">&#34;19c13d0&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;build_date&#34;</span>:<span style="color:#e6db74">&#34;2017-07-18T20:44:24.823Z&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;build_snapshot&#34;</span>:false,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;lucene_version&#34;</span>:<span style="color:#e6db74">&#34;6.6.0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;tagline&#34;</span>:<span style="color:#e6db74">&#34;You Know, for Search&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåËØ∑Ê±Ç9200Á´ØÂè£ÔºåElastic ËøîÂõû‰∏Ä‰∏™ JSON ÂØπË±°ÔºåÂåÖÂê´ÂΩìÂâçËäÇÁÇπ„ÄÅÈõÜÁæ§„ÄÅÁâàÊú¨Á≠â‰ø°ÊÅØ„ÄÇ</p>
<p>Êåâ‰∏ã <code>Ctrl + C</code>ÔºåElastic Â∞±‰ºöÂÅúÊ≠¢ËøêË°å„ÄÇ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåElastic Âè™ÂÖÅËÆ∏Êú¨Êú∫ËÆøÈóÆÔºåÂ¶ÇÊûúÈúÄË¶ÅËøúÁ®ãËÆøÈóÆÔºåÂèØ‰ª•‰øÆÊîπ Elastic ÂÆâË£ÖÁõÆÂΩïÁöÑ<code>config/elasticsearch.yml</code>Êñá‰ª∂ÔºåÂéªÊéâ<code>network.host</code>ÁöÑÊ≥®ÈáäÔºåÂ∞ÜÂÆÉÁöÑÂÄºÊîπÊàê<code>0.0.0.0</code>ÔºåÁÑ∂ÂêéÈáçÊñ∞ÂêØÂä® Elastic„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>network.host: 0.0.0.0
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåËÆæÊàê<code>0.0.0.0</code>ËÆ©‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•ËÆøÈóÆ„ÄÇÁ∫ø‰∏äÊúçÂä°‰∏çË¶ÅËøôÊ†∑ËÆæÁΩÆÔºåË¶ÅËÆæÊàêÂÖ∑‰ΩìÁöÑ IP„ÄÇ</p>
<p>ÈÄöËøá docker ÂêØÂä®‰∏Ä‰∏™ÂçïËäÇÁÇπÈõÜÁæ§</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker run -p 9200:9200 -p 9300:9300 -e <span style="color:#e6db74">&#34;discovery.type=single-node&#34;</span> docker.elastic.co/elasticsearch/elasticsearch:6.7.2
</span></span></code></pre></div><p>‰ΩøÁî® RESTful API ÈÄöËøáÁ´ØÂè£ 9200 Âíå Elasticsearch ËøõË°åÈÄö‰ø°</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X &lt;METHOD&gt; http://localhost:9200/&lt;PATH&gt;?&lt;QUERY_STRING&gt; -d <span style="color:#e6db74">&#39;&lt;BODY&gt;&#39;</span>
</span></span></code></pre></div><h2 id="‰∫åÂü∫Êú¨Ê¶ÇÂøµ">‰∫å„ÄÅÂü∫Êú¨Ê¶ÇÂøµ</h2>
<h3 id="20-ÊäΩË±°Á±ªÊØî">2.0 ÊäΩË±°Á±ªÊØî</h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>MySql</th>
<th>Es</th>
</tr>
</thead>
<tbody>
<tr>
<td>Table</td>
<td>Index(Type)</td>
</tr>
<tr>
<td>Row</td>
<td>Document</td>
</tr>
<tr>
<td>Column</td>
<td>Field</td>
</tr>
<tr>
<td>Schema</td>
<td>Mapping</td>
</tr>
<tr>
<td>SQL</td>
<td>DSL</td>
</tr>
</tbody>
</table></div>
<h3 id="21-node-‰∏é-cluster">2.1 Node ‰∏é Cluster</h3>
<p>Elastic Êú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ∫ìÔºåÂÖÅËÆ∏Â§öÂè∞ÊúçÂä°Âô®ÂçèÂêåÂ∑•‰ΩúÔºåÊØèÂè∞ÊúçÂä°Âô®ÂèØ‰ª•ËøêË°åÂ§ö‰∏™ Elastic ÂÆû‰æãÔºåÊâÄ‰ª•Âπ∂‰∏çËÉΩËØ¥‰∏ÄÂè∞Êú∫Âô®Â∞±ÊòØ‰∏Ä‰∏™ nodeÔºåÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÊØè‰∏™nodeËøêË°åÂú®‰∏Ä‰∏™Áã¨Á´ãÁöÑÁéØÂ¢ÉÊàñËôöÊãüÊú∫‰∏ä„ÄÇ</p>
<p>Âçï‰∏™ Elastic ÂÆû‰æãÁß∞‰∏∫‰∏Ä‰∏™ËäÇÁÇπÔºànodeÔºâÔºå‰∏ÄÁªÑËäÇÁÇπÊûÑÊàê‰∏Ä‰∏™ÈõÜÁæ§ÔºàclusterÔºâÔºåÊØè‰∏™ÈõÜÁæ§ÈÉΩÊúâ‰∏Ä‰∏™cluster name‰Ωú‰∏∫Ê†áËØÜ</p>
<h3 id="22-index">2.2 Index</h3>
<p>Elastic ‰ºöÁ¥¢ÂºïÊâÄÊúâÂ≠óÊÆµÔºåÁªèËøáÂ§ÑÁêÜÂêéÂÜôÂÖ•‰∏Ä‰∏™ÂèçÂêëÁ¥¢ÂºïÔºàInverted IndexÔºâ„ÄÇÊü•ÊâæÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÁõ¥Êé•Êü•ÊâæËØ•Á¥¢Âºï„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåElastic Êï∞ÊçÆÁÆ°ÁêÜÁöÑÈ°∂Â±ÇÂçï‰ΩçÂ∞±Âè´ÂÅö IndexÔºàÁ¥¢ÂºïÔºâ„ÄÇÂÆÉÊòØÂçï‰∏™Êï∞ÊçÆÂ∫ìÁöÑÂêå‰πâËØç„ÄÇÊØè‰∏™ Index ÔºàÂç≥Êï∞ÊçÆÂ∫ìÔºâÁöÑÂêçÂ≠óÂøÖÈ°ªÊòØÂ∞èÂÜô„ÄÇ</p>
<p>‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãÂΩìÂâçËäÇÁÇπÁöÑÊâÄÊúâ Index„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X GET <span style="color:#e6db74">&#39;http://localhost:9200/_cat/indices?v&#39;</span>
</span></span></code></pre></div></blockquote>
<p>Index Âç≥‰∏ÄÁ≥ªÂàó documents ÁöÑÈõÜÂêà„ÄÇÊØè‰∏™Á¥¢ÂºïÂèØ‰ª•ÊúâÂ§ö‰∏™typeÔºå‰∏çËøá7.0‰πãÂêéÂ∞Ü‰ºöË¢´Â∫üÂºÉÔºåÁï•Ëøá„ÄÇ</p>
<h3 id="23-document">2.3 Document</h3>
<p>Index ÈáåÈù¢ÂçïÊù°ÁöÑËÆ∞ÂΩïÁß∞‰∏∫ DocumentÔºàÊñáÊ°£Ôºâ„ÄÇËÆ∏Â§öÊù° Document ÊûÑÊàê‰∫Ü‰∏Ä‰∏™ Index„ÄÇ</p>
<p>Document ‰ΩøÁî® JSON Ê†ºÂºèË°®Á§∫Ôºå‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;user&#34;</span>: <span style="color:#e6db74">&#34;Âº†‰∏â&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Â∑•Á®ãÂ∏à&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜ&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></blockquote>
<p>Âêå‰∏Ä‰∏™ Index ÈáåÈù¢ÁöÑ DocumentÔºå‰∏çË¶ÅÊ±ÇÊúâÁõ∏ÂêåÁöÑÁªìÊûÑÔºàschemeÔºâÔºå‰ΩÜÊòØÊúÄÂ•Ω‰øùÊåÅÁõ∏ÂêåÔºåËøôÊ†∑ÊúâÂà©‰∫éÊèêÈ´òÊêúÁ¥¢ÊïàÁéá„ÄÇ</p>
<h3 id="24-type">2.4 Type</h3>
<p>Document ÂèØ‰ª•ÂàÜÁªÑÔºåÊØîÂ¶Ç<code>weather</code>Ëøô‰∏™ Index ÈáåÈù¢ÔºåÂèØ‰ª•ÊåâÂüéÂ∏ÇÂàÜÁªÑÔºàÂåó‰∫¨Âíå‰∏äÊµ∑ÔºâÔºå‰πüÂèØ‰ª•ÊåâÊ∞îÂÄôÂàÜÁªÑÔºàÊô¥Â§©ÂíåÈõ®Â§©Ôºâ„ÄÇËøôÁßçÂàÜÁªÑÂ∞±Âè´ÂÅö TypeÔºåÂÆÉÊòØËôöÊãüÁöÑÈÄªËæëÂàÜÁªÑÔºåÁî®Êù•ËøáÊª§ Document„ÄÇ</p>
<p>‰∏çÂêåÁöÑ Type Â∫îËØ•ÊúâÁõ∏‰ººÁöÑÁªìÊûÑÔºàschemaÔºâÔºå‰∏æ‰æãÊù•ËØ¥Ôºå<code>id</code>Â≠óÊÆµ‰∏çËÉΩÂú®Ëøô‰∏™ÁªÑÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂú®Âè¶‰∏Ä‰∏™ÁªÑÊòØÊï∞ÂÄº„ÄÇËøôÊòØ‰∏éÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑË°®ÁöÑ<a class="link" href="https://www.elastic.co/guide/en/elasticsearch/guide/current/mapping.html"  target="_blank" rel="noopener"
    >‰∏Ä‰∏™Âå∫Âà´</a>„ÄÇÊÄßË¥®ÂÆåÂÖ®‰∏çÂêåÁöÑÊï∞ÊçÆÔºàÊØîÂ¶Ç<code>products</code>Âíå<code>logs</code>ÔºâÂ∫îËØ•Â≠òÊàê‰∏§‰∏™ IndexÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™ Index ÈáåÈù¢ÁöÑ‰∏§‰∏™ TypeÔºàËôΩÁÑ∂ÂèØ‰ª•ÂÅöÂà∞Ôºâ„ÄÇ</p>
<p>‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÂèØ‰ª•ÂàóÂá∫ÊØè‰∏™ Index ÊâÄÂåÖÂê´ÁöÑ Type„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/_mapping?pretty=true&#39;</span>
</span></span></code></pre></div></blockquote>
<p>Ê†πÊçÆ<a class="link" href="https://www.elastic.co/blog/index-type-parent-child-join-now-future-in-elasticsearch"  target="_blank" rel="noopener"
    >ËßÑÂàí</a>ÔºåElastic 6.x ÁâàÂè™ÂÖÅËÆ∏ÊØè‰∏™ Index ÂåÖÂê´‰∏Ä‰∏™ TypeÔºå7.x ÁâàÂ∞Ü‰ºöÂΩªÂ∫ïÁßªÈô§ Type„ÄÇ</p>
<h3 id="25-mappingsÊò†Â∞Ñ">2.5 mappings(Êò†Â∞Ñ)</h3>
<p>Êò†Â∞Ñ, Â∞±ÂÉèÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ schema ÔºåÊèèËø∞‰∫ÜÊñáÊ°£ÂèØËÉΩÂÖ∑ÊúâÁöÑÂ≠óÊÆµÊàñ Â±ûÊÄß „ÄÅÊØè‰∏™Â≠óÊÆµÁöÑÊï∞ÊçÆÁ±ªÂûã‚ÄîÊØîÂ¶Ç string, integer Êàñ date ‚Äî‰ª•ÂèäLuceneÊòØÂ¶Ç‰ΩïÁ¥¢ÂºïÂíåÂ≠òÂÇ®Ëøô‰∫õÂ≠óÊÆµÁöÑ„ÄÇ</p>
<ul>
<li>Â≠óÁ¨¶‰∏≤: string</li>
<li>Êï¥Êï∞: byte, short, integer, long</li>
<li>ÊµÆÁÇπÊï∞: float, double</li>
<li>Â∏ÉÂ∞îÂûã: boolean</li>
<li>Êó•Êúü: date</li>
<li>keywordÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂ÂÄôÔºå‰∏ç‰ºöÂàÜËØçÂª∫Á´ãÁ¥¢Âºï</li>
<li>textÔºöÂ≠òÂÇ®Êï∞ÊçÆÊó∂ÂÄôÔºå‰ºöËá™Âä®ÂàÜËØçÔºåÂπ∂ÁîüÊàêÁ¥¢Âºï</li>
</ul>
<h3 id="26-shardÂàÜÁâá">2.6 shard(ÂàÜÁâá)</h3>
<p>ESÊòØÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìéÔºåÊØè‰∏™Á¥¢ÂºïÊúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂàÜÁâáÔºåÁ¥¢ÂºïÁöÑÊï∞ÊçÆË¢´ÂàÜÈÖçÂà∞ÂêÑ‰∏™ÂàÜÁâá‰∏äÔºåÁõ∏ÂΩì‰∫é‰∏ÄÊ°∂Ê∞¥Áî®‰∫ÜN‰∏™ÊùØÂ≠êË£Ö„ÄÇÂàÜÁâáÊúâÂä©‰∫éÊ®™ÂêëÊâ©Â±ïÔºåN‰∏™ÂàÜÁâá‰ºöË¢´Â∞ΩÂèØËÉΩÂπ≥ÂùáÂú∞ÔºàrebalanceÔºâÂàÜÈÖçÂú®‰∏çÂêåÁöÑËäÇÁÇπ‰∏äÔºà‰æãÂ¶Ç‰Ω†Êúâ2‰∏™ËäÇÁÇπÔºå4‰∏™‰∏ªÂàÜÁâá(‰∏çËÄÉËôëÂ§á‰ªΩ)ÔºåÈÇ£‰πàÊØè‰∏™ËäÇÁÇπ‰ºöÂàÜÂà∞2‰∏™ÂàÜÁâáÔºåÂêéÊù•‰Ω†Â¢ûÂä†‰∫Ü2‰∏™ËäÇÁÇπÔºåÈÇ£‰πà‰Ω†Ëøô4‰∏™ËäÇÁÇπ‰∏äÈÉΩ‰ºöÊúâ1‰∏™ÂàÜÁâáÔºåËøô‰∏™ËøáÁ®ãÂè´ relocationÔºåESÊÑüÁü•ÂêéËá™Âä®ÂÆåÊàê)„ÄÇÂàÜÁâáÊòØÁã¨Á´ãÁöÑÔºåÂØπ‰∫é‰∏Ä‰∏™ Search Request ÁöÑË°å‰∏∫ÔºåÊØè‰∏™ÂàÜÁâáÈÉΩ‰ºöÊâßË°åËøô‰∏™  Request„ÄÇ</p>
<h3 id="27-replicaÂ§á‰ªΩ">2.7. replica(Â§á‰ªΩ)</h3>
<p>ÂèØ‰ª•ÁêÜËß£‰∏∫Â§á‰ªΩÂàÜÁâáÔºåÁõ∏Â∫îÂú∞Êúâ primary  shardÔºà‰∏ªÂàÜÁâá)Ôºå‰∏ªÂàÜÁâáÂíåÂ§áÂàÜÁâá‰∏ç‰ºöÂá∫Áé∞Âú®Âêå‰∏Ä‰∏™ËäÇÁÇπ‰∏äÔºàÈò≤Ê≠¢ÂçïÁÇπÊïÖÈöúÔºâÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰∏Ä‰∏™Á¥¢ÂºïÂàõÂª∫5‰∏™ÂàÜÁâá‰∏Ä‰∏™Â§á‰ªΩÔºàÂç≥5primary+5replica=10‰∏™ÂàÜÁâáÔºâ„ÄÇÂ¶ÇÊûú‰Ω†Âè™Êúâ‰∏Ä‰∏™ËäÇÁÇπÔºåÈÇ£‰πà5‰∏™ replica ÈÉΩÊó†Ê≥ïÂàÜÈÖçÔºàunassignedÔºâÔºåÊ≠§Êó∂cluster status‰ºöÂèòÊàêYellow„ÄÇ</p>
<h3 id="28-ÂÄíÊéíÁ¥¢Âºï">2.8 ÂÄíÊéíÁ¥¢Âºï</h3>
<p>Elasticsearch ‰ΩøÁî®‰∏ÄÁßçÁß∞‰∏∫ ÂÄíÊéíÁ¥¢Âºï ÁöÑÁªìÊûÑÔºåÂÆÉÈÄÇÁî®‰∫éÂø´ÈÄüÁöÑÂÖ®ÊñáÊêúÁ¥¢„ÄÇ‰∏Ä‰∏™ÂÄíÊéíÁ¥¢ÂºïÁî±ÊñáÊ°£‰∏≠ÊâÄÊúâ‰∏çÈáçÂ§çËØçÁöÑÂàóË°®ÊûÑÊàêÔºåÂØπ‰∫éÂÖ∂‰∏≠ÊØè‰∏™ËØçÔºåÊúâ‰∏Ä‰∏™ÂåÖÂê´ÂÆÉÁöÑÊñáÊ°£ÂàóË°®„ÄÇ</p>
<h3 id="29-analysis">2.9 analysis</h3>
<p>Document ‰∏≠ÁöÑÊï∞ÊçÆÊòØÂ¶Ç‰ΩïËΩ¨ÂèòÊàêÂÄíÊéíÁ¥¢ÂºïÁöÑÔºå‰ª•ÂèäÊü•ËØ¢ËØ≠Âè•ÊòØÂ¶Ç‰ΩïËΩ¨Êç¢Êàê‰∏Ä‰∏™‰∏™ËØç(Term)‰ΩøÈ´òÊïàÁéáÊñáÊú¨ÊêúÁ¥¢ÂèòÂæóÂèØË°åÔºåËøôÁßçËΩ¨Êç¢Êï∞ÊçÆÁöÑËøáÁ®ãÂ∞±Áß∞‰∏∫ÊñáÊú¨ÂàÜÊûê(analysis)„ÄÇ</p>
<p>elasticsearch‰ºöÁî®ÊüêÁßçÁÆóÊ≥ï(Tokenizer)ÂØπË¶ÅÂª∫Á¥¢ÂºïÁöÑÊñáÊ°£ËøõË°åÂàÜÊûêÔºå  ‰ªéÊñáÊ°£‰∏≠ÊèêÂèñÂá∫Ëã•Âπ≤Token(ËØçÂÖÉ)Ôºå Ëøô‰∫õÁÆóÊ≥ïÁß∞‰∏∫Tokenizer(ÂàÜËØçÂô®)Ôºå Ëøô‰∫õToken‰ºöË¢´Ëøõ‰∏ÄÊ≠•Â§ÑÁêÜÔºå ÊØîÂ¶ÇËΩ¨ÊàêÂ∞èÂÜôÁ≠âÔºå  Ëøô‰∫õËøõ‰∏ÄÊ≠•ÁöÑÂ§ÑÁêÜÁÆóÊ≥ïË¢´Áß∞‰∏∫Filter(ËøáÊª§Âô®), Ë¢´Â§ÑÁêÜÂêéÁöÑÁªìÊûúË¢´Áß∞‰∏∫Term(ËØç)Ôºå  ÊñáÊ°£‰∏≠ÂåÖÂê´‰∫ÜÂá†‰∏™ËøôÊ†∑ÁöÑTermË¢´Áß∞‰∏∫Frequency(ËØçÈ¢ë)„ÄÇ ÂºïÊìé‰ºöÂª∫Á´ãTermÂíåÂéüÊñáÊ°£ÁöÑInverted Index(ÂÄíÊéíÁ¥¢Âºï)Ôºå  ËøôÊ†∑Â∞±ËÉΩÊ†πÊçÆTermÂæàÂø´Âà∞ÊâæÂà∞Ê∫êÊñáÊ°£‰∫Ü„ÄÇ
ÊñáÊú¨ÂàÜÊûê(analysis)Â∑•‰ΩúÁî±analyzer(ÂàÜÊûêÂô®)ÁªÑ‰ª∂Ë¥üË¥£„ÄÇanalyzerÁî±‰∏Ä‰∏™ÂàÜËØçÂô®(tokenizer)Âíå0‰∏™ÊàñËÄÖÂ§ö‰∏™ËøáÊª§Âô®(filter)ÁªÑÊàê,‰πüÂèØËÉΩ‰ºöÊúâ0‰∏™ÊàñËÄÖÂ§ö‰∏™Â≠óÁ¨¶Êò†Â∞ÑÂô®(character mappers)ÁªÑÊàê„ÄÇ
tokenizerÁî®Êù•ÊääÊñáÊú¨ÊãÜÂàÜÊàê‰∏Ä‰∏™‰∏™ÁöÑToken„ÄÇTokenÂåÖÂê´‰∫ÜÊØîËæÉÂ§öÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇTermÂú®ÊñáÊú¨ÁöÑ‰∏≠ÁöÑ‰ΩçÁΩÆÂèäTermÂéüÂßãÊñáÊú¨Ôºå‰ª•ÂèäTermÁöÑÈïøÂ∫¶„ÄÇÊñáÊú¨ÁªèËøátokenizerÂ§ÑÁêÜÂêéÁöÑÁªìÊûúÁß∞‰∏∫token stream„ÄÇtoken streamÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™‰∏™TokenÁöÑÈ°∫Â∫èÊéíÂàó„ÄÇtoken streamÂ∞ÜÁ≠âÂæÖÁùÄfilterÊù•Â§ÑÁêÜ„ÄÇ
filterÈìæÂ∞ÜÁî®Êù•Â§ÑÁêÜToken Stream‰∏≠ÁöÑÊØè‰∏Ä‰∏™token„ÄÇËøô‰∫õÂ§ÑÁêÜÊñπÂºèÂåÖÊã¨Âà†Èô§Token, ÊîπÂèòTokenÔºåÁîöËá≥Ê∑ªÂä†Êñ∞ÁöÑToken„ÄÇÊØîÂ¶ÇÂèòÂ∞èÂÜôÔºåÂéªÊéâÈáåÈù¢ÁöÑHTMLÊ†áËÆ∞Ôºå Ëøô‰∫õÂ§ÑÁêÜÁöÑÁÆóÊ≥ïË¢´Áß∞‰∏∫Character Filter(Â≠óÁ¨¶ËøáÊª§Âô®)</p>
<h3 id="210-esÈõÜÁæ§Áä∂ÊÄÅ">2.10 ESÈõÜÁæ§Áä∂ÊÄÅÔºö</h3>
<ul>
<li>GreenÔºöÊâÄÊúâ‰∏ªÂàÜÁâáÂíåÂ§á‰ªΩÂàÜÁâáÈÉΩÂáÜÂ§áÂ∞±Áª™ÔºàÂàÜÈÖçÊàêÂäüÔºâÔºåÂç≥‰ΩøÊúâ‰∏ÄÂè∞Êú∫Âô®ÊåÇ‰∫ÜÔºàÂÅáËÆæ‰∏ÄÂè∞Êú∫Âô®‰∏Ä‰∏™ÂÆû‰æãÔºâÔºåÊï∞ÊçÆÈÉΩ‰∏ç‰ºö‰∏¢Â§±Ôºå‰ΩÜ‰ºöÂèòÊàêYellowÁä∂ÊÄÅ</li>
<li>YellowÔºöÊâÄÊúâ‰∏ªÂàÜÁâáÂáÜÂ§áÂ∞±Áª™Ôºå‰ΩÜÂ≠òÂú®Ëá≥Â∞ë‰∏Ä‰∏™‰∏ªÂàÜÁâáÔºàÂÅáËÆæÊòØAÔºâÂØπÂ∫îÁöÑÂ§á‰ªΩÂàÜÁâáÊ≤°ÊúâÂ∞±Áª™ÔºåÊ≠§Êó∂ÈõÜÁæ§Â±û‰∫éË≠¶ÂëäÁä∂ÊÄÅÔºåÊÑèÂë≥ÁùÄÈõÜÁæ§È´òÂèØÁî®ÂíåÂÆπÁÅæËÉΩÂäõ‰∏ãÈôçÔºåÂ¶ÇÊûúÂàöÂ•ΩAÊâÄÂú®ÁöÑÊú∫Âô®ÊåÇ‰∫ÜÔºåÂπ∂‰∏î‰Ω†Âè™ËÆæÁΩÆ‰∫Ü‰∏Ä‰∏™Â§á‰ªΩÔºàÂ∑≤Â§Ñ‰∫éÊú™Â∞±Áª™Áä∂ÊÄÅÔºâÔºåÈÇ£‰πàAÁöÑÊï∞ÊçÆÂ∞±‰ºö‰∏¢Â§±ÔºàÊü•ËØ¢ÁªìÊûú‰∏çÂÆåÊï¥ÔºâÔºåÊ≠§Êó∂ÈõÜÁæ§ËøõÂÖ•RedÁä∂ÊÄÅ</li>
<li>RedÔºöËá≥Â∞ëÊúâ‰∏Ä‰∏™‰∏ªÂàÜÁâáÊ≤°ÊúâÂ∞±Áª™ÔºàÁõ¥Êé•ÂéüÂõ†ÊòØÊâæ‰∏çÂà∞ÂØπÂ∫îÁöÑÂ§á‰ªΩÂàÜÁâáÊàê‰∏∫Êñ∞ÁöÑ‰∏ªÂàÜÁâáÔºâ,Ê≠§Êó∂Êü•ËØ¢ÁöÑÁªìÊûú‰ºöÂá∫Áé∞Êï∞ÊçÆ‰∏¢Â§±Ôºà‰∏çÂÆåÊï¥Ôºâ</li>
</ul>
<h3 id="211-replica‰ΩúÁî®">2.11 replica‰ΩúÁî®Ôºö</h3>
<ul>
<li>ÂÆπÁÅæÔºöprimaryÂàÜÁâá‰∏¢Â§±ÔºåreplicaÂàÜÁâáÂ∞±‰ºöË¢´È°∂‰∏äÂéªÊàê‰∏∫Êñ∞ÁöÑ‰∏ªÂàÜÁâáÔºåÂêåÊó∂Ê†πÊçÆËøô‰∏™Êñ∞ÁöÑ‰∏ªÂàÜÁâáÂàõÂª∫Êñ∞ÁöÑreplicaÔºåÈõÜÁæ§Êï∞ÊçÆÂÆâÁÑ∂Êó†ÊÅô;</li>
<li>ÊèêÈ´òÊü•ËØ¢ÊÄßËÉΩÔºöreplicaÂíåprimaryÂàÜÁâáÁöÑÊï∞ÊçÆÊòØÁõ∏ÂêåÁöÑÔºåÊâÄ‰ª•ÂØπ‰∫é‰∏Ä‰∏™queryÊó¢ÂèØ‰ª•Êü•‰∏ªÂàÜÁâá‰πüÂèØ‰ª•Êü•Â§áÂàÜÁâáÔºåÂú®ÂêàÈÄÇÁöÑËåÉÂõ¥ÂÜÖÂ§ö‰∏™replicaÊÄßËÉΩ‰ºöÊõ¥‰ºòÔºà‰ΩÜË¶ÅËÄÉËôëËµÑÊ∫êÂç†Áî®‰πü‰ºöÊèêÂçá[cpu/disk/heap]ÔºâÔºåÂè¶Â§ñindex requestÂè™ËÉΩÂèëÁîüÂú®‰∏ªÂàÜÁâá‰∏äÔºåreplica‰∏çËÉΩÊâßË°åindex request„ÄÇ</li>
</ul>
<p>ÂØπ‰∫é‰∏Ä‰∏™Á¥¢ÂºïÔºåÈô§ÈùûÈáçÂª∫Á¥¢ÂºïÂê¶Âàô‰∏çËÉΩË∞ÉÊï¥ÂàÜÁâáÁöÑÊï∞ÁõÆÔºà‰∏ªÂàÜÁâáÊï∞, number_of_shardsÔºâÔºå‰ΩÜÂèØ‰ª•ÈöèÊó∂Ë∞ÉÊï¥ replica Êï∞(number_of_replicas)„ÄÇ</p>
<h2 id="‰∏âÊñ∞Âª∫ÂíåÂà†Èô§-index">‰∏â„ÄÅÊñ∞Âª∫ÂíåÂà†Èô§ Index</h2>
<p>Êñ∞Âª∫ IndexÔºåÂèØ‰ª•Áõ¥Êé•Âêë Elastic ÊúçÂä°Âô®ÂèëÂá∫ PUT ËØ∑Ê±Ç„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòØÊñ∞Âª∫‰∏Ä‰∏™ÂêçÂè´<code>weather</code>ÁöÑ Index„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X PUT <span style="color:#e6db74">&#39;localhost:9200/weather&#39;</span>
</span></span></code></pre></div></blockquote>
<p>ÊúçÂä°Âô®ËøîÂõû‰∏Ä‰∏™ JSON ÂØπË±°ÔºåÈáåÈù¢ÁöÑ<code>acknowledged</code>Â≠óÊÆµË°®Á§∫Êìç‰ΩúÊàêÂäü„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;acknowledged&#34;</span><span style="color:#f92672">:</span><span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;shards_acknowledged&#34;</span><span style="color:#f92672">:</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></blockquote>
<p>ÁÑ∂ÂêéÔºåÊàë‰ª¨ÂèëÂá∫ DELETE ËØ∑Ê±ÇÔºåÂà†Èô§Ëøô‰∏™ Index„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X DELETE <span style="color:#e6db74">&#39;localhost:9200/weather&#39;</span>
</span></span></code></pre></div></blockquote>
<h2 id="Âõõ‰∏≠ÊñáÂàÜËØçËÆæÁΩÆ">Âõõ„ÄÅ‰∏≠ÊñáÂàÜËØçËÆæÁΩÆ</h2>
<p>È¶ñÂÖàÔºåÂÆâË£Ö‰∏≠ÊñáÂàÜËØçÊèí‰ª∂„ÄÇËøôÈáå‰ΩøÁî®ÁöÑÊòØ <a class="link" href="https://github.com/medcl/elasticsearch-analysis-ik/"  target="_blank" rel="noopener"
    >ik</a>Ôºå‰πüÂèØ‰ª•ËÄÉËôëÂÖ∂‰ªñÊèí‰ª∂ÔºàÊØîÂ¶Ç <a class="link" href="https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-smartcn.html"  target="_blank" rel="noopener"
    >smartcn</a>Ôºâ„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">$</span> .<span style="color:#f92672">/</span><span style="color:#a6e22e">bin</span><span style="color:#f92672">/</span><span style="color:#a6e22e">elasticsearch</span><span style="color:#f92672">-</span><span style="color:#a6e22e">plugin</span> <span style="color:#a6e22e">install</span> <span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//github.com/medcl/elasticsearch-analysis-ik/releases/download/v5.5.1/elasticsearch-analysis-ik-5.5.1.zip
</span></span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†ÅÂÆâË£ÖÁöÑÊòØ5.5.1ÁâàÁöÑÊèí‰ª∂Ôºå‰∏é Elastic 5.5.1 ÈÖçÂêà‰ΩøÁî®„ÄÇ</p>
<p>Êé•ÁùÄÔºåÈáçÊñ∞ÂêØÂä® ElasticÔºåÂ∞±‰ºöËá™Âä®Âä†ËΩΩËøô‰∏™Êñ∞ÂÆâË£ÖÁöÑÊèí‰ª∂„ÄÇ</p>
<p>ÁÑ∂ÂêéÔºåÊñ∞Âª∫‰∏Ä‰∏™ IndexÔºåÊåáÂÆöÈúÄË¶ÅÂàÜËØçÁöÑÂ≠óÊÆµ„ÄÇËøô‰∏ÄÊ≠•Ê†πÊçÆÊï∞ÊçÆÁªìÊûÑËÄåÂºÇÔºå‰∏ãÈù¢ÁöÑÂëΩ‰ª§Âè™ÈíàÂØπÊú¨Êñá„ÄÇÂü∫Êú¨‰∏äÔºåÂá°ÊòØÈúÄË¶ÅÊêúÁ¥¢ÁöÑ‰∏≠ÊñáÂ≠óÊÆµÔºåÈÉΩË¶ÅÂçïÁã¨ËÆæÁΩÆ‰∏Ä‰∏ã„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X PUT <span style="color:#e6db74">&#39;localhost:9200/accounts&#39;</span> -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;mappings&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;person&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      &#34;properties&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;user&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;type&#34;: &#34;text&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;analyzer&#34;: &#34;ik_max_word&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;search_analyzer&#34;: &#34;ik_max_word&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        },
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;title&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;type&#34;: &#34;text&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;analyzer&#34;: &#34;ik_max_word&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;search_analyzer&#34;: &#34;ik_max_word&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        },
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;desc&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;type&#34;: &#34;text&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;analyzer&#34;: &#34;ik_max_word&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;search_analyzer&#34;: &#34;ik_max_word&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÈ¶ñÂÖàÊñ∞Âª∫‰∏Ä‰∏™ÂêçÁß∞‰∏∫<code>accounts</code>ÁöÑ IndexÔºåÈáåÈù¢Êúâ‰∏Ä‰∏™ÂêçÁß∞‰∏∫<code>person</code>ÁöÑ Type„ÄÇ<code>person</code>Êúâ‰∏â‰∏™Â≠óÊÆµ„ÄÇ</p>
<blockquote>
<ul>
<li>user</li>
<li>title</li>
<li>desc</li>
</ul>
</blockquote>
<p>Ëøô‰∏â‰∏™Â≠óÊÆµÈÉΩÊòØ‰∏≠ÊñáÔºåËÄå‰∏îÁ±ªÂûãÈÉΩÊòØÊñáÊú¨ÔºàtextÔºâÔºåÊâÄ‰ª•ÈúÄË¶ÅÊåáÂÆö‰∏≠ÊñáÂàÜËØçÂô®Ôºå‰∏çËÉΩ‰ΩøÁî®ÈªòËÆ§ÁöÑËã±ÊñáÂàÜËØçÂô®„ÄÇ</p>
<p>Elastic ÁöÑÂàÜËØçÂô®Áß∞‰∏∫ <a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"  target="_blank" rel="noopener"
    >analyzer</a>„ÄÇÊàë‰ª¨ÂØπÊØè‰∏™Â≠óÊÆµÊåáÂÆöÂàÜËØçÂô®„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;user&#34;</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;text&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;analyzer&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ik_max_word&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;search_analyzer&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ik_max_word&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰∏≠Ôºå<code>analyzer</code>ÊòØÂ≠óÊÆµÊñáÊú¨ÁöÑÂàÜËØçÂô®Ôºå<code>search_analyzer</code>ÊòØÊêúÁ¥¢ËØçÁöÑÂàÜËØçÂô®„ÄÇ<code>ik_max_word</code>ÂàÜËØçÂô®ÊòØÊèí‰ª∂<code>ik</code>Êèê‰æõÁöÑÔºåÂèØ‰ª•ÂØπÊñáÊú¨ËøõË°åÊúÄÂ§ßÊï∞ÈáèÁöÑÂàÜËØç„ÄÇ</p>
<h2 id="‰∫îÊï∞ÊçÆÊìç‰Ωú">‰∫î„ÄÅÊï∞ÊçÆÊìç‰Ωú</h2>
<h3 id="51-Êñ∞Â¢ûËÆ∞ÂΩï">5.1 Êñ∞Â¢ûËÆ∞ÂΩï</h3>
<p>ÂêëÊåáÂÆöÁöÑ /Index/Type ÂèëÈÄÅ PUT ËØ∑Ê±ÇÔºåÂ∞±ÂèØ‰ª•Âú® Index ÈáåÈù¢Êñ∞Â¢û‰∏ÄÊù°ËÆ∞ÂΩï„ÄÇÊØîÂ¶ÇÔºåÂêë<code>/accounts/person</code>ÂèëÈÄÅËØ∑Ê±ÇÔºåÂ∞±ÂèØ‰ª•Êñ∞Â¢û‰∏ÄÊù°‰∫∫ÂëòËÆ∞ÂΩï„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X PUT <span style="color:#e6db74">&#39;localhost:9200/accounts/person/1&#39;</span> -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;user&#34;: &#34;Âº†‰∏â&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;title&#34;: &#34;Â∑•Á®ãÂ∏à&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;desc&#34;: &#34;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜ&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<p>ÊúçÂä°Âô®ËøîÂõûÁöÑ JSON ÂØπË±°Ôºå‰ºöÁªôÂá∫ Index„ÄÅType„ÄÅId„ÄÅVersion Á≠â‰ø°ÊÅØ„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_index&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_type&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_version&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;created&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_shards&#34;</span><span style="color:#f92672">:</span>{<span style="color:#e6db74">&#34;total&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#34;successful&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#34;failed&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>},
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;created&#34;</span><span style="color:#f92672">:</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></blockquote>
<p>Â¶ÇÊûú‰Ω†‰ªîÁªÜÁúãÔºå‰ºöÂèëÁé∞ËØ∑Ê±ÇË∑ØÂæÑÊòØ<code>/accounts/person/1</code>ÔºåÊúÄÂêéÁöÑ<code>1</code>ÊòØËØ•Êù°ËÆ∞ÂΩïÁöÑ Id„ÄÇÂÆÉ‰∏ç‰∏ÄÂÆöÊòØÊï∞Â≠óÔºå‰ªªÊÑèÂ≠óÁ¨¶‰∏≤ÔºàÊØîÂ¶Ç<code>abc</code>ÔºâÈÉΩÂèØ‰ª•„ÄÇ</p>
<p>Êñ∞Â¢ûËÆ∞ÂΩïÁöÑÊó∂ÂÄôÔºå‰πüÂèØ‰ª•‰∏çÊåáÂÆö IdÔºåËøôÊó∂Ë¶ÅÊîπÊàê POST ËØ∑Ê±Ç„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X POST <span style="color:#e6db74">&#39;localhost:9200/accounts/person&#39;</span> -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;user&#34;: &#34;ÊùéÂõõ&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;title&#34;: &#34;Â∑•Á®ãÂ∏à&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;desc&#34;: &#34;Á≥ªÁªüÁÆ°ÁêÜ&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂêë<code>/accounts/person</code>ÂèëÂá∫‰∏Ä‰∏™ POST ËØ∑Ê±ÇÔºåÊ∑ªÂä†‰∏Ä‰∏™ËÆ∞ÂΩï„ÄÇËøôÊó∂ÔºåÊúçÂä°Âô®ËøîÂõûÁöÑ JSON ÂØπË±°ÈáåÈù¢Ôºå<code>_id</code>Â≠óÊÆµÂ∞±ÊòØ‰∏Ä‰∏™ÈöèÊú∫Â≠óÁ¨¶‰∏≤„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_index&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_type&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;AV3qGfrC6jMbsbXb6k1p&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_version&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;created&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_shards&#34;</span><span style="color:#f92672">:</span>{<span style="color:#e6db74">&#34;total&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,<span style="color:#e6db74">&#34;successful&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#34;failed&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>},
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;created&#34;</span><span style="color:#f92672">:</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></blockquote>
<p>Ê≥®ÊÑèÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÖàÂàõÂª∫ IndexÔºàËøô‰∏™‰æãÂ≠êÊòØ<code>accounts</code>ÔºâÔºåÁõ¥Êé•ÊâßË°å‰∏äÈù¢ÁöÑÂëΩ‰ª§ÔºåElastic ‰πü‰∏ç‰ºöÊä•ÈîôÔºåËÄåÊòØÁõ¥Êé•ÁîüÊàêÊåáÂÆöÁöÑ Index„ÄÇÊâÄ‰ª•ÔºåÊâìÂ≠óÁöÑÊó∂ÂÄôË¶ÅÂ∞èÂøÉÔºå‰∏çË¶ÅÂÜôÈîô Index ÁöÑÂêçÁß∞„ÄÇ</p>
<h3 id="52-Êü•ÁúãËÆ∞ÂΩï">5.2 Êü•ÁúãËÆ∞ÂΩï</h3>
<p>Âêë<code>/Index/Type/Id</code>ÂèëÂá∫ GET ËØ∑Ê±ÇÔºåÂ∞±ÂèØ‰ª•Êü•ÁúãËøôÊù°ËÆ∞ÂΩï„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/accounts/person/1?pretty=true&#39;</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†ÅËØ∑Ê±ÇÊü•Áúã<code>/accounts/person/1</code>ËøôÊù°ËÆ∞ÂΩïÔºåURL ÁöÑÂèÇÊï∞<code>pretty=true</code>Ë°®Á§∫‰ª•ÊòìËØªÁöÑÊ†ºÂºèËøîÂõû„ÄÇ</p>
<p>ËøîÂõûÁöÑÊï∞ÊçÆ‰∏≠Ôºå<code>found</code>Â≠óÊÆµË°®Á§∫Êü•ËØ¢ÊàêÂäüÔºå<code>_source</code>Â≠óÊÆµËøîÂõûÂéüÂßãËÆ∞ÂΩï„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_index&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_type&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_id&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_version&#34;</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;found&#34;</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_source&#34;</span> <span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;user&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Âº†‰∏â&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;title&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Â∑•Á®ãÂ∏à&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;desc&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜ&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></blockquote>
<p>Â¶ÇÊûú Id ‰∏çÊ≠£Á°ÆÔºåÂ∞±Êü•‰∏çÂà∞Êï∞ÊçÆÔºå<code>found</code>Â≠óÊÆµÂ∞±ÊòØ<code>false</code>„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/weather/beijing/abc?pretty=true&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_index&#34;</span> : <span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_type&#34;</span> : <span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_id&#34;</span> : <span style="color:#e6db74">&#34;abc&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;found&#34;</span> : false
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></blockquote>
<h3 id="53-Âà†Èô§ËÆ∞ÂΩï">5.3 Âà†Èô§ËÆ∞ÂΩï</h3>
<p>Âà†Èô§ËÆ∞ÂΩïÂ∞±ÊòØÂèëÂá∫ DELETE ËØ∑Ê±Ç„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X DELETE <span style="color:#e6db74">&#39;localhost:9200/accounts/person/1&#39;</span>
</span></span></code></pre></div></blockquote>
<p>ËøôÈáåÂÖà‰∏çË¶ÅÂà†Èô§ËøôÊù°ËÆ∞ÂΩïÔºåÂêéÈù¢ËøòË¶ÅÁî®Âà∞„ÄÇ</p>
<h3 id="54-Êõ¥Êñ∞ËÆ∞ÂΩï">5.4 Êõ¥Êñ∞ËÆ∞ÂΩï</h3>
<p>Êõ¥Êñ∞ËÆ∞ÂΩïÂ∞±ÊòØ‰ΩøÁî® PUT ËØ∑Ê±ÇÔºåÈáçÊñ∞ÂèëÈÄÅ‰∏ÄÊ¨°Êï∞ÊçÆ„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl -X PUT <span style="color:#e6db74">&#39;localhost:9200/accounts/person/1&#39;</span> -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;user&#34; : &#34;Âº†‰∏â&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;title&#34; : &#34;Â∑•Á®ãÂ∏à&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;desc&#34; : &#34;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÔºåËΩØ‰ª∂ÂºÄÂèë&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_index&#34;</span>:<span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_type&#34;</span>:<span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_id&#34;</span>:<span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_version&#34;</span>:2,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;result&#34;</span>:<span style="color:#e6db74">&#34;updated&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_shards&#34;</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;total&#34;</span>:2,<span style="color:#e6db74">&#34;successful&#34;</span>:1,<span style="color:#e6db74">&#34;failed&#34;</span>:0<span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;created&#34;</span>:false
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨Â∞ÜÂéüÂßãÊï∞ÊçÆ‰ªé&quot;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜ&quot;ÊîπÊàê&quot;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÔºåËΩØ‰ª∂ÂºÄÂèë&quot;„ÄÇ ËøîÂõûÁªìÊûúÈáåÈù¢ÔºåÊúâÂá†‰∏™Â≠óÊÆµÂèëÁîü‰∫ÜÂèòÂåñ„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;_version&#34;</span> : 2,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;result&#34;</span> : <span style="color:#e6db74">&#34;updated&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;created&#34;</span> : false
</span></span></code></pre></div></blockquote>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåËÆ∞ÂΩïÁöÑ Id Ê≤°ÂèòÔºå‰ΩÜÊòØÁâàÊú¨ÔºàversionÔºâ‰ªé<code>1</code>ÂèòÊàê<code>2</code>ÔºåÊìç‰ΩúÁ±ªÂûãÔºàresultÔºâ‰ªé<code>created</code>ÂèòÊàê<code>updated</code>Ôºå<code>created</code>Â≠óÊÆµÂèòÊàê<code>false</code>ÔºåÂõ†‰∏∫ËøôÊ¨°‰∏çÊòØÊñ∞Âª∫ËÆ∞ÂΩï„ÄÇ</p>
<h3 id="55-Êìç‰ΩúÁ¥¢Âºï">5.5 Êìç‰ΩúÁ¥¢Âºï</h3>
<p>Êñ∞Âª∫Á¥¢ÂºïÊó∂ÂèØ‰ª•ÊåáÂÆöËÆæÁΩÆÊàñËÄÖÊò†Â∞ÑÔºå‰πüÂèØ‰ª•‰∏çÊåáÂÆöËá™Âä®ÁîüÊàê</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ PUT foo_index
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;settings&#34;</span>: <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;number_of_shards&#34;</span> :   1,   <span style="color:#75715e">#ÊØè‰∏™Á¥¢ÂºïÁöÑ‰∏ªÂàÜÁâáÊï∞ÔºåÈªòËÆ§ÂÄºÊòØ 5 „ÄÇËøô‰∏™ÈÖçÁΩÆÂú®Á¥¢ÂºïÂàõÂª∫Âêé‰∏çËÉΩ‰øÆÊîπ„ÄÇ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;number_of_replicas&#34;</span> : <span style="color:#ae81ff">0</span>    <span style="color:#75715e">#ÊØè‰∏™‰∏ªÂàÜÁâáÁöÑÂâØÊú¨Êï∞ÔºåÈªòËÆ§ÂÄºÊòØ 1 „ÄÇÂØπ‰∫éÊ¥ªÂä®ÁöÑÁ¥¢ÂºïÂ∫ìÔºåËøô‰∏™ÈÖçÁΩÆÂèØ‰ª•ÈöèÊó∂‰øÆÊîπ„ÄÇ</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;mappings&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;type_one&#34;</span>: <span style="color:#f92672">{</span> ... any mappings ... <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;type_two&#34;</span>: <span style="color:#f92672">{</span> ... any mappings ... <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>‰øÆÊîπÁ¥¢ÂºïËÆæÁΩÆ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ PUT foo_index/_settings
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;number_of_replicas&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>‰øÆÊîπÁ¥¢ÂºïÊò†Â∞Ñ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ PUT foo_index/_mappings/_doc
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;properties&#34;</span>: <span style="color:#f92672">{</span>...<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Âà†Èô§Á¥¢Âºï</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ DELETE foo_index
</span></span></code></pre></div><h3 id="56-Êìç‰ΩúÊñáÊ°£">5.6 Êìç‰ΩúÊñáÊ°£</h3>
<p>‰ΩøÁî®putÊñ∞Âª∫ÊñáÊ°£È°πÊåáÂÆöid‰∏∫1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ PUT foo_index/_doc/1
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;demo 1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;body&#34;</span>: <span style="color:#e6db74">&#34;demo foo bar&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>‰ΩøÁî®postÂèØ‰ª•‰∏çÊåáÂÆöidÊù•Êñ∞Âª∫ÊñáÊ°£ÔºåËá™Âä®ÁîüÊàêid</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ POST foo_index/_doc
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;demo test&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;body&#34;</span>: <span style="color:#e6db74">&#34;demo test&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Êü•Áúãid=1ÁöÑÊñáÊ°£</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ GET foo_index/_doc/1
</span></span></code></pre></div><h2 id="ÂÖ≠Êï∞ÊçÆÊü•ËØ¢">ÂÖ≠„ÄÅÊï∞ÊçÆÊü•ËØ¢</h2>
<h3 id="61-ËøîÂõûÊâÄÊúâËÆ∞ÂΩï">6.1 ËøîÂõûÊâÄÊúâËÆ∞ÂΩï</h3>
<p>‰ΩøÁî® GET ÊñπÊ≥ïÔºåÁõ¥Êé•ËØ∑Ê±Ç<code>/Index/Type/_search</code>ÔºåÂ∞±‰ºöËøîÂõûÊâÄÊúâËÆ∞ÂΩï„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/accounts/person/_search&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;took&#34;</span>:2,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;timed_out&#34;</span>:false,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;_shards&#34;</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;total&#34;</span>:5,<span style="color:#e6db74">&#34;successful&#34;</span>:5,<span style="color:#e6db74">&#34;failed&#34;</span>:0<span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;hits&#34;</span>:<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;total&#34;</span>:2,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;max_score&#34;</span>:1.0,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;hits&#34;</span>:<span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_index&#34;</span>:<span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_type&#34;</span>:<span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_id&#34;</span>:<span style="color:#e6db74">&#34;AV3qGfrC6jMbsbXb6k1p&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_score&#34;</span>:1.0,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_source&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;user&#34;</span>: <span style="color:#e6db74">&#34;ÊùéÂõõ&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Â∑•Á®ãÂ∏à&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;desc&#34;</span>: <span style="color:#e6db74">&#34;Á≥ªÁªüÁÆ°ÁêÜ&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_index&#34;</span>:<span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_type&#34;</span>:<span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_id&#34;</span>:<span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_score&#34;</span>:1.0,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;_source&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;user&#34;</span> : <span style="color:#e6db74">&#34;Âº†‰∏â&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;title&#34;</span> : <span style="color:#e6db74">&#34;Â∑•Á®ãÂ∏à&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;desc&#34;</span> : <span style="color:#e6db74">&#34;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÔºåËΩØ‰ª∂ÂºÄÂèë&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåËøîÂõûÁªìÊûúÁöÑ <code>took</code>Â≠óÊÆµË°®Á§∫ËØ•Êìç‰ΩúÁöÑËÄóÊó∂ÔºàÂçï‰Ωç‰∏∫ÊØ´ÁßíÔºâÔºå<code>timed_out</code>Â≠óÊÆµË°®Á§∫ÊòØÂê¶Ë∂ÖÊó∂Ôºå<code>hits</code>Â≠óÊÆµË°®Á§∫ÂëΩ‰∏≠ÁöÑËÆ∞ÂΩïÔºåÈáåÈù¢Â≠êÂ≠óÊÆµÁöÑÂê´‰πâÂ¶Ç‰∏ã„ÄÇ</p>
<blockquote>
<ul>
<li><code>total</code>ÔºöËøîÂõûËÆ∞ÂΩïÊï∞ÔºåÊú¨‰æãÊòØ2Êù°„ÄÇ</li>
<li><code>max_score</code>ÔºöÊúÄÈ´òÁöÑÂåπÈÖçÁ®ãÂ∫¶ÔºåÊú¨‰æãÊòØ<code>1.0</code>„ÄÇ</li>
<li><code>hits</code>ÔºöËøîÂõûÁöÑËÆ∞ÂΩïÁªÑÊàêÁöÑÊï∞ÁªÑ„ÄÇ</li>
</ul>
</blockquote>
<p>ËøîÂõûÁöÑËÆ∞ÂΩï‰∏≠ÔºåÊØèÊù°ËÆ∞ÂΩïÈÉΩÊúâ‰∏Ä‰∏™<code>_score</code>Â≠óÊÆµÔºåË°®Á§∫ÂåπÈÖçÁöÑÁ®ãÂ∫èÔºåÈªòËÆ§ÊòØÊåâÁÖßËøô‰∏™Â≠óÊÆµÈôçÂ∫èÊéíÂàó„ÄÇ</p>
<h3 id="62-ÂÖ®ÊñáÊêúÁ¥¢">6.2 ÂÖ®ÊñáÊêúÁ¥¢</h3>
<p>Elastic ÁöÑÊü•ËØ¢ÈùûÂ∏∏ÁâπÂà´Ôºå‰ΩøÁî®Ëá™Â∑±ÁöÑ<a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl.html"  target="_blank" rel="noopener"
    >Êü•ËØ¢ËØ≠Ê≥ï</a>ÔºåË¶ÅÊ±Ç GET ËØ∑Ê±ÇÂ∏¶ÊúâÊï∞ÊçÆ‰Ωì„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/accounts/person/_search&#39;</span>  -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;query&#34; : { &#34;match&#34; : { &#34;desc&#34; : &#34;ËΩØ‰ª∂&#34; }}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†Å‰ΩøÁî® <a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-match-query.html"  target="_blank" rel="noopener"
    >Match Êü•ËØ¢</a>ÔºåÊåáÂÆöÁöÑÂåπÈÖçÊù°‰ª∂ÊòØ<code>desc</code>Â≠óÊÆµÈáåÈù¢ÂåÖÂê´&quot;ËΩØ‰ª∂&quot;Ëøô‰∏™ËØç„ÄÇËøîÂõûÁªìÊûúÂ¶Ç‰∏ã„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;took&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;timed_out&#34;</span><span style="color:#f92672">:</span><span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;_shards&#34;</span><span style="color:#f92672">:</span>{<span style="color:#e6db74">&#34;total&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>,<span style="color:#e6db74">&#34;successful&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>,<span style="color:#e6db74">&#34;failed&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>},
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;hits&#34;</span><span style="color:#f92672">:</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;total&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;max_score&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0.28582606</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;hits&#34;</span><span style="color:#f92672">:</span>[
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;_index&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;accounts&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;_type&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;_score&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0.28582606</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;_source&#34;</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;user&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Âº†‰∏â&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;title&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Â∑•Á®ãÂ∏à&#34;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;desc&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÔºåËΩØ‰ª∂ÂºÄÂèë&#34;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></blockquote>
<p>Elastic ÈªòËÆ§‰∏ÄÊ¨°ËøîÂõû10Êù°ÁªìÊûúÔºåÂèØ‰ª•ÈÄöËøá<code>size</code>Â≠óÊÆµÊîπÂèòËøô‰∏™ËÆæÁΩÆ„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/accounts/person/_search&#39;</span>  -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;query&#34; : { &#34;match&#34; : { &#34;desc&#34; : &#34;ÁÆ°ÁêÜ&#34; }},
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;size&#34;: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†ÅÊåáÂÆöÔºåÊØèÊ¨°Âè™ËøîÂõû‰∏ÄÊù°ÁªìÊûú„ÄÇ</p>
<p>ËøòÂèØ‰ª•ÈÄöËøá<code>from</code>Â≠óÊÆµÔºåÊåáÂÆö‰ΩçÁßª„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/accounts/person/_search&#39;</span>  -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;query&#34; : { &#34;match&#34; : { &#34;desc&#34; : &#34;ÁÆ°ÁêÜ&#34; }},
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;from&#34;: 1,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;size&#34;: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†ÅÊåáÂÆöÔºå‰ªé‰ΩçÁΩÆ1ÂºÄÂßãÔºàÈªòËÆ§ÊòØ‰ªé‰ΩçÁΩÆ0ÂºÄÂßãÔºâÔºåÂè™ËøîÂõû‰∏ÄÊù°ÁªìÊûú„ÄÇ</p>
<h3 id="63-ÈÄªËæëËøêÁÆó">6.3 ÈÄªËæëËøêÁÆó</h3>
<p>Â¶ÇÊûúÊúâÂ§ö‰∏™ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠óÔºå Elastic ËÆ§‰∏∫ÂÆÉ‰ª¨ÊòØ<code>or</code>ÂÖ≥Á≥ª„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/accounts/person/_search&#39;</span>  -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;query&#34; : { &#34;match&#34; : { &#34;desc&#34; : &#34;ËΩØ‰ª∂ Á≥ªÁªü&#34; }}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<p>‰∏äÈù¢‰ª£Á†ÅÊêúÁ¥¢ÁöÑÊòØ<code>ËΩØ‰ª∂ or Á≥ªÁªü</code>„ÄÇ</p>
<p>Â¶ÇÊûúË¶ÅÊâßË°åÂ§ö‰∏™ÂÖ≥ÈîÆËØçÁöÑ<code>and</code>ÊêúÁ¥¢ÔºåÂøÖÈ°ª‰ΩøÁî®<a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-bool-query.html"  target="_blank" rel="noopener"
    >Â∏ÉÂ∞îÊü•ËØ¢</a>„ÄÇ</p>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ curl <span style="color:#e6db74">&#39;localhost:9200/accounts/person/_search&#39;</span>  -d <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;query&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;bool&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      &#34;must&#34;: [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        { &#34;match&#34;: { &#34;desc&#34;: &#34;ËΩØ‰ª∂&#34; } },
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        { &#34;match&#34;: { &#34;desc&#34;: &#34;Á≥ªÁªü&#34; } }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}&#39;</span>
</span></span></code></pre></div></blockquote>
<h3 id="64-ÊêúÁ¥¢demo">6.4 ÊêúÁ¥¢demo</h3>
<p>‰ΩøÁî® <code>curl -X GET foo_index/_search -d 'body'</code> Êù•ÊêúÁ¥¢ÊñáÊ°£</p>
<p>match_allÂåπÈÖçÊâÄÊúâÊñáÊ°£ÔºåÁ≠â‰ª∑‰∫éÁ©∫Êü•ËØ¢{}</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;query&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;match_all&#34;</span>: {}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>mathcÂåπÈÖçÂåÖÂê´ÔºåÂ¶ÇÊûúÂú®‰∏Ä‰∏™Á≤æÁ°ÆÂÄºÁöÑÂ≠óÊÆµ‰∏ä‰ΩøÁî®matchÔºå‰æãÂ¶ÇÊï∞Â≠ó„ÄÅÊó•Êúü„ÄÅÂ∏ÉÂ∞îÊàñËÄÖ‰∏Ä‰∏™ not_analyzed Â≠óÁ¨¶‰∏≤Â≠óÊÆµÔºåÈÇ£‰πàÂÆÉÂ∞Ü‰ºöÁ≤æÁ°ÆÂåπÈÖçÁªôÂÆöÁöÑÂÄºÔºö</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;query&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;match&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;demo&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Â§öÂ≠óÊÆµmatch‰ΩøÁî®multi_match</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;multi_match&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;query&#34;</span>:    <span style="color:#e6db74">&#34;full text search&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;fields&#34;</span>:   [ <span style="color:#e6db74">&#34;title&#34;</span>, <span style="color:#e6db74">&#34;body&#34;</span> ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>termÊü•ËØ¢Ë¢´Áî®‰∫éÁ≤æÁ°ÆÂÄºÂåπÈÖçÔºåËøô‰∫õÁ≤æÁ°ÆÂÄºÂèØËÉΩÊòØÊï∞Â≠ó„ÄÅÊó∂Èó¥„ÄÅÂ∏ÉÂ∞îÊàñËÄÖÈÇ£‰∫õ not_analyzed ÁöÑÂ≠óÁ¨¶‰∏≤Ôºåterm Êü•ËØ¢ÂØπ‰∫éËæìÂÖ•ÁöÑÊñáÊú¨‰∏çÂàÜÊûê ÔºåÊâÄ‰ª•ÂÆÉÂ∞ÜÁªôÂÆöÁöÑÂÄºËøõË°åÁ≤æÁ°ÆÊü•ËØ¢</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;query&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;term&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;demo&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>termsÊü•ËØ¢Ë¢´Áî®‰∫éÂåπÈÖçÂ§ö‰∏™Á≤æÁ°ÆÂÄº</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;query&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;terms&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;name&#34;</span>: [<span style="color:#e6db74">&#34;demo&#34;</span>, <span style="color:#e6db74">&#34;demo1&#34;</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ÂêàÂπ∂(bool)Êü•ËØ¢ÂèØ‰ª•ÁªÑÂêàÂ§öÁßçÊü•ËØ¢ÊñπÊ≥ï</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;bool&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;must&#34;</span>:     { <span style="color:#f92672">&#34;match&#34;</span>: { <span style="color:#f92672">&#34;tweet&#34;</span>: <span style="color:#e6db74">&#34;elasticsearch&#34;</span> }},
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;must_not&#34;</span>: { <span style="color:#f92672">&#34;match&#34;</span>: { <span style="color:#f92672">&#34;name&#34;</span>:  <span style="color:#e6db74">&#34;mary&#34;</span> }},
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;should&#34;</span>:   { <span style="color:#f92672">&#34;match&#34;</span>: { <span style="color:#f92672">&#34;tweet&#34;</span>: <span style="color:#e6db74">&#34;full text&#34;</span> }},
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;filter&#34;</span>:   { <span style="color:#f92672">&#34;range&#34;</span>: { <span style="color:#f92672">&#34;age&#34;</span> : { <span style="color:#f92672">&#34;gt&#34;</span> : <span style="color:#ae81ff">30</span> }} }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="‰∏ÉÂèÇËÄÉÈìæÊé•">‰∏É„ÄÅÂèÇËÄÉÈìæÊé•</h2>
<ul>
<li><a class="link" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html"  target="_blank" rel="noopener"
    >ElasticSearch ÂÆòÊñπÊâãÂÜå</a></li>
<li><a class="link" href="https://www.elastic.co/blog/a-practical-introduction-to-elasticsearch"  target="_blank" rel="noopener"
    >A Practical Introduction to Elasticsearch</a></li>
</ul>
<p>ÔºàÂÆåÔºâ</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="lxbwolf/lxbwolf.github.io"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2024 Xiaobin&#39;s Notes
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
